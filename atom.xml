<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Ahonn</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.ahonn.me/"/>
  <updated>2017-08-31T07:26:46.000Z</updated>
  <id>http://www.ahonn.me/</id>
  
  <author>
    <name>Ahonn</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä»å¤´å¼€å§‹çš„ Mac</title>
    <link href="http://www.ahonn.me/2017/08/31/starting-from-scratch-mac/"/>
    <id>http://www.ahonn.me/2017/08/31/starting-from-scratch-mac/</id>
    <published>2017-08-31T06:56:58.000Z</published>
    <updated>2017-08-31T07:26:46.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://ouv0frko5.bkt.clouddn.com/2017-08-31-Code%20Geass.png" alt="Code Geass"></p>
<blockquote>
<p>é¢˜å›¾æ˜¯ç°åœ¨çš„å£çº¸ <a href="https://alpha.wallhaven.cc/wallpaper/456973" target="_blank" rel="external">Code Geass</a> ï¼ˆæ²¡é”™ï¼Œå°±æ˜¯åå›çš„é²é²ä¿®ä¸­çš„ Code Geassï¼‰</p>
</blockquote>
<p>æ˜¨å¤©ä¹±ææŠŠç”µè„‘æç‚¸äº†ï¼Œç„¶ååˆè¯¯æ“ä½œæŠŠç³»ç»Ÿæ ¼æ‰äº†ã€‚æ‚²å‰§.. é™¤äº†åœ¨ Github ä¸Šçš„ä»£ç å…¶ä»–ä»€ä¹ˆä¸œè¥¿éƒ½æ²¡æœ‰äº†ï¼Œå¿ƒç–¼æ”¶é›†äº†é‚£ä¹ˆä¹…çš„ç”µå­ä¹¦..</p>
<p>ç„¶ååªèƒ½é‡è£…ç³»ç»Ÿäº†ï¼Œæƒ³æƒ³ä¹Ÿå¥½.. æ˜¯æ—¶å€™æ¸…ç†æ¸…ç†ç”µè„‘äº†ï¼Œæ­£å¥½å€Ÿç€è¿™ä¸ªæœºä¼šæ•´ç†ä¸€ä¸‹ã€‚ä¸€å¼€å§‹ä½¿ç”¨ç®€ç›´çƒ¦åˆ°ä¸è¡Œã€‚æ²¡æœ‰å®‰è£…ç½—æŠ€çš„é¼ æ ‡é©±åŠ¨ï¼Œé¼ æ ‡æŒ‰é”®æ— æ³•æ‰“å¼€ Launchpadï¼Œè™½ç„¶å¯ä»¥ç”¨é”®ç›˜å¿«æ·é”®ï¼Œè¿˜æ˜¯è§‰å¾—å¾ˆä¸èˆ’æœã€‚è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡ç‚¹çš„æ˜¯æ²¡æœ‰ Alfredï¼Œç®€ç›´å˜å¾—ç”Ÿæ´»ä¸èƒ½è‡ªç†äº†ã€‚ç„¶åè¿˜æœ‰å¾ˆå¤šå¥½ç”¨çš„å·¥å…·è¦é‡æ–°å®‰è£…ï¼Œæ‰¾åŸå…ˆçš„ iTerm2 é…è‰²æ‰¾äº†åŠå¤©.. æ‰€ä»¥è¯´è®ºå¤‡ä»½çš„é‡è¦æ€§..</p>
<a id="more"></a>
<p>åªå¥½ä»é›¶å¼€å§‹äº†ï¼Œä¸‹é¢æ˜¯ä¸€äº›æ¯”è¾ƒ Nice çš„å·¥å…·ï¼š</p>
<ul>
<li>Alfredï¼šè¿™ä¸ªä¸ç”¨è¯´ï¼Œå¿…å¤‡ã€‚æ²¡æœ‰è¿™ä¸ªæˆ‘éƒ½ä¸ä¼šç”¨ç”µè„‘äº†</li>
<li>Chromeï¼šä¸è§£é‡Šï¼Œè¿˜å¥½å®ƒèƒ½åŒæ­¥å›ä¹‹å‰çš„ä¹¦ç­¾ä»€ä¹ˆçš„</li>
<li>Shadowsocksï¼šç¿»å¢™å¿…å¤‡ï¼Œæ²¡æœ‰å®ƒç®€ç›´ä¸åƒåœ¨ä¸Šç½‘</li>
<li>iHostsï¼šä¿®æ”¹ host ç¥å™¨ï¼Œå¼€æ”¾å¿…å¤‡</li>
<li>iPicï¼šå¥½ç”¨çš„å›¾åºŠå·¥å…·ï¼Œä¸€é”®ä¼ ä¸Šä¸ƒç‰›</li>
<li>GhostSKBï¼šè‡ªåŠ¨æ ¹æ® App åˆ‡æ¢è¾“å…¥æ³•</li>
<li>Dashï¼šæ–‡æ¡£ç¥å™¨ï¼Œæ­é… Alfred æŸ¥ API so easy</li>
<li>Magnetï¼šç±»ä¼¼ Windows ä¸Šçš„çª—å£æ§åˆ¶ï¼Œè§¦é¡¶å…¨å±ç­‰</li>
<li>Jietuï¼šè…¾è®¯å‡ºå“çš„æˆªå›¾è½¯ä»¶ï¼Œå…³æ‰å…¶ä»–æˆªå±åªç”¨è¿™ä¸ª</li>
<li>Paste: å‰ªåˆ‡æ¿å¢å¼ºï¼Œä½“éªŒè¶…çº§å¥½</li>
<li>Bartenderï¼šä¸Šé¢å®‰è£…äº†é‚£ä¹ˆå¤šä¸œè¥¿èœå•æ ä¸€å †å›¾æ ‡ï¼Œç”¨è¿™ä¸ªç®¡ç†</li>
</ul>
<p>é™¤äº†è¿™äº› App è¿˜æœ‰éå¸¸é‡è¦çš„ä¸œè¥¿è¦å®‰è£…ï¼šiTerm2 + zsh + oh my zshï¼Œæ¥ç€æŠŠ Neovim è£…ä¸Šä¸‹è½½ä¹‹å‰çš„é…ç½®ï¼Œè°ƒæ•´ iTerm2 çš„é…è‰²ï¼ˆç°åœ¨ç”¨çš„æ˜¯è¿™ä¸ª <a href="https://github.com/w0ng/vim-hybrid" target="_blank" rel="external">vim-hybrid</a>ï¼Œä¸»è¦æ˜¯é…åˆ Vim çš„é…è‰²ï¼‰ï¼Œç°åœ¨å¯ä»¥ç¾æ»‹æ»‹çš„å†™ä»£ç äº†ï½</p>
<p>ç­‰ä¸€ä¸‹ï¼Œæˆ‘çš„ Chrome æ’ä»¶å‘¢ï¼Ÿè¿˜å¥½å®ƒä»¬éƒ½å›åŒæ­¥å›æ¥ï¼Œè°¢å¤©è°¢åœ°ã€‚æˆ‘çš„æ’ä»¶ä¸»è¦æœ‰è¿™äº›ï¼š</p>
<ul>
<li>Octotreeï¼šGithub çš„ä¾§æ ç›®å½•æ ‘</li>
<li>GitHub Hovercardï¼šGithub Hover å¡ç‰‡</li>
<li>OneTabï¼šå¼€å¤ªå¤šæ ‡ç­¾åˆä¸æƒ³å…³æ‰çš„æ—¶å€™ç”¨è¿™ä¸ª</li>
<li>LassPassï¼šå¯†ç åŒæ­¥ï¼Œæ²¡é’±ä¹° 1Password çš„è¯ç”¨è¿™ä¸ªè¿˜æ˜¯ä¸é”™çš„</li>
<li>Advertising Terminatorï¼šå±è”½å¹¿å‘Š</li>
<li>Proxy SwitchyOmegaï¼šç½‘ç»œä»£ç†ï¼Œä¸»è¦é…åˆ Shadowsocks</li>
<li>Vimiumï¼šæµè§ˆå™¨ Vim æ¨¡å¼ï¼Œå¯ä»¥ä¸¢æ‰é¼ æ ‡äº†</li>
<li>Web Timerï¼šç»Ÿè®¡ä¸Šç½‘èŠ±è´¹æ—¶é—´</li>
</ul>
<p>ç„¶åå°±æ˜¯ä¸€äº›ç»å¸¸ç”¨çš„ App äº†ï¼ŒQuiverã€Pocketã€VS Codeã€ç½‘æ˜“äº‘éŸ³ä¹ä¹‹ç±»çš„ã€‚å·®ä¸å¤šè£…äº†è¯¥è£…çš„ä¸œè¥¿äº†ï¼Œç”¨èµ·æ¥é¡ºå¿ƒå¤šäº†â€¦ å‰©ä¸‹çš„å°±æ˜¯ä¹‹åæ…¢æ…¢ä¼˜åŒ–äº†ã€‚</p>
<p>ä¹‹å‰ä¸çŸ¥é“ MacOS æœ‰å•ç”¨æˆ·æ¨¡å¼..Google å‡ºæ¥çš„ä¹Ÿæ²¡äººæ.. ç­‰æˆ‘æ ¼å®Œç›˜ä¹‹åæ‰å‘ç°ã€‚å¦å¤–å…¶å®æˆ‘ç›´æ¥é‡è£…çš„è¯ä¸ªäººæ•°æ®éƒ½è¿˜åœ¨çš„.. è¯´åˆ°åº•è¿˜æ˜¯æˆ‘è‡ªå·±ä½œæ­»ç‚¹äº†æ ¼ç›˜.. è¯´å¤šäº†éƒ½æ˜¯æ³ª..</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://ouv0frko5.bkt.clouddn.com/2017-08-31-Code%20Geass.png&quot; alt=&quot;Code Geass&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é¢˜å›¾æ˜¯ç°åœ¨çš„å£çº¸ &lt;a href=&quot;https://alpha.wallhaven.cc/wallpaper/456973&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Code Geass&lt;/a&gt; ï¼ˆæ²¡é”™ï¼Œå°±æ˜¯åå›çš„é²é²ä¿®ä¸­çš„ Code Geassï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ˜¨å¤©ä¹±ææŠŠç”µè„‘æç‚¸äº†ï¼Œç„¶ååˆè¯¯æ“ä½œæŠŠç³»ç»Ÿæ ¼æ‰äº†ã€‚æ‚²å‰§.. é™¤äº†åœ¨ Github ä¸Šçš„ä»£ç å…¶ä»–ä»€ä¹ˆä¸œè¥¿éƒ½æ²¡æœ‰äº†ï¼Œå¿ƒç–¼æ”¶é›†äº†é‚£ä¹ˆä¹…çš„ç”µå­ä¹¦..&lt;/p&gt;
&lt;p&gt;ç„¶ååªèƒ½é‡è£…ç³»ç»Ÿäº†ï¼Œæƒ³æƒ³ä¹Ÿå¥½.. æ˜¯æ—¶å€™æ¸…ç†æ¸…ç†ç”µè„‘äº†ï¼Œæ­£å¥½å€Ÿç€è¿™ä¸ªæœºä¼šæ•´ç†ä¸€ä¸‹ã€‚ä¸€å¼€å§‹ä½¿ç”¨ç®€ç›´çƒ¦åˆ°ä¸è¡Œã€‚æ²¡æœ‰å®‰è£…ç½—æŠ€çš„é¼ æ ‡é©±åŠ¨ï¼Œé¼ æ ‡æŒ‰é”®æ— æ³•æ‰“å¼€ Launchpadï¼Œè™½ç„¶å¯ä»¥ç”¨é”®ç›˜å¿«æ·é”®ï¼Œè¿˜æ˜¯è§‰å¾—å¾ˆä¸èˆ’æœã€‚è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡ç‚¹çš„æ˜¯æ²¡æœ‰ Alfredï¼Œç®€ç›´å˜å¾—ç”Ÿæ´»ä¸èƒ½è‡ªç†äº†ã€‚ç„¶åè¿˜æœ‰å¾ˆå¤šå¥½ç”¨çš„å·¥å…·è¦é‡æ–°å®‰è£…ï¼Œæ‰¾åŸå…ˆçš„ iTerm2 é…è‰²æ‰¾äº†åŠå¤©.. æ‰€ä»¥è¯´è®ºå¤‡ä»½çš„é‡è¦æ€§..&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ˜è…¾å·¥å…·" scheme="http://www.ahonn.me/categories/tool/"/>
    
    
      <category term="MacOS" scheme="http://www.ahonn.me/tags/MacOS/"/>
    
      <category term="Chrome" scheme="http://www.ahonn.me/tags/Chrome/"/>
    
  </entry>
  
  <entry>
    <title>æœ€åæˆ‘é€‰æ‹©äº† Quiver</title>
    <link href="http://www.ahonn.me/2017/08/17/finally-i-chose-quiver/"/>
    <id>http://www.ahonn.me/2017/08/17/finally-i-chose-quiver/</id>
    <published>2017-08-17T12:59:35.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä½œä¸ºä¸€ä¸ªä¸æŠ˜è…¾ä¼šæ­»æ˜Ÿäººï¼Œç¬”è®°è½¯ä»¶ä¹Ÿæ˜¯æˆ‘çš„æŠ˜è…¾ç›®æ ‡ä¹‹ä¸€ã€‚</p>
<p>åœ¨æ­¤ä¹‹å‰çš„çº ç»“ä¸­æˆ‘é€‰æ‹©äº†ä¸ºçŸ¥ç¬”è®°ï¼Œä¸ºä»€ä¹ˆæˆ‘ä¸é€‰æ‹©å°è±¡ç¬”è®°å‘¢ï¼ŸåŸå› å¾ˆç®€å•ï¼Œå®ƒå¯¹ Markdown ä¸æ”¯æŒï¼Œè€Œæˆ‘åˆæ˜¯ç‰¹åˆ«è®¨åŒç”¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„ã€‚ä¹ æƒ¯ä¸Šéƒ½æ˜¯åœ¨ç¬”è®°è½¯ä»¶ä¸­å†™åšæ–‡ï¼Œç„¶åå†™åˆ°å·®ä¸å¤šäº†ç²˜è´´åˆ° Hexo ä¸­ç„¶åå‘å¸ƒã€‚ç”¨å°è±¡ç¬”è®°æ˜¾ç„¶å¹¶ä¸å‹å¥½ï¼Œè™½ç„¶è¯´æˆ‘ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å…¶ä¸­ç”¨ Markdown è¯­æ³•å†™ï¼Œä½†æ˜¯é‚£æ ·ä»£ç å—å°±æ²¡æœ‰åŠæ³•é«˜äº®äº†ã€‚</p>
<a id="more"></a>
<p>é™¤äº†è¿™ä¸ªåŸå› ï¼Œå…¶å®è¿˜æœ‰ä¸€ä¸ªã€‚å°±æ˜¯ Mac ä¸Šå°è±¡ç¬”è®°çš„ App å®åœ¨æ˜¯å¤ªä¸‘äº†.. æ‰€ä»¥åé¢é€‰æ‹©äº†ä¸ºçŸ¥ç¬”è®°ã€‚ä½†ï¼Œä¸ºçŸ¥ç¬”è®°ä¸Šå†™ Markdown çš„è¯éœ€è¦åœ¨ç¬”è®°æ ‡é¢˜åé¢åŠ ä¸Š .md åç¼€ï¼Œè¿™è®©æˆ‘å¾ˆä¸çˆ½ã€‚è€Œä¸”ç¬”è®°çš„æ ·å¼ä¹Ÿå¤ªä¸‘äº†å§ï¼Œä½œä¸ºå‰ç«¯ç®€ç›´ä¸èƒ½å¿ã€‚</p>
<p>é™¤äº†è¿™ä¸¤ä¸ªå®¶ä¼™ï¼Œæˆ‘è¿˜å°è¯•äº†å…¶ä»–çš„ä¸€äº›ç¬”è®°åº”ç”¨ï¼Œä¾‹å¦‚ Ulyssesï¼ŒBeer ä¹‹ç±»çš„ã€‚è™½ç„¶ Ulysses çœ‹èµ·æ¥å¾ˆå¥½ç”¨ï¼Œä½†æ— å¥ˆå®ƒå˜æˆäº†è®¢é˜…åˆ¶ï¼Œæ„Ÿè§‰å¹¶ä¸å€¼å¾—ä¹°äº†ã€‚ä¹‹å‰çš„ä¸€æ¬¡è´­ä¹°ç»ˆèº«ä½¿ç”¨è¿˜å·®ä¸å¤šã€‚Beer çš„è¯å°±æ˜¾å¾—åŠŸèƒ½å¤ªè¿‡å•è–„äº†ã€‚è¿™ä¸€ç±»è½¯ä»¶åŸºæœ¬ä¸Šéƒ½æ²¡æœ‰åŠæ³•å…¨å¹³å°é€šç”¨ï¼Œè‚¯å®šæ²¡æœ‰å°è±¡ç¬”è®°ä¹‹ç±»çš„é‚£ç§æ‰‹æœº Appã€‚ä¸è¿‡ä¹Ÿè¿˜å¥½ï¼Œåæ­£æˆ‘ä¸æ€ä¹ˆåœ¨æ‰‹æœºä¸Šè®°ç¬”è®°ï¼Œè€Œä¸”åŸºæœ¬ä¸Šä¹Ÿæ˜¯ç”µè„‘ä¸ç¦»èº«çš„ã€‚</p>
<p>æ‰€ä»¥ï¼Œè·¨ä¸è·¨å¹³å°å¯¹æˆ‘æ¥è¯´å°±æ²¡æœ‰ä»€ä¹ˆæ‰€è°“äº†ã€‚æ‰€ä»¥æœ€åå°±èšç„¦åˆ°äº†ä¸€æ¬¾å« Quiver çš„è½¯ä»¶ï¼ŒåŒæ ·çš„ä¸æ˜¯è·¨å¹³å°çš„åº”ç”¨ã€‚ä¸è¿‡æ¯”è¾ƒå–œæ¬¢çš„æ˜¯å®Œç¾æ”¯æŒ Markdown è¯­æ³•ï¼Œè€Œä¸”è¿˜èƒ½å¤Ÿè®¾ç½®ç¼–è¾‘å™¨çš„å¿«æ·é”®ï¼Œæä¾›äº†ç®€å•çš„ Vim/Emacs çš„æ¨¡å¼ã€‚è¿˜æœ‰ä¸€ç‚¹æ˜¯ç‰¹åˆ«å–œæ¬¢çš„ï¼Œå°±æ˜¯å¯ä»¥è‡ªå·±è‡ªå®šä¹‰æ•´ä¸ªç¼–è¾‘å™¨çš„æ ·å¼ï¼Œåªè¦æŒ‰ç…§æŒ‡å®šæ ¼å¼å†™ä¸€ä¸ª JSON æ–‡ä»¶ï¼Œå°±èƒ½å¤Ÿå®šåˆ¶è‡ªå·±å–œæ¬¢çš„ç•Œé¢äº†ã€‚å¤§çˆ±ï½</p>
<p><img src="http://ouv0frko5.bkt.clouddn.com/rfax0.jpg" alt="Quiver"></p>
<p>å½“ç„¶ï¼Œé™¤äº†è¿™äº›ä¹‹å¤–ï¼Œè¿˜å…³å¿ƒåŒæ­¥çš„é—®é¢˜ã€‚Quiver æ²¡æœ‰æä¾›æ•°æ®åŒæ­¥åŠŸèƒ½ï¼Œè€Œæ˜¯å°†ç¬”è®°ä¿å­˜ä¸º .qvlibrary åç¼€çš„ä¸€ä¸ªæ–‡ä»¶ã€‚Soï¼Œåªè¦æŠŠè¿™ä¸ªæ–‡ä»¶æ”¾åˆ° iCloud é‡Œé¢å°±ç›¸å½“äºä¸€ä¸ªç¬”è®°åŒæ­¥çš„åŠŸèƒ½äº†ã€‚åæ­£ç¬”è®°ä¹Ÿå¤§ä¸äº†é‚£é‡Œå»ã€‚5G çš„ icloud å…è´¹ç©ºé—´å®Œå…¨å¤Ÿç”¨ã€‚</p>
<p>ç»ˆäºå¯ä»¥é€‰å®šä¸€ä¸ªç¬”è®°è½¯ä»¶ä¸€ç›´ç”¨ä¸‹å»äº†ã€‚ğŸ˜¬</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä½œä¸ºä¸€ä¸ªä¸æŠ˜è…¾ä¼šæ­»æ˜Ÿäººï¼Œç¬”è®°è½¯ä»¶ä¹Ÿæ˜¯æˆ‘çš„æŠ˜è…¾ç›®æ ‡ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ­¤ä¹‹å‰çš„çº ç»“ä¸­æˆ‘é€‰æ‹©äº†ä¸ºçŸ¥ç¬”è®°ï¼Œä¸ºä»€ä¹ˆæˆ‘ä¸é€‰æ‹©å°è±¡ç¬”è®°å‘¢ï¼ŸåŸå› å¾ˆç®€å•ï¼Œå®ƒå¯¹ Markdown ä¸æ”¯æŒï¼Œè€Œæˆ‘åˆæ˜¯ç‰¹åˆ«è®¨åŒç”¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„ã€‚ä¹ æƒ¯ä¸Šéƒ½æ˜¯åœ¨ç¬”è®°è½¯ä»¶ä¸­å†™åšæ–‡ï¼Œç„¶åå†™åˆ°å·®ä¸å¤šäº†ç²˜è´´åˆ° Hexo ä¸­ç„¶åå‘å¸ƒã€‚ç”¨å°è±¡ç¬”è®°æ˜¾ç„¶å¹¶ä¸å‹å¥½ï¼Œè™½ç„¶è¯´æˆ‘ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å…¶ä¸­ç”¨ Markdown è¯­æ³•å†™ï¼Œä½†æ˜¯é‚£æ ·ä»£ç å—å°±æ²¡æœ‰åŠæ³•é«˜äº®äº†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ˜è…¾å·¥å…·" scheme="http://www.ahonn.me/categories/tool/"/>
    
    
      <category term="Notes" scheme="http://www.ahonn.me/tags/Notes/"/>
    
  </entry>
  
  <entry>
    <title>ä¸‡æ¶çš„BOMï¼šÃ¯Â»Â¿ ä¸ \ufeff</title>
    <link href="http://www.ahonn.me/2017/07/24/the-evil-of-the-BOM-ufeff-and-i%C2%BB%C2%BF/"/>
    <id>http://www.ahonn.me/2017/07/24/the-evil-of-the-BOM-ufeff-and-iÂ»Â¿/</id>
    <published>2017-07-24T14:14:22.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨æä¸€ä¸ª Sass æ–‡ä»¶çš„ç¼–è¯‘æ’ä»¶ï¼Œä¸»è¦ä½¿ç”¨ node-sass æ¥è¿›è¡Œç¼–è¯‘ï¼Œåœ¨è¿™è¿‡ç¨‹ä¸­é‡åˆ°ä¸€ä¸ªè›®å‘çš„å°é—®é¢˜ã€‚</p>
<p>åœ¨ä¸å‹ç¼©çš„æƒ…å†µä¸‹ä½¿ç”¨ node-sass è¿›è¡Œç¼–è¯‘çš„æ ·å¼æ–‡ä»¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥æ­£ç¡®çš„ç¼–è¯‘å‡ºè¯¥æœ‰çš„æ ·å¼ã€‚å¯æ˜¯å½“è¿›è¡Œå‹ç¼©æ—¶ï¼Œå°±å‡ºäº†é—®é¢˜äº†ã€‚å‹ç¼©åçš„æ–‡ä»¶è«åå¥‡å¦™çš„åœ¨æ–‡ä»¶æœ€å¼€å¤´å¤šäº†å‡ ä¸ªå¥‡æ€ªçš„å­—ç¬¦ï¼š<code>Ã¯Â»Â¿</code>ã€‚</p>
<a id="more"></a>
<p>æœ¬ç€æœ‰ä»€ä¹ˆä¸æ‡‚å…ˆ Google çš„åŸåˆ™ï¼Œæœç´¢ <code>&quot;Ã¯Â»Â¿&quot;</code>ã€‚å‘ç° stack overflow ä¸Šæœ‰ä¸ªç›¸å…³çš„é—®é¢˜ï¼š<a href="https://stackoverflow.com/questions/3255993/how-do-i-remove-%C3%AF-from-the-beginning-of-a-file" target="_blank" rel="external">How do I remove Ã¯Â»Â¿ from the beginning of a file?</a>ã€‚åŸæ¥è¿™æ˜¯ä¸€ä¸ªå« BOMï¼ˆByte Order Markï¼‰çš„ä¸œè¥¿ï¼Œå­—èŠ‚é¡ºåºæ ‡è®°ï¼Œå‡ºç°åœ¨æ–‡æœ¬æ–‡ä»¶å¤´éƒ¨ï¼ŒUnicodeç¼–ç æ ‡å‡†ä¸­ç”¨äºæ ‡è¯†æ–‡ä»¶æ˜¯é‡‡ç”¨å“ªç§æ ¼å¼çš„ç¼–ç ã€‚</p>
<blockquote>
<p>åœ¨ç½‘é¡µä¸Šä½¿ç”¨BOMæ˜¯ä¸ªé”™è¯¯ã€‚BOMè®¾è®¡å‡ºæ¥ä¸æ˜¯ç”¨æ¥æ”¯æŒHTMLå’ŒXMLçš„ã€‚</p>
</blockquote>
<p>ä¸Šé¢è¿™å¥æ¥è‡ª <a href="https://www.zhihu.com/question/20167122/answer/14199022" target="_blank" rel="external">ã€Œå¸¦ BOM çš„ UTF-8ã€å’Œã€Œæ—  BOM çš„ UTF-8ã€æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿç½‘é¡µä»£ç ä¸€èˆ¬ä½¿ç”¨å“ªä¸ªï¼Ÿ</a> çš„å›ç­”ã€‚æˆ‘æƒ³è¡¥å……ä¸€ä¸‹ï¼Œæ›´å¯æ¶çš„äº‹æƒ…æ˜¯ BOM åœ¨ CSS ä¸­ã€‚</p>
<p>ç”±äºåœ¨æ–‡ä»¶å¼€å¤´å¤šå‡ºäº†ä¸€ä¸ª BOMï¼Œä½¿å¾—å‹ç¼©åçš„æ‰€æœ‰æ ·å¼éƒ½å¤±æ•ˆäº†ã€‚ä¸€å¼€å§‹æˆ‘å°è¯•åœ¨æ–‡ä»¶æœ€å¼€å¤´åŠ ä¸Š <code>@charset &quot;utf-8&quot;</code>ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ã€‚ä¸è¿‡å‘ç°äº†åœ¨åŠ ä¸Š <code>@charset &quot;utf-8&quot;</code> åï¼Œå˜æˆäº†è¿™æ ·ï¼š</p>
<p><img src="http://ouv0frko5.bkt.clouddn.com/44hp9.jpg" alt="BOM"></p>
<p>å¤šå‡ºæ¥çš„ä¸€ä¸ªå°çº¢ç‚¹ï¼Œé¼ æ ‡ç§»ä¸Šå»æ˜¾ç¤º <code>&quot;\ufeff&quot;</code>ã€‚æ‰¾åˆ°ç½ªé­ç¥¸é¦–äº†ï¼Œæœç´¢ <code>&quot;\ufeff&quot;</code> å‘ç°æœ‰ç¯‡å…³äº JavaScript ä¸­å¤„ç† BOM çš„æ–‡ç« ï¼š<a href="https://imququ.com/post/bom-and-javascript-trim.html" target="_blank" rel="external">BOM å’Œ JavaScript ä¸­çš„ trim</a>ã€‚</p>
<p>æœ€åå¾—åˆ°è§£å†³æ–¹æ¡ˆï¼Œåœ¨ç¼–è¯‘åçš„æ ·å¼ä¸­è¿›è¡Œæ›¿æ¢ï¼Œç§»é™¤ <code>\ufeff</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">css = css.replace(<span class="string">"\ufeff"</span>, <span class="string">""</span>);</div></pre></td></tr></table></figure>
<p>è™½ç„¶è§£å†³æ–¹æ¡ˆè›®ç®€å•çš„ï¼Œä½†æ˜¯åœ¨æœç´¢ç­”æ¡ˆä¸ç¼–ç æµ‹è¯•çš„è¿‡ç¨‹ä¸­å­¦åˆ°äº†è›®å¤šã€‚ç¼–ç é—®é¢˜è¿˜æ˜¯è¦æ³¨æ„çš„ï¼Œè™½ç„¶æ— æ³•é¿å…é‡åˆ° utf-8 with BOMï¼Œä½†æ˜¯ä¹Ÿåº”è¯¥å°½é‡åªä¿å­˜ä¸º utf-8 without BOM ç¼–ç æ ¼å¼ã€‚å¦‚æœé‡åˆ°å¥‡æ€ªçš„å­—ç¬¦ï¼Œé‚£å…«æˆå°±æ˜¯ç¼–ç é—®é¢˜äº†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åœ¨æä¸€ä¸ª Sass æ–‡ä»¶çš„ç¼–è¯‘æ’ä»¶ï¼Œä¸»è¦ä½¿ç”¨ node-sass æ¥è¿›è¡Œç¼–è¯‘ï¼Œåœ¨è¿™è¿‡ç¨‹ä¸­é‡åˆ°ä¸€ä¸ªè›®å‘çš„å°é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸å‹ç¼©çš„æƒ…å†µä¸‹ä½¿ç”¨ node-sass è¿›è¡Œç¼–è¯‘çš„æ ·å¼æ–‡ä»¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥æ­£ç¡®çš„ç¼–è¯‘å‡ºè¯¥æœ‰çš„æ ·å¼ã€‚å¯æ˜¯å½“è¿›è¡Œå‹ç¼©æ—¶ï¼Œå°±å‡ºäº†é—®é¢˜äº†ã€‚å‹ç¼©åçš„æ–‡ä»¶è«åå¥‡å¦™çš„åœ¨æ–‡ä»¶æœ€å¼€å¤´å¤šäº†å‡ ä¸ªå¥‡æ€ªçš„å­—ç¬¦ï¼š&lt;code&gt;Ã¯Â»Â¿&lt;/code&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ€è€ƒæ€»ç»“" scheme="http://www.ahonn.me/categories/thinking/"/>
    
    
      <category term="å‰ç«¯" scheme="http://www.ahonn.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="CSS" scheme="http://www.ahonn.me/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>Redux æºç è§£æ</title>
    <link href="http://www.ahonn.me/2017/07/04/redux-source-code-insight/"/>
    <id>http://www.ahonn.me/2017/07/04/redux-source-code-insight/</id>
    <published>2017-07-04T09:44:24.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸‰å¤§åŸåˆ™"><a href="#ä¸‰å¤§åŸåˆ™" class="headerlink" title="ä¸‰å¤§åŸåˆ™"></a>ä¸‰å¤§åŸåˆ™</h2><ul>
<li>å•ä¸€æ•°æ®æºï¼ˆstoreï¼‰</li>
<li>state åªå¯è¯»ï¼ˆåªèƒ½é€šè¿‡ Reducer ç”Ÿæˆæ–° Stateï¼‰</li>
<li>ä½¿ç”¨çº¯å‡½æ•°æ‰§è¡Œä¿®æ”¹ï¼ˆReducer å¿…é¡»ä¸ºçº¯å‡½æ•°ï¼Œæ— å‰¯ä½œç”¨ï¼‰</li>
</ul>
<a id="more"></a>
<h2 id="å•å‘æ•°æ®æµ"><a href="#å•å‘æ•°æ®æµ" class="headerlink" title="å•å‘æ•°æ®æµ"></a>å•å‘æ•°æ®æµ</h2><ul>
<li><code>dispatch</code> è§¦å‘ action ä¼ é€’æ•°æ®ï¼Œä½†åº”è¯¥å°½é‡å‡å°‘ä¼ é€’çš„æ•°æ®</li>
<li>å¦‚æœæœ‰ middlewareï¼Œåœ¨ action å‘èµ·ä¹‹åï¼Œåˆ°è¾¾ reducer ä¹‹å‰æ‰§è¡Œ</li>
<li>åˆ°è¾¾ reducer ä¹‹åï¼Œæ ¹æ® action type è¿”å›æ–° state</li>
</ul>
<h2 id="æºç è§£æ"><a href="#æºç è§£æ" class="headerlink" title="æºç è§£æ"></a>æºç è§£æ</h2><p>Redux æä¾›çš„ API ä¸»è¦æœ‰ï¼š</p>
<ul>
<li><code>createStore</code>: åˆ›å»º store ä»¥åŠæä¾›ç›¸å…³æ“ä½œ</li>
<li><code>combineReducers</code>: åˆå¹¶ä¸åŒçš„ reducer å‡½æ•°</li>
<li><code>applyMiddleware</code>: æ·»åŠ  Redux ä¸­é—´ä»¶</li>
<li><code>bindActionCreators</code>: bind action åˆ°ç»„ä»¶ä¸­</li>
</ul>
<h3 id="createStore"><a href="#createStore" class="headerlink" title="createStore"></a>createStore</h3><p><code>createStore</code> ç”¨æ¥åˆ›å»º Redux storeï¼Œç”¨äºå­˜æ”¾æ‰€æœ‰çš„ stateã€‚</p>
<p>é€šè¿‡ <code>const store = createStore(reducer, initialState)</code> åˆ›å»º storeï¼Œåªèƒ½é€šè¿‡ dispatch action çš„æ–¹å¼æ¥æ”¹å˜ stateã€‚åŒæ—¶æä¾›äº† <code>getState</code>ï¼Œ<code>subscribe</code> ç­‰æ–¹æ³•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">createStore</span>(<span class="params">reducer, preloadedState, enhancer</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> currentReducer = reducer</div><div class="line">  <span class="keyword">let</span> currentState = preloadedState</div><div class="line">  <span class="keyword">let</span> currentListeners = []</div><div class="line">  <span class="keyword">let</span> nextListeners = currentListeners</div><div class="line">  <span class="keyword">let</span> isDispatching = <span class="literal">false</span></div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  dispatch(&#123; <span class="attr">type</span>: ActionTypes.INIT &#125;)</div><div class="line"></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    dispatch,</div><div class="line">    subscribe,</div><div class="line">    getState,</div><div class="line">    replaceReducer,</div><div class="line">    [$$observable]: observable</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“ä½¿ç”¨ <code>createStore</code> æ–¹æ³•æ—¶ï¼Œ<code>dispatch</code> äº†åä¸º <code>@@redux/INIT</code> çš„ actionã€‚è¡¨ç¤ºå·²ç»åˆå§‹åŒ–äº† storeã€‚</p>
<p><code>dispatch</code> æ–¹æ³•çš„å®ç°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">action</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">try</span> &#123;</div><div class="line">    isDispatching = <span class="literal">true</span></div><div class="line">    currentState = currentReducer(currentState, action)</div><div class="line">  &#125; <span class="keyword">finally</span> &#123;</div><div class="line">    isDispatching = <span class="literal">false</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> listeners = currentListeners = nextListeners</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; listeners.length; i++) &#123;</div><div class="line">    <span class="keyword">const</span> listener = listeners[i]</div><div class="line">    listener()</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> action</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>currentState = currentReducer(currentState, action)</code> æ‰§è¡Œ action å¯¹åº”çš„ reducer æ“ä½œäº§ç”Ÿæ–°çš„ stateï¼Œå¦‚æœæœ‰ç›‘å¬å‡½æ•°çš„è¯ï¼ŒæŒ‰é¡ºåºè§¦å‘ç›‘å¬å‡½æ•°ã€‚</p>
<p>ç›‘å¬å‡½æ•°ç”± <code>subscribe</code> æ–¹æ³•æ·»åŠ ï¼Œ<code>subscribe</code> æ–¹æ³•çš„è¿”å›ä¸€ä¸ª <code>unsubscribe</code> å‡½æ•°ï¼Œç”¨æ¥å–æ¶ˆç›‘å¬ã€‚</p>
<p><code>subscribe</code> æ–¹æ³•çš„å…·ä½“å®ç°:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">listener</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> listener !== <span class="string">'function'</span>) &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Expected listener to be a function.'</span>)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">let</span> isSubscribed = <span class="literal">true</span></div><div class="line"></div><div class="line">  ensureCanMutateNextListeners()</div><div class="line">  nextListeners.push(listener)</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">unsubscribe</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!isSubscribed) &#123;</div><div class="line">      <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    isSubscribed = <span class="literal">false</span></div><div class="line"></div><div class="line">    ensureCanMutateNextListeners()</div><div class="line">    <span class="keyword">const</span> index = nextListeners.indexOf(listener)</div><div class="line">    nextListeners.splice(index, <span class="number">1</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å®é™…ä¸Š <code>subscribe</code> ä»…æ˜¯åœ¨ <code>nextListeners</code> ä¸­æ·»åŠ æƒ³è¦æ‰§è¡Œçš„ç›‘å¬å‡½æ•°ï¼Œå¹¶è¿”å›äº†ç”¨äºåˆ é™¤è¯¥å‡½æ•°çš„ <code>unsubscribe</code> æ–¹æ³•</p>
<h3 id="combineReducers"><a href="#combineReducers" class="headerlink" title="combineReducers"></a>combineReducers</h3><p><code>combineReducers</code> ç”¨äºåˆå¹¶ä¸åŒçš„ reducer å‡½æ•°ï¼Œè¿”å›å”¯ä¸€çš„ä¸€ä¸ª reducer å‡½æ•°ä¾› <code>createStore</code> ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">combineReducers</span>(<span class="params">reducers</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> reducerKeys = <span class="built_in">Object</span>.keys(reducers)</div><div class="line">  <span class="keyword">const</span> finalReducers = &#123;&#125;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; reducerKeys.length; i++) &#123;</div><div class="line">    <span class="keyword">const</span> key = reducerKeys[i]</div><div class="line">	</div><div class="line">	<span class="comment">// ...</span></div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> reducers[key] === <span class="string">'function'</span>) &#123;</div><div class="line">      finalReducers[key] = reducers[key]</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">const</span> finalReducerKeys = <span class="built_in">Object</span>.keys(finalReducers)</div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div><div class="line">  </div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">combination</span>(<span class="params">state = &#123;&#125;, action</span>) </span>&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line"></div><div class="line">    <span class="keyword">let</span> hasChanged = <span class="literal">false</span></div><div class="line">    <span class="keyword">const</span> nextState = &#123;&#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; finalReducerKeys.length; i++) &#123;</div><div class="line">      <span class="keyword">const</span> key = finalReducerKeys[i]</div><div class="line">      <span class="keyword">const</span> reducer = finalReducers[key]</div><div class="line">      <span class="keyword">const</span> previousStateForKey = state[key]</div><div class="line">      <span class="keyword">const</span> nextStateForKey = reducer(previousStateForKey, action)</div><div class="line">	  <span class="comment">// ...</span></div><div class="line">      nextState[key] = nextStateForKey</div><div class="line">      hasChanged = hasChanged || nextStateForKey !== previousStateForKey</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> hasChanged ? nextState : state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é¦–å…ˆå¤„ç†ä¼ å…¥çš„ reducer å¯¹è±¡ï¼ˆåŒ…å«ä¸åŒçš„ reducer å‡½æ•°ï¼‰ï¼Œå¾—åˆ°é”®å€¼ä¸º function ç±»å‹çš„å¯¹è±¡ <code>finalReducers</code> ä¸ä¸€ä¸ªåŒ…å«å…¶é”®çš„æ•°ç»„ <code>finalReducerKeys</code>ã€‚</p>
<p><code>combineReducers</code> è¿”å›ä¸€ä¸ª <code>reducers</code> å‡½æ•°ç”¨äºå¤„ç† actionï¼Œå¾ªç¯æ‰€æœ‰çš„ reducers ä¼ å…¥ action è¿›è¡Œå¤„ç†ï¼Œå½“ state ä¸å˜æ—¶ï¼Œè¿”å›åŸæ¥çš„ state</p>
<h3 id="applyMiddleware"><a href="#applyMiddleware" class="headerlink" title="applyMiddleware"></a>applyMiddleware</h3><p><code>applyMiddleware</code> çš„ä½œç”¨æ˜¯æ·»åŠ ä¸­é—´ä»¶å¹¶æ‰§è¡Œä¸­é—´ä»¶ï¼Œä¸»è¦æ˜¯é€šè¿‡ <code>compose</code> å‡½æ•°å°†æ‰€æœ‰çš„ä¸­é—´ä»¶ä¸²èµ·æ¥</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params">...funcs</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (funcs.length === <span class="number">0</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="params">arg</span> =&gt;</span> arg</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (funcs.length === <span class="number">1</span>) &#123;</div><div class="line">    <span class="keyword">return</span> funcs[<span class="number">0</span>]</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> funcs.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> (...args) =&gt; a(b(...args)))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é‡ç‚¹æ˜¯ <code>funcs.reduce((a, b) =&gt; (...args) =&gt; a(b(...args)))</code> ï¼Œé€šè¿‡å‡½æ•°å¼ç¼–ç¨‹ä¸­å¸¸è§çš„ <code>f(g(args))</code> å½¢å¼ä¸²èµ·æ¥ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°ç”±å†…åˆ°å¤–æ‰§è¡Œä¼ å…¥ä¹‹å‰ä¼ å…¥çš„å‡½æ•°æ•°ç»„ï¼Œå‡½æ•°çš„å‚æ•°å°†ä¼šä¼ é€’åˆ°ç¬¬ä¸€ä¸ªæ‰§è¡Œçš„å‡½æ•°ä¸­ã€‚</p>
<p>ç®€å•çš„ä¾‹å­ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> f1 = <span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'f1: '</span>+ a)</div><div class="line">	<span class="keyword">return</span> a * <span class="number">10</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> f2 = <span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'f2: '</span> + a)</div><div class="line">	<span class="keyword">return</span> a + <span class="number">1</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> funcs = [f1, f2]</div><div class="line"></div><div class="line"><span class="keyword">const</span> func = funcs.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> (...args) =&gt; a(b(...args)))</div><div class="line">func(<span class="number">1</span>)</div></pre></td></tr></table></figure></p>
<p><img src="http://ouv0frko5.bkt.clouddn.com/qbs99.jpg" alt="compose"></p>
<p>åœ¨ applyMiddleware ä¸­ <code>dispatch = compose(...chain)(store.dispatch)</code>ï¼Œå³ä¼ å…¥ compose è¿”å›çš„å‡½æ•°çš„å‚æ•°ä¸º store åŸæ¥çš„ dispatch å‡½æ•°ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ·»åŠ äº†ä¸­é—´ä»¶åï¼Œæ‰§è¡Œ dispatch å‡½æ•°å°†ä¼šé¦–å…ˆä¾æ¬¡æ‰§è¡Œä¼ å…¥çš„ä¸­é—´ä»¶, æœ€åå†æ‰§è¡ŒåŸå…ˆçš„ <code>store.dispatch</code></p>
<p>å…³äº Redux midddleware æœ‰ç¯‡æ–‡ç« å†™å¾—å¾ˆä¸é”™ï¼š<a href="https://github.com/asd0102433/blog/issues/1" target="_blank" rel="external">compose and middleware æºç åˆ†æ</a></p>
<h3 id="bindActionCreators"><a href="#bindActionCreators" class="headerlink" title="bindActionCreators"></a>bindActionCreators</h3><p><code>bindActionCreators</code> æ–¹æ³•è¯´ç™½äº†å°±æ˜¯æŠŠ action creators è½¬æˆæ‹¥æœ‰åŒå keys çš„å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ dispatch å°†å¯¹è±¡åŒ…è£¹èµ·æ¥ï¼Œä»è€Œèƒ½å¤Ÿç›´æ¥è°ƒç”¨å‡½æ•° dispatch action</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindActionCreator</span>(<span class="params">actionCreator, dispatch</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> dispatch(actionCreator(...args))</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">bindActionCreators</span>(<span class="params">actionCreators, dispatch</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> actionCreators === <span class="string">'function'</span>) &#123;</div><div class="line">    <span class="keyword">return</span> bindActionCreator(actionCreators, dispatch)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(actionCreators)</div><div class="line">  <span class="keyword">const</span> boundActionCreators = &#123;&#125;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</div><div class="line">    <span class="keyword">const</span> key = keys[i]</div><div class="line">    <span class="keyword">const</span> actionCreator = actionCreators[key]</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> actionCreator === <span class="string">'function'</span>) &#123;</div><div class="line">      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> boundActionCreators</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™éƒ¨åˆ†å¾—æºç å¾ˆç®€å•ï¼Œåªæ˜¯ç®€å•çš„åˆ¤æ–­ actionCreatorsï¼Œæ˜¯å¯¹è±¡çš„è¯å°±è¿”å›ä¸€ä¸ªé”®å€¼ä¸ºç»‘å®šäº† dispatch çš„å‡½æ•°çš„å¯¹è±¡</p>
<h3 id="æ€è€ƒæ€»ç»“"><a href="#æ€è€ƒæ€»ç»“" class="headerlink" title="æ€è€ƒæ€»ç»“"></a>æ€è€ƒæ€»ç»“</h3><p>å¾ˆä¹…ä¹‹å‰å°±å­¦ä¼šäº† Redux çš„ã€ä½¿ç”¨ã€ï¼Œä½†æ˜¯å´ä¸æ˜ç™½åˆ°åº•æ˜¯ä»€ä¹ˆå®ç°çš„ï¼ŒåªçŸ¥é“åº”è¯¥é‚£æ ·ä½¿ç”¨ã€‚</p>
<p>é˜…è¯»äº†æºç ä¹‹åå¯¹ Redux æ•´ä¸ªæµç¨‹æ›´åŠ æ¸…æ™°ï¼Œæœ‰åˆ©äºä¹‹åçš„ä½¿ç”¨ã€‚ä¹Ÿæ›´åŠ ç†è§£ Redux å•å‘æ•°æ®æµçš„è¿™ç§æ€æƒ³ï¼Œè™½ç„¶ä½¿ç”¨ä¸Šæ›´åŠ ç¹çï¼Œä½†æ˜¯å¦‚æœæ•°æ®å¤æ‚èµ·æ¥ï¼Œè¿™ç§å•å‘æ•°æ®æµçš„ç®¡ç†æ–¹å¼è¿˜æ˜¯åˆ©å¤§äºå¼Šçš„ã€‚</p>
<p><strong>å‚è€ƒé“¾æ¥</strong></p>
<ul>
<li><a href="http://cn.redux.js.org/index.html" target="_blank" rel="external">Redux ä¸­æ–‡æ–‡æ¡£</a></li>
<li><a href="https://github.com/asd0102433/blog/issues/1" target="_blank" rel="external">compose and middleware æºç åˆ†æ</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä¸‰å¤§åŸåˆ™&quot;&gt;&lt;a href=&quot;#ä¸‰å¤§åŸåˆ™&quot; class=&quot;headerlink&quot; title=&quot;ä¸‰å¤§åŸåˆ™&quot;&gt;&lt;/a&gt;ä¸‰å¤§åŸåˆ™&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;å•ä¸€æ•°æ®æºï¼ˆstoreï¼‰&lt;/li&gt;
&lt;li&gt;state åªå¯è¯»ï¼ˆåªèƒ½é€šè¿‡ Reducer ç”Ÿæˆæ–° Stateï¼‰&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨çº¯å‡½æ•°æ‰§è¡Œä¿®æ”¹ï¼ˆReducer å¿…é¡»ä¸ºçº¯å‡½æ•°ï¼Œæ— å‰¯ä½œç”¨ï¼‰&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="æ€è€ƒæ€»ç»“" scheme="http://www.ahonn.me/categories/thinking/"/>
    
    
      <category term="React" scheme="http://www.ahonn.me/tags/React/"/>
    
      <category term="Redux" scheme="http://www.ahonn.me/tags/Redux/"/>
    
  </entry>
  
  <entry>
    <title>Vim å…¨å±€æœç´¢æ’ä»¶ï¼šctrlsf.vim</title>
    <link href="http://www.ahonn.me/2017/06/29/vim-plugin-ctrlsf/"/>
    <id>http://www.ahonn.me/2017/06/29/vim-plugin-ctrlsf/</id>
    <published>2017-06-29T10:05:46.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸¤å¤©ä¸€ç›´åœ¨çœ‹æ–‡æ¡£çœ‹æºç ï¼ŒVim ä¸Šç”¨çš„ Ack.vim åšå…¨å±€æœç´¢ï¼Œä½†æ˜¯ç”¨èµ·æ¥è›®éš¾ç”¨çš„ã€‚</p>
<p>ç»è¿‡ä¸€ç•ªæœç´¢ï¼Œæ‰¾åˆ°äº†å›½äººå†™çš„å…¨å±€æœç´¢çš„æ’ä»¶ï¼šctrlsf.vimï¼Œç»è¿‡é…ç½®ä¹‹åç”¨äº†èµ·æ¥ï¼Œæ„Ÿè§‰è›®å¥½ç”¨çš„ã€‚</p>
<p>å…·ä½“æ•ˆæœå¯ä»¥æŸ¥çœ‹ <a href="https://github.com/dyng/ctrlsf.vim" target="_blank" rel="external">ctrlsf.vim</a></p>
<a id="more"></a>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>ctrlsf æ˜¯ä¾èµ– ack/ag/pt/rg ä¹‹ç±»çš„ï¼Œæ‰€æœ‰å¿…é¡»å…ˆå®‰è£…å…¶ä¸­ä¹‹ä¸€ã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆå®‰è£… ack</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew install ack</div></pre></td></tr></table></figure>
<p>å…¶ä»–ç³»ç»Ÿå®‰è£…æ–¹å¼æŸ¥çœ‹ï¼š<a href="https://beyondgrep.com/install/" target="_blank" rel="external">https://beyondgrep.com/install/</a></p>
<p>ç„¶åå®‰è£… ctrlsf.vim æ’ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Plug &apos;dyng/ctrlsf.vim&apos;</div></pre></td></tr></table></figure>
<p>è¿è¡Œ <code>:PlugInstall</code> è¿›è¡Œå®‰è£…</p>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>æˆ‘æŠŠ <code>Ctrl-f</code> æ˜ å°„åˆ°äº† <code>:CrtlSF&lt;Space&gt;</code>ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥ <code>Ctrl-f</code> ç„¶åç›´æ¥è¾“å…¥ã€å›è½¦è¿›è¡Œå…¨å±€æœç´¢äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nnoremap &lt;C-f&gt; :CtrlSF&lt;Space&gt;</div></pre></td></tr></table></figure>
<p>ctrlsf æ’ä»¶è¿˜æä¾›äº†ä¸¤ç§æ¨¡å¼ï¼šnormal/compactã€‚<br>normal æ¨¡å¼æ˜¯å·¦åŠå±ä¸ºæœç´¢ç»“æœï¼Œå³åŠå±ä¸ºé¢„è§ˆçª—å£ã€‚è€Œ compact æ¨¡å¼åˆ™æ˜¯ç±»ä¼¼äº ctrlp çš„ quickfix çª—å£æ¨¡å¼ã€‚<br>ä¸ªäººè¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢ quick çª—å£æ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡ <code>let g:ctrlsf_default_view_mode = &#39;compact&#39;</code> è®¾ç½®ä¸ºé»˜è®¤ compact æ¨¡å¼ã€‚</p>
<p>æ­¤å¤–é€šè¿‡è®¾ç½® <code>let g:ctrlsf_ignore_dir</code> æŒ‡å®šè¦æœç´¢æ—¶å¿½ç•¥çš„ç›®å½•ã€‚</p>
<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>è®¾ç½®äº†å¿«æ·é”®æ˜ å°„ä¹‹åå°±å¯ä»¥æ„‰å¿«çš„ <code>C-f</code> è¾“å…¥å›è½¦æœç´¢äº†ã€‚ç„¶åå¯ä»¥åœ¨æœç´¢ç»“æœä¸­ç§»åŠ¨ï¼Œé¢„è§ˆï¼Œæ‰“å¼€ã€‚è¿˜èƒ½å¤ŸæŒ‰ M æ›´æ¢æ˜¾ç¤ºæ¨¡å¼ã€‚</p>
<p>å…·ä½“å¯ä»¥æŸ¥çœ‹ï¼š<a href="https://github.com/dyng/ctrlsf.vim#key-maps" target="_blank" rel="external">Key Maps</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ä¸¤å¤©ä¸€ç›´åœ¨çœ‹æ–‡æ¡£çœ‹æºç ï¼ŒVim ä¸Šç”¨çš„ Ack.vim åšå…¨å±€æœç´¢ï¼Œä½†æ˜¯ç”¨èµ·æ¥è›®éš¾ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç»è¿‡ä¸€ç•ªæœç´¢ï¼Œæ‰¾åˆ°äº†å›½äººå†™çš„å…¨å±€æœç´¢çš„æ’ä»¶ï¼šctrlsf.vimï¼Œç»è¿‡é…ç½®ä¹‹åç”¨äº†èµ·æ¥ï¼Œæ„Ÿè§‰è›®å¥½ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“æ•ˆæœå¯ä»¥æŸ¥çœ‹ &lt;a href=&quot;https://github.com/dyng/ctrlsf.vim&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ctrlsf.vim&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ˜è…¾å·¥å…·" scheme="http://www.ahonn.me/categories/tool/"/>
    
    
      <category term="Vim" scheme="http://www.ahonn.me/tags/Vim/"/>
    
  </entry>
  
  <entry>
    <title>åˆ°è¾¾æ­å·</title>
    <link href="http://www.ahonn.me/2017/06/23/arrived-in-hangzhou/"/>
    <id>http://www.ahonn.me/2017/06/23/arrived-in-hangzhou/</id>
    <published>2017-06-23T13:31:54.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>æŠ˜è…¾äº†å¥½å‡ å¤©ï¼Œç»ˆäºåˆ°è¾¾æ­å·äº†ã€‚åŸæœ¬æ˜¨å¤©å°±åº”è¯¥å…¥èŒçš„ï¼Œæ´»ç”Ÿç”Ÿå¾—ç­‰åˆ°ä¸‹å‘¨ä¸€ã€‚</p>
<p>ä¸€ä¸ªäººåœ¨å¤–é¢æœ€æ€•çš„å°±æ˜¯æ‰¾åœ°æ–¹åƒé¥­äº†ã€‚å®‰æ’çš„é…’åº—åœ¨å®é¾™åŸå¸‚å¹¿åœºé™„è¿‘ï¼Œä½†æ˜¯ä¸€ä¸ªäººå®åœ¨æ˜¯ä¸æƒ³å»å•†åœºé‡Œé¢åƒé‚£äº›ä¸œè¥¿ã€‚é—®äº†ä¸€ä¸‹å°ä¼™ä¼´çš„å»ºè®®ï¼Œè·‘å»é™„è¿‘åƒäº†ä¸ªéº»è¾£çƒ«ã€‚</p>
<a id="more"></a>
<p>æ—©ä¸Šè¿˜è·Ÿå©‰æ¸…è¯´å…¬äº¤å¡é—¨å¡ä»€ä¹ˆçš„è®°å¾—æ£€æŸ¥å¥½ï¼Œæ™šä¸Šåƒå®Œé¥­å°±å‘ç°è‡ªå·±æŠŠæˆ¿å¡å¼„ä¸¢äº†ã€‚å¹¸è¿çš„æ˜¯ï¼Œè·‘å›å»åƒé¥­çš„åœ°æ–¹æ‰¾åˆ°äº†æˆ¿å¡ï¼Œä¸ç„¶å°±å¾ˆéº»çƒ¦äº†ã€‚çœŸæ˜¯å¤§å¤´è™¾ã€‚</p>
<p>æ‰¾æˆ¿å­çš„äº‹æƒ…ä¹Ÿæ˜¯æœ‰ç‚¹çƒ¦ï¼Œçœ‹äº†å¾ˆå¤šç§Ÿæˆ¿çš„å¹³å°ï¼Œæ„Ÿè§‰éƒ½ç•¥è´µäº†ä¸€äº›ã€‚æƒ³ä¸Šé˜¿é‡Œå†…ç½‘çœ‹çœ‹çš„ï¼Œå¯æ˜¯å´è¿˜æ²¡æœ‰å…¥èŒçœ‹ä¸äº†ï¼Œåªèƒ½ä½œç½¢ã€‚ç­‰å‘¨ä¸€å…¥èŒä¹‹åå†è¯´ã€‚</p>
<p>çªç„¶è§‰å¾—é…’åº—æˆ¿é—´çš„æ¡Œæ¤…çš„è®¾è®¡æœ‰é—®é¢˜ã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦æŠŠæ¡Œå­ä¸‹çš„é«˜åº¦è®¾è®¡å¾—ä¸æ¤…å­å·®ä¸å¤šé«˜ï¼Œè¿™æ ·æˆ‘çš„è„šåº”è¯¥å¦‚ä½•æ˜¯å¥½å•Šã€‚åªèƒ½æ–œç€åäº†ã€‚æ›´å¥‡è‘©çš„æ˜¯ï¼Œæ¡Œé¢æ˜¯ç±»ä¼¼é•œé¢çš„é‚£ç§ï¼Œè€Œæ¡Œå­å¯¹ç€çš„å¤©èŠ±æ¿æœ‰ä¸¤ä¸ªç¯ã€‚ç„¶åååœ¨è¿™é‡Œå°±ç›´æ¥è¢«æ¡Œå­åå°„å›æ¥çš„ç¯å…‰äº®çã€‚åªå¥½æŠŠè¿™ä¸¤ä¸ªç¯å…³æ‰äº†ã€‚</p>
<p>åˆåˆ°æ­å·ï¼Œä¸€åˆ‡éƒ½å¥½é™Œç”Ÿã€‚æ„¿è‡ªå·±ä¸€åˆ‡å®‰å¥½ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æŠ˜è…¾äº†å¥½å‡ å¤©ï¼Œç»ˆäºåˆ°è¾¾æ­å·äº†ã€‚åŸæœ¬æ˜¨å¤©å°±åº”è¯¥å…¥èŒçš„ï¼Œæ´»ç”Ÿç”Ÿå¾—ç­‰åˆ°ä¸‹å‘¨ä¸€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªäººåœ¨å¤–é¢æœ€æ€•çš„å°±æ˜¯æ‰¾åœ°æ–¹åƒé¥­äº†ã€‚å®‰æ’çš„é…’åº—åœ¨å®é¾™åŸå¸‚å¹¿åœºé™„è¿‘ï¼Œä½†æ˜¯ä¸€ä¸ªäººå®åœ¨æ˜¯ä¸æƒ³å»å•†åœºé‡Œé¢åƒé‚£äº›ä¸œè¥¿ã€‚é—®äº†ä¸€ä¸‹å°ä¼™ä¼´çš„å»ºè®®ï¼Œè·‘å»é™„è¿‘åƒäº†ä¸ªéº»è¾£çƒ«ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç”Ÿæ´»å°è®°" scheme="http://www.ahonn.me/categories/life/"/>
    
    
      <category term="ç¢ç¢å¿µ" scheme="http://www.ahonn.me/tags/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>ä»é›¶å¼€å§‹å†™ä¸€ä¸ª Reactï¼šåˆå§‹åŒ–æ¸²æŸ“</title>
    <link href="http://www.ahonn.me/2017/06/08/write-a-react-from-scratch-init-render/"/>
    <id>http://www.ahonn.me/2017/06/08/write-a-react-from-scratch-init-render/</id>
    <published>2017-06-07T16:00:00.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>ã€ä»é›¶å¼€å§‹å†™ä¸€ä¸ª Reactã€ å°†ä¼šæ˜¯ä¸€ä¸ªå°ç³»åˆ—ï¼Œè®°å½•å­¦ä¹  React æºç çš„è¿‡ç¨‹ï¼Œå¹¶é€æ­¥å®ç°ä¸€ä¸ªç®€æ˜“çš„ç±» React åº“ã€‚</p>
<p>è¿™æ˜¯æœ¬ç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œè¯¥æ–‡ç« å°†é˜…è¯» React åˆå§‹åŒ–æ¸²æŸ“ç›¸å…³çš„ä»£ç ï¼Œå¹¶å®ç°ä¸€ä¸ªç®€å•çš„å°† JSX æ¸²æŸ“åˆ°é¡µé¢çš„åŠŸèƒ½ã€‚ï¼ˆä¸åŒ…æ‹¬ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸äº‹ä»¶å¤„ç†ç›¸å…³éƒ¨åˆ†ï¼‰</p>
<a id="more"></a>
<h2 id="æºç è§£æï¼šæ¸²æŸ“è¿‡ç¨‹"><a href="#æºç è§£æï¼šæ¸²æŸ“è¿‡ç¨‹" class="headerlink" title="æºç è§£æï¼šæ¸²æŸ“è¿‡ç¨‹"></a>æºç è§£æï¼šæ¸²æŸ“è¿‡ç¨‹</h2><h3 id="JSX-è§£æ"><a href="#JSX-è§£æ" class="headerlink" title="JSX è§£æ"></a>JSX è§£æ</h3><p>æˆ‘ä»¬çŸ¥é“åœ¨ React ç»„ä»¶<code>render()</code> è¿”å›çš„æ˜¯ JSXï¼Œè€Œ JSX å°†ä¼šè¢« babel è½¬æ¢ã€‚JSX å°†è¢«è½¬æ¢ä¸º <code>React.createElement(type, config, children)</code>çš„å½¢å¼ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// App.js</span></div><div class="line"><span class="comment">// è½¬æ¢å‰</span></div><div class="line">Class App extends Component &#123;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> &lt;h1 id='title'&gt;Hello World&lt;h1&gt;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// è½¬æ¢å</div><div class="line">var App = React.createClass(&#123;</div><div class="line">    render() &#123;</div><div class="line">        return React.createElement('h1', &#123;</div><div class="line">            id: 'title'</div><div class="line">        &#125;, 'hello world')</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><code>React.createElement()</code> çš„å®ç°ä½äº <a href="https://github.com/facebook/react/blob/15-stable/src/isomorphic/classic/element/ReactElement.js#L183" target="_blank" rel="external">/src/isomorphic/classic/element/ReactElement.js</a></p>
<p>è¿™é‡Œçš„ <code>React.createElement()</code>æ˜¯ç”¨æ¥ç”Ÿæˆè™šæ‹Ÿ DOM å…ƒç´ ï¼Œè¯¥å‡½æ•°å¯¹ç»„ä»¶çš„å±æ€§ï¼Œäº‹ä»¶ï¼Œå­ç»„ä»¶ç­‰è¿›è¡Œäº†å¤„ç†ï¼Œå¹¶è¿”å›å€¼ä¸ºä¸€ä¸ª <code>ReactElement</code> å¯¹è±¡ï¼ˆå•çº¯çš„ JavaScript å¯¹è±¡ï¼Œä»…åŒ…æ‹¬ type, props, key, ref ç­‰å±æ€§ï¼‰ã€‚</p>
<p>è¿™æ°å¥½è¯´æ˜äº† JSX ä¸­çš„ <code>&lt;h1 id=&#39;title&#39;&gt;hello world&lt;/h1&gt;</code>å®é™…ä¸Šæ˜¯ JavaScript å¯¹è±¡ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬é€šå¸¸å†™çš„ HTML æ ‡ç­¾ã€‚</p>
<h3 id="æ¸²æŸ“åˆ°é¡µé¢"><a href="#æ¸²æŸ“åˆ°é¡µé¢" class="headerlink" title="æ¸²æŸ“åˆ°é¡µé¢"></a>æ¸²æŸ“åˆ°é¡µé¢</h3><p>å•å•å£°æ˜äº†ç»„ä»¶è€Œæ²¡æœ‰æ¸²æŸ“åˆ°é¡µé¢ä¸Šæˆ‘ä»¬æ˜¯çœ‹ä¸è§çš„ï¼ˆåºŸè¯ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>ReactDOM.render()</code>å°†å…¶æ¸²æŸ“åˆ°é¡µé¢æŒ‡å®šä½ç½®ä¸Šã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// index.html</span></div><div class="line">&lt;html&gt;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;div id=<span class="string">'root'</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">    &lt;<span class="regexp">/body&gt;</span></div><div class="line"><span class="regexp">&lt;/</span>html&gt;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// index.js</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.js'</span></div><div class="line"></div><div class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span>, document.getElementById('root'))</span></div></pre></td></tr></table></figure>
<p><code>ReactDOM.render()</code> çš„å®ç°ä½äº<a href="https://github.com/facebook/react/blob/master/src/renderers/dom/stack/client/ReactMount.js#L581" target="_blank" rel="external"> </a><a href="https://github.com/facebook/react/blob/15-stable/src/renderers/dom/client/ReactMount.js" target="_blank" rel="external">/src/renderers/dom/client/ReactMount.js</a></p>
<p><code>ReactDOM.render()</code> å‡½æ•°å°†ä¼šæ ¹æ® <code>ReactElement</code> çš„ç±»å‹ç”Ÿæˆç›¸å¯¹åº”çš„<code>ReactComponent</code> å®ä¾‹ï¼Œå¹¶è°ƒç”¨å…¶ <code>mountComponent()</code>å‡½æ•°è¿›è¡Œç»„ä»¶åŠ è½½ï¼ˆè¿”å› HTMLç‰‡æ®µï¼‰ï¼Œé€’å½’åŠ è½½æ‰€æœ‰ç»„ä»¶åï¼Œé€šè¿‡ <a href="https://github.com/facebook/react/blob/b1768b5a48d1f82e4ef4150e0036c5f846d3758a/src/renderers/dom/shared/setInnerHTML.js" target="_blank" rel="external">setInnerHTML</a> å°† HTML æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚</p>
<p>åˆ¤æ–­éœ€è¦ç”Ÿæˆé‚£ç§ <code>ReactComponent</code>å®ä¾‹æ ¹æ® <code>ReactElement</code> å¯¹è±¡çš„ type å±æ€§æ¥å†³å®šã€‚å¯¹åº” HTML æ ‡ç­¾çš„ type ä¸€èˆ¬ä¸ºå­—ç¬¦ä¸²ï¼Œè€Œè‡ªå®šä¹‰çš„ç»„ä»¶åˆ™æ˜¯å¤§å†™å­—æ¯å¼€å¤´çš„ç»„ä»¶å‡½æ•°ï¼ˆè‡ªå®šä¹‰ç»„ä»¶éœ€è¦ importï¼Œè€Œ HTML æ ‡ç­¾ä¸éœ€è¦ï¼‰ã€‚</p>
<h4 id="ç”Ÿæˆ-ReactComponent"><a href="#ç”Ÿæˆ-ReactComponent" class="headerlink" title="ç”Ÿæˆ ReactComponent"></a>ç”Ÿæˆ <strong>ReactComponent</strong></h4><p>React ä¸­ç”Ÿæˆå¯¹åº”çš„ <code>ReactComponent</code>å®ä¾‹ç”± <code>instantiateReactComponent()</code>å®Œæˆï¼Œå…¶å®ç°ä½äº <a href="https://github.com/facebook/react/blob/15-stable/src/renderers/shared/stack/reconciler/instantiateReactComponent.js" target="_blank" rel="external">/src/renderers/shared/stack/reconciler/instantiateReactComponent.js</a></p>
<p><code>ReactComponent</code> åˆ†ä¸º 3 ç§ï¼š</p>
<ul>
<li><p><code>ReactEmptyComponent</code>:  ç©ºç»„ä»¶ï¼ˆReactElement çš„ type å±æ€§ä¸º null æˆ– false çš„ç»„ä»¶ï¼‰ï¼Œåœ¨æµè§ˆå™¨ä¸­è¿”å› <code>ReactDOMEmptyComponent</code>ã€‚</p>
</li>
<li><p><code>ReactHostComponent</code>: åŸç”Ÿç»„ä»¶ï¼ˆReactElement ä¸ºstringï¼Œnumber æˆ– ReactElement çš„ type å±æ€§ä¸º string çš„ç»„ä»¶ï¼‰ã€‚</p>
<ul>
<li><p><code>createInternalComponent()</code>ï¼šè¯¥å‡½æ•°ç”¨äºåˆ›å»ºåŸç”Ÿç»„ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸­è¿”å› <code>ReactDOMComponent</code>ã€‚</p>
</li>
<li><p><code>createInstanceForText()</code> : è¯¥å‡½æ•°ç”¨äºåˆ›å»ºçº¯æ–‡æœ¬ç»„ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸­è¿”å› <code>ReactDOMTextComponent</code>ã€‚</p>
</li>
</ul>
</li>
<li><p><code>ReactCompositeComponent</code>: è‡ªå®šä¹‰ç»„ä»¶ï¼ˆReactElement çš„ type å±æ€§ä¸º functionï¼‰</p>
</li>
</ul>
<p>å¯ä»¥å‘ç° React ä¸å¹³å°è§£è€¦ï¼Œä½¿ç”¨ <code>ReactEmptyComponent</code> ä¸ <code>ReactHostComponent</code>ã€‚è€Œè¿™ä¸¤ç§ç»„ä»¶ä¼šæ ¹æ®å¹³å°çš„ä¸åŒç”Ÿæˆä¸åŒçš„ç»„ä»¶å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ä¸­åˆ™ä¸º <code>ReactDOMEmptyComponent</code>ã€<code>ReactDOMComponent</code> ä¸ <code>ReactDOMTextComponent</code>ã€‚</p>
<p>å®ƒä»¬é€šè¿‡ <a href="https://github.com/facebook/react/blob/15-stable/src/renderers/dom/stack/client/ReactDOMStackInjection.js" target="_blank" rel="external">/src/renderers/dom/stack/client/ReactDOMStackInjection.js</a> è¿›è¡Œæ³¨å…¥ã€‚</p>
<p>ï¼ˆ <a href="https://github.com/facebook/react/tree/15-stable/src/renderers" target="_blank" rel="external">/src/renderers </a>è·¯å¾„ä¸‹åŒ…å«å„ä¸ªå¹³å°ä¸Šä¸åŒçš„ ReactComponent å®ç°ï¼ŒåŒ…æ‹¬ react-art/react-dom/react-nativeã€‚ï¼‰</p>
<h2 id="ä»é›¶å¼€å§‹ï¼šå®ç°åˆå§‹åŒ–æ¸²æŸ“"><a href="#ä»é›¶å¼€å§‹ï¼šå®ç°åˆå§‹åŒ–æ¸²æŸ“" class="headerlink" title="ä»é›¶å¼€å§‹ï¼šå®ç°åˆå§‹åŒ–æ¸²æŸ“"></a>ä»é›¶å¼€å§‹ï¼šå®ç°åˆå§‹åŒ–æ¸²æŸ“</h2><h3 id="è®¾ç½®-babel"><a href="#è®¾ç½®-babel" class="headerlink" title="è®¾ç½® babel"></a>è®¾ç½® babel</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£ babel å¦‚ä½•è½¬æ¢ JSXï¼š<a href="https://babeljs.io/docs/plugins/transform-react-jsx/" target="_blank" rel="external">React JSX transform</a>ã€‚</p>
<p>babel å¯ä»¥é€šè¿‡<code>transform-react-jsx</code>æ’ä»¶æ¥è®¾ç½®è§£æ JSX ä¹‹åè°ƒç”¨çš„å‡½æ•°ï¼Œé»˜è®¤è§£æä¸ºè°ƒç”¨ <code>React.createElement()</code>ã€‚æ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè™½ç„¶åœ¨ JSX ä»£ç ä¸­æ²¡æœ‰ä½¿ç”¨åˆ° Reactï¼Œå´ä»ç„¶éœ€è¦å¯¼å…¥å®ƒã€‚</p>
<p>é€šè¿‡é…ç½® <code>transform-react-jsx</code>æ’ä»¶çš„ <code>pragma</code>é€‰é¡¹å¯ä»¥ä¿®æ”¹è§£æåè°ƒç”¨çš„å‡½æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ä¿®æ”¹è§£æä¸ºè°ƒç”¨ dom() å‡½æ•°</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"plugins"</span>: [</div><div class="line">    [<span class="string">"transform-react-jsx"</span>, &#123;</div><div class="line">      <span class="string">"pragma"</span>: <span class="string">"dom"</span> <span class="comment">// é»˜è®¤ pragma ä¸º React.createElement</span></div><div class="line">    &#125;]</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>babel å°†ä¼šæŠŠ JSX ä¸­çš„æ ‡ç­¾åä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒæŠŠ JSX ä¸­çš„æ ‡ç­¾å±æ€§ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå°†æ ‡ç­¾å†…å®¹ä½œä¸ºå‰©ä½™çš„å‚æ•°ã€‚ä¼ é€’è¿™äº›å‚æ•°ç»™ <code>pragma</code> é€‰é¡¹è®¾ç½®çš„å‡½æ•°ã€‚</p>
<p><strong>PS: ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬ä½¿ç”¨é»˜è®¤çš„è§£æä¸º React.createElement()</strong></p>
<h3 id="å®ç°-createElement"><a href="#å®ç°-createElement" class="headerlink" title="å®ç° createElement"></a>å®ç° createElement</h3><p><code>createElement()</code>æ¥å—è‡³å°‘ 2 ä¸ªå‚æ•°ï¼šå…ƒç´ ç±»å‹ typeï¼ˆå­—ç¬¦ä¸²è¡¨ç¤ºåŸç”Ÿå…ƒç´ ï¼Œå‡½æ•°è¡¨ç¤ºè‡ªå®šä¹‰å…ƒç´ ï¼‰ï¼Œå…ƒç´ è®¾ç½® configã€‚å…¶ä»–å‚æ•°è§†ä¸ºå…ƒç´ çš„å­å…ƒç´  childrenã€‚å¹¶ä¸”è¯¥å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª <code>ReactElement</code> å¯¹è±¡ï¼Œå±æ€§åŒ…æ‹¬ type, props, key, refã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// element.js</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReactElement</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(type, props, key, ref) &#123;</div><div class="line">        <span class="keyword">this</span>.type = type</div><div class="line">        <span class="keyword">this</span>.props = props</div><div class="line">        <span class="keyword">this</span>.key = key</div><div class="line">        <span class="keyword">this</span>.ref = ref</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">type, config, ...children</span>)ï½›</span></div><div class="line"><span class="function">    // ...</span></div><div class="line"><span class="function">    <span class="title">return</span> <span class="title">new</span> <span class="title">ReactElement</span>(<span class="params">type, props, key, ref</span>)</span></div><div class="line"><span class="function">ï½</span></div></pre></td></tr></table></figure>
<p>ç„¶åéœ€è¦å¯¼å‡º <code>createElement</code>ï¼Œæ‰èƒ½å¤Ÿé€šè¿‡ <code>React.createElement()</code> çš„æ–¹å¼è°ƒç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// index.js</span></div><div class="line"><span class="keyword">import</span> &#123; createElement &#125; <span class="keyword">from</span> <span class="string">'./element'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> React = &#123;</div><div class="line">    createElement,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> React</div></pre></td></tr></table></figure>
<p><code>ReactElement</code>éœ€è¦ props, key ä¸ ref å‚æ•°ï¼Œè¿™ä¸‰ä¸ªå‚æ•°å°†é€šè¿‡å¤„ç† config ä¸ children å¾—åˆ°ã€‚</p>
<p>æˆ‘ä»¬å°†ä» config ä¸­è·å– key ä¸ refï¼ˆè‹¥å®ƒä»¬å­˜åœ¨çš„è¯ï¼‰ï¼Œå¹¶ä¸”æ ¹æ® config å¾—åˆ° props (å»é™¤ä¸€äº›ä¸å¿…è¦çš„å±æ€§)ï¼ŒåŒæ—¶å°† children æ·»åŠ åˆ° props å½“ä¸­ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">type, config, ...children</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> props = &#123;&#125;</div><div class="line">  <span class="keyword">let</span> key = <span class="literal">null</span></div><div class="line">  <span class="keyword">let</span> ref = <span class="literal">null</span></div><div class="line"></div><div class="line">  <span class="keyword">if</span> (config != <span class="literal">null</span>) &#123;</div><div class="line">    ref = config.ref === <span class="literal">undefined</span> ? <span class="literal">null</span> : config.ref</div><div class="line">    <span class="comment">// å½“ key ä¸ºæ•°å­—æ—¶ï¼Œå°† key è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></div><div class="line">    key = config.key === <span class="literal">undefined</span> ? <span class="literal">null</span> : <span class="string">''</span> + config.key</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> propsName <span class="keyword">in</span> config) &#123;</div><div class="line">      <span class="comment">// å‰”é™¤ä¸€äº›ä¸éœ€è¦çš„å±æ€§ï¼ˆkey, ref, __self, __sourceï¼‰</span></div><div class="line">      <span class="keyword">if</span> (RESERVED_PROPS.hasOwnProperty(propsName)) &#123;</div><div class="line">        <span class="keyword">continue</span></div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">if</span> (config.hasOwnProperty(propsName)) &#123;</div><div class="line">        props[propsName] = config[propsName]</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    props.children = children</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> ReactElement(type, props, key, ref)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæ·»åŠ å¯¹ <code>defaultProps</code> çš„æ”¯æŒã€‚<code>defaultProps</code> çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// App.js</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">App.defaultProps = &#123;</div><div class="line">    name: <span class="string">"ahonn"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“ä¼ å…¥ App ç»„ä»¶çš„ props ä¸­ä¸åŒ…å« name æ—¶ï¼Œè®¾ç½®é»˜è®¤çš„ name ä¸º â€œahonnâ€ã€‚å…·ä½“å®ç°ï¼šå½“ ReactElement çš„ type å±æ€§ä¸ºç»„ä»¶å‡½æ•°ä¸”åŒ…å« defaultProps æ—¶éå† propsï¼Œè‹¥ props ä¸­ä¸åŒ…å«  defaultProps ä¸­çš„å±æ€§æ—¶ï¼Œè®¾ç½®é»˜è®¤çš„ propsã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">type, config, ...children</span>) </span>&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">    <span class="keyword">if</span> (type &amp;&amp; type.defaultProps) &#123;</div><div class="line">        <span class="keyword">let</span> defaultProps = type.defaultProps</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> propsName <span class="keyword">in</span> defaultProps) &#123;</div><div class="line">            <span class="keyword">if</span> (props[propsName] === <span class="literal">undefined</span>) &#123;</div><div class="line">                props[propsName] = defaultProps[propsName]</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç›®å‰ä¸ºæ­¢å®Œæˆäº†å°† JSX è§£æä¸ºå‡½æ•°è°ƒç”¨ï¼ˆè¿™éƒ¨åˆ†ç”± babel å®Œæˆï¼‰ï¼Œè°ƒç”¨ <code>React.createElement()</code> ç”Ÿæˆ <code>ReactElement</code> å¯¹è±¡ã€‚</p>
<p>æ¥ä¸‹æ¥å°†å®ç° <code>instantiateReactComponent()</code>ï¼Œé€šè¿‡ ReactELemnt ç”Ÿæˆç›¸å¯¹åº”çš„ <code>ReactComponent</code> å®ä¾‹ã€‚</p>
<h3 id="å®ç°å·¥å‚æ–¹æ³•-instantiateReactComponent"><a href="#å®ç°å·¥å‚æ–¹æ³•-instantiateReactComponent" class="headerlink" title="å®ç°å·¥å‚æ–¹æ³• instantiateReactComponent"></a>å®ç°å·¥å‚æ–¹æ³• instantiateReactComponent</h3><p><code>instantiateReactComponent(element)</code>æ¥å—ä¸€ä¸ªå‚æ•° elementï¼Œè¯¥å‚æ•°å¯ä»¥æ˜¯ ReactElement å¯¹è±¡ï¼Œstringï¼Œnumberï¼Œfalse æˆ–è€… nullã€‚</p>
<p>æˆ‘ä»¬å°†åªè€ƒè™‘ Web ç«¯ï¼Œè€Œä¸åƒ React ä¸€æ ·ä½¿ç”¨é€‚é…å™¨æ¨¡å¼è¿›è¡Œè§£è€¦ã€‚</p>
<p>ReactElement ç”Ÿæˆç›¸åº” ReactComponent å®ä¾‹çš„è§„åˆ™ï¼š</p>
<ul>
<li><p>element ä¸º null æˆ– false æ—¶ï¼Œç”Ÿæˆ ReactDOMEmptyComponent å¯¹è±¡å®ä¾‹</p>
</li>
<li><p>element ä¸º string æˆ–è€… number æ—¶ï¼Œç”Ÿæˆ ReactDOMTextComponent å¯¹è±¡å®ä¾‹</p>
</li>
<li><p>element ä¸º object</p>
<ul>
<li><p>element.type ä¸º string æ—¶ï¼Œç”Ÿæˆ ReactDOMComponent å¯¹è±¡å®ä¾‹</p>
</li>
<li><p>element.type ä¸º functionï¼ˆç»„ä»¶å‡½æ•°ï¼‰æ—¶ï¼Œç”Ÿæˆ ReactCompositeComponent å¯¹è±¡å®ä¾‹</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// virtual-dom.js</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">instantiateReactComponent</span>(<span class="params">element</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> instance = <span class="literal">null</span></div><div class="line">  <span class="keyword">if</span> (element === <span class="literal">null</span> || element === <span class="literal">false</span>) &#123;</div><div class="line">    instance = <span class="keyword">new</span> ReactDOMEmptyComponent()</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> element === <span class="string">'string'</span> || <span class="keyword">typeof</span> element === <span class="string">'number'</span>) &#123;</div><div class="line">    instance = <span class="keyword">new</span> ReactDOMTextComponent(element)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> element === <span class="string">'object'</span>) &#123;</div><div class="line">    <span class="keyword">let</span> type = element.type</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> type === <span class="string">'string'</span>) &#123;</div><div class="line">      instance = <span class="keyword">new</span> ReactDomComponent(element)</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> type === <span class="string">'function'</span>)&#123;</div><div class="line">      instance = <span class="keyword">new</span> ReactCompositeComponent(element)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> instance</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å®ç°-ReactComponent"><a href="#å®ç°-ReactComponent" class="headerlink" title="å®ç° ReactComponent"></a>å®ç° ReactComponent</h3><p>ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸åŒçš„ <code>ReactComponent</code> ç±»ä»¥ä¾› <code>instantiateReactComponent()</code>ä½¿ç”¨ã€‚åŒæ—¶éœ€è¦å®ç°æ¯ä¸ªç±»çš„ <code>mountComponent()</code> æ–¹æ³•æ¥è¿”å›å¯¹åº”çš„ HTML ç‰‡æ®µã€‚</p>
<p><strong>ReactDOMEmptyComponent</strong></p>
<p><code>ReactDOMEmptyComponent</code> è¡¨ç¤ºç©ºç»„ä»¶ï¼Œ <code>mountComponent()</code> æ–¹æ³•è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReactDOMEmptyComponent</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">this</span>._element = <span class="literal">null</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  mountComponent() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">''</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>ReactDOMTextComponent</strong></p>
<p>ReactDOMTextComponent è¡¨ç¤º DOM æ–‡æœ¬ç»„ä»¶ï¼Œ<code>mountComponent()</code>æ–¹æ³•è¿”å›å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReactDOMTextComponent</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(text) &#123;</div><div class="line">    <span class="keyword">this</span>._element = text</div><div class="line">    <span class="keyword">this</span>._stringText = <span class="string">''</span> + text</div><div class="line">    <span class="keyword">this</span>._rootID = <span class="number">0</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  mountComponent(rootID) &#123;</div><div class="line">    <span class="keyword">this</span>._rootID = rootID</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._stringText</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>ReactDOMComponent</strong></p>
<p>ReactDOMComponent è¡¨ç¤ºåŸç”Ÿç»„ä»¶ï¼Œå³æµè§ˆå™¨æ”¯æŒçš„æ ‡ç­¾ï¼ˆdiv, p, h1, etc.ï¼‰ã€‚<code>mountConponent()</code> æ–¹æ³•è¿”å›å¯¹åº”çš„ HTML å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReactDomComponent</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(element) &#123;</div><div class="line">    <span class="keyword">let</span> tag = element.type</div><div class="line"></div><div class="line">    <span class="keyword">this</span>._element = element</div><div class="line">    <span class="keyword">this</span>._tag = tag.toLowerCase()</div><div class="line">    <span class="keyword">this</span>._rootID = <span class="number">0</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  mountComponent(rootID) &#123;</div><div class="line">    <span class="keyword">this</span>._rootID = rootID</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>._element.type !== <span class="string">'string'</span>) &#123;</div><div class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'DOMComponent\'s Element.type must be string'</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">let</span> ret = <span class="string">`&lt;<span class="subst">$&#123;<span class="keyword">this</span>._tag&#125;</span> `</span></div><div class="line">    <span class="keyword">let</span> props = <span class="keyword">this</span>._element.props</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> propsName <span class="keyword">in</span> props) &#123;</div><div class="line">      <span class="keyword">if</span> (propsName === <span class="string">'children'</span>) &#123;</div><div class="line">        <span class="keyword">continue</span></div><div class="line">      &#125;</div><div class="line">      <span class="keyword">let</span> propsValue = props[propsName]</div><div class="line">      ret += <span class="string">`<span class="subst">$&#123;propsName&#125;</span>=<span class="subst">$&#123;propsValue&#125;</span>`</span></div><div class="line">    &#125;</div><div class="line">    ret += <span class="string">'&gt;'</span></div><div class="line"></div><div class="line">    <span class="keyword">let</span> tagContent = <span class="string">''</span></div><div class="line">    <span class="keyword">if</span> (props.children) &#123;</div><div class="line">      tagContent = <span class="keyword">this</span>._mountChildren(props.children)</div><div class="line">    &#125;</div><div class="line">    ret += tagContent</div><div class="line">    ret += <span class="string">`&lt;/<span class="subst">$&#123;<span class="keyword">this</span>._tag&#125;</span>&gt;`</span></div><div class="line">    <span class="keyword">return</span> ret</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>ReactDOMComponent</code> çš„ <code>mountComponent()</code>æ–¹æ³•ä¼šç›¸å¯¹å¤æ‚ä¸€ç‚¹ã€‚å…·ä½“å®ç°æ€è·¯æ˜¯ï¼Œé€šè¿‡ <code>ReactElement</code> çš„ type ä¸ props å±æ€§æ‹¼æ¥å¯¹åº”çš„ HTML æ ‡ç­¾ã€‚å¤„ç† props çš„æ—¶å€™éœ€è¦è·³è¿‡ children å±æ€§ï¼Œå› ä¸ºéœ€è¦å°†å­ç»„ä»¶æ”¾åœ¨å½“å‰ç»„ä»¶ä¸­ã€‚</p>
<p>å½“å­˜åœ¨å­ç»„ä»¶ï¼ˆchildrenï¼‰æ—¶ï¼Œè°ƒç”¨ <code>_mountChildren(children)</code>å°†ç»„ä»¶è½¬æ¢ä¸ºå¯¹åº”çš„ HTML ç‰‡æ®µã€‚å…·ä½“è¿‡ç¨‹æ˜¯éå† childrenï¼Œè½¬æ¢ä¸º <code>ReactComponent</code> å¹¶è°ƒç”¨å…¶ <code>mountComponent()</code> æ–¹æ³•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">_mountChildren(children) &#123;</div><div class="line">  <span class="keyword">let</span> result = <span class="string">''</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">in</span> children) &#123;</div><div class="line">    <span class="keyword">const</span> child = children[index]</div><div class="line">    <span class="keyword">const</span> childrenComponent = instantiateReactComponent(child)</div><div class="line">    result += childrenComponent.mountComponent(index)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> result</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>ReactCompositeComponent</strong></p>
<p>ReactCompositeComponent è¡¨ç¤ºè‡ªå®šä¹‰çš„ç»„ä»¶ï¼Œ<code>mountComponent()</code>æ–¹æ³•å°†æ ¹æ®æä¾›çš„ç»„ä»¶å‡½æ•°ï¼ˆelement.typeï¼‰å®ä¾‹åŒ–ï¼Œå¹¶è°ƒç”¨è¯¥ç»„ä»¶çš„ <code>render()</code>æ–¹æ³•è¿”å› <code>ReactElement</code> å¯¹è±¡ã€‚å†é€šè¿‡<code>instantiateReactComponent()</code> ç”Ÿæˆå¯¹åº”çš„ <code>ReactComponent</code>ï¼Œæœ€åæ‰§è¡Œè¯¥ <code>ReactComponent</code> çš„<code>mountComponent()</code>æ–¹æ³•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReactCompositeComponent</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(element) &#123;</div><div class="line">    <span class="keyword">this</span>._element = element</div><div class="line">    <span class="keyword">this</span>._rootId = <span class="number">0</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  mountComponent(rootID) &#123;</div><div class="line">    <span class="keyword">this</span>._rootId = rootID</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>._element.type !== <span class="string">'function'</span>) &#123;</div><div class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'CompositeComponent\'s Element.type must be function'</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">const</span> Component = <span class="keyword">this</span>._element.type</div><div class="line">    <span class="keyword">const</span> props = <span class="keyword">this</span>._element.props</div><div class="line">    <span class="keyword">const</span> instance = <span class="keyword">new</span> Component(props)</div><div class="line"></div><div class="line">    <span class="keyword">const</span> renderedElement = instance.render()</div><div class="line">    <span class="keyword">const</span> renderedComponent = instantiateReactComponent(renderedElement)</div><div class="line">    <span class="keyword">const</span> renderedResult = renderedComponent.mountComponent(rootID)</div><div class="line">    <span class="keyword">return</span> renderedResult</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é€šè¿‡ ReactCompositeComponent å°†ä¹‹å‰çš„ ReactComponent è”ç³»èµ·æ¥ï¼Œå¹¶é€’å½’è°ƒç”¨ <code>mountComponent</code>æ–¹æ³•å¾—åˆ°ä¸€æ®µ HTMLã€‚æœ€å <code>render()</code>é€šè¿‡ node.innerHTML å°† HTML å­—ç¬¦ä¸²å¡«åˆ°é¡µé¢ä¸Šå¯¹åº”çš„å®¹å™¨ä¸­ã€‚</p>
<h3 id="å®ç°-render"><a href="#å®ç°-render" class="headerlink" title="å®ç° render"></a>å®ç° render</h3><p>æœ€åå°†ä¹‹å‰çš„å®ç°ä¸²èµ·æ¥ï¼Œåˆ©ç”¨ innerHTML å°†ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">element, container</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> rootID = <span class="number">0</span></div><div class="line">  <span class="keyword">const</span> mainComponent = instantiateReactComponent(element)</div><div class="line">  <span class="keyword">const</span> containerContent = mainComponent.mountComponent(rootID)</div><div class="line"></div><div class="line">  container.innerHTML = containerContent</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åˆ°è¿™é‡Œå°±åŸºæœ¬ä¸Šç®€å•çš„å®ç°äº† React ä¸­å°†ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Šçš„éƒ¨åˆ†ã€‚å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­éªŒè¯ä¸€ä¸‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// index.js</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'./tiny-react'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'./tiny-react'</span></div><div class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></div><div class="line"></div><div class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span>, document.getElementById('root'))</span></div><div class="line"><span class="xml"></span></div><div class="line"><span class="xml">// App.js</span></div><div class="line"><span class="xml"></span></div><div class="line"><span class="xml">import React, &#123; Component &#125; from './tiny-react'</span></div><div class="line"><span class="xml"></span></div><div class="line"><span class="xml">class App extends Component &#123;</span></div><div class="line"><span class="xml">  render() &#123;</span></div><div class="line"><span class="xml">    return (</span></div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;span&gt;It is Work!&lt;/span&gt;</div><div class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line"><span class="xml">    )</span></div><div class="line"><span class="xml">  &#125;</span></div><div class="line"><span class="xml">&#125;</span></div><div class="line"><span class="xml"></span></div><div class="line"><span class="xml">export default App</span></div></pre></td></tr></table></figure>
<p>é¡µé¢ä¸Šå°†æ˜¾ç¤º It is Work!</p>
<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>è™½ç„¶æ²¡æœ‰æ¶‰åŠåˆ°ç»„ä»¶æ›´æ–°ä¸ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Œé€šè¿‡é˜…è¯» React çš„æºç åŸºæœ¬ä¸Šä¹Ÿå¯¹åˆå§‹åŒ–æ¸²æŸ“çš„è¿‡ç¨‹æœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p>
<p>åœ¨æ­¤æ„Ÿè°¢ <a href="https://github.com/developit/preact" target="_blank" rel="external">preact</a>, <a href="https://github.com/Lucifier129/react-lite" target="_blank" rel="external">react-lite</a>, <a href="https://github.com/CodeFalling/react-tiny" target="_blank" rel="external">react-tiny</a> ç­‰é¡¹ç›®ï¼Œå®ƒä»¬ä¸ºæœ¬æ–‡æä¾›äº†å¾ˆå¤§å¸®åŠ©ã€‚</p>
<p>æ–‡ä¸­çš„æ‰€æœ‰ä»£ç å‡äº <a href="https://github.com/ahonn/tiny-react/tree/init-render" target="_blank" rel="external">tiny-react init-render</a> ï¼Œæ„Ÿè°¢é˜…è¯»ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã€ä»é›¶å¼€å§‹å†™ä¸€ä¸ª Reactã€ å°†ä¼šæ˜¯ä¸€ä¸ªå°ç³»åˆ—ï¼Œè®°å½•å­¦ä¹  React æºç çš„è¿‡ç¨‹ï¼Œå¹¶é€æ­¥å®ç°ä¸€ä¸ªç®€æ˜“çš„ç±» React åº“ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ¬ç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œè¯¥æ–‡ç« å°†é˜…è¯» React åˆå§‹åŒ–æ¸²æŸ“ç›¸å…³çš„ä»£ç ï¼Œå¹¶å®ç°ä¸€ä¸ªç®€å•çš„å°† JSX æ¸²æŸ“åˆ°é¡µé¢çš„åŠŸèƒ½ã€‚ï¼ˆä¸åŒ…æ‹¬ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸äº‹ä»¶å¤„ç†ç›¸å…³éƒ¨åˆ†ï¼‰&lt;/p&gt;
    
    </summary>
    
      <category term="æ€è€ƒæ€»ç»“" scheme="http://www.ahonn.me/categories/thinking/"/>
    
    
      <category term="React" scheme="http://www.ahonn.me/tags/React/"/>
    
      <category term="ä»é›¶å¼€å§‹" scheme="http://www.ahonn.me/tags/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
  </entry>
  
  <entry>
    <title>Koa2 æºç åˆ†æ</title>
    <link href="http://www.ahonn.me/2017/05/17/koa2-analysis/"/>
    <id>http://www.ahonn.me/2017/05/17/koa2-analysis/</id>
    <published>2017-05-16T16:00:00.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æºç ç»“æ„"><a href="#æºç ç»“æ„" class="headerlink" title="æºç ç»“æ„"></a>æºç ç»“æ„</h2><p>Koa çš„æºç ä¸­ä¸»è¦ä¸º <code>lib</code> ç›®å½•ä¸‹çš„ <code>application.js</code>ã€<code>context.js</code>ã€<code>request.js</code> ä¸ <code>response.js</code> æ–‡ä»¶</p>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">â”œâ”€â”€ AUTHORS</div><div class="line">â”œâ”€â”€ CODE_OF_CONDUCT.md</div><div class="line">â”œâ”€â”€ History.md</div><div class="line">â”œâ”€â”€ LICENSE</div><div class="line">â”œâ”€â”€ Makefile</div><div class="line">â”œâ”€â”€ Readme.md</div><div class="line">â”œâ”€â”€ benchmarks</div><div class="line">â”œâ”€â”€ docs</div><div class="line">â”œâ”€â”€ lib</div><div class="line">â”‚Â Â  â”œâ”€â”€ application.js</div><div class="line">â”‚Â Â  â”œâ”€â”€ context.js</div><div class="line">â”‚Â Â  â”œâ”€â”€ request.js</div><div class="line">â”‚Â Â  â””â”€â”€ response.js</div><div class="line">â”œâ”€â”€ package.json</div><div class="line">â””â”€â”€ test</div></pre></td></tr></table></figure>
<p><strong>application.js</strong>: æ¡†æ¶å…¥å£ï¼Œå¯¼å‡º Application ç±»ï¼Œå³ä½¿ç”¨æ—¶å¯¼å…¥çš„ Koa ç±»</p>
<p><strong>context.js</strong>: context å¯¹è±¡çš„åŸå‹ï¼Œä»£ç† request ä¸ response å¯¹è±¡</p>
<p><strong>request.js</strong>:  request å¯¹è±¡çš„åŸå‹ï¼Œæä¾›è¯·æ±‚ç›¸å…³çš„æ•°æ®ä¸æ“ä½œ</p>
<p><strong>response.js</strong>: response å¯¹è±¡çš„åŸå‹ï¼Œæä¾›å“åº”ç›¸å…³çš„æ•°æ®ä¸æ“ä½œ</p>
<h2 id="Application"><a href="#Application" class="headerlink" title="Application"></a>Application</h2><p>application.js æ˜¯ Koa æ¡†æ¶çš„å…¥å£ï¼Œå¯¼å‡º Application ç±»æ¥ç”¨äºåˆ›å»º app å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>); <span class="comment">// å¯¼å…¥ Koa, å³å¯¼å…¥ Application ç±»</span></div><div class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa(); <span class="comment">// åˆ›å»º Application ç±»çš„å®ä¾‹</span></div></pre></td></tr></table></figure>
<p>Application ç»§æ‰¿äº EventEmitter ç±»ï¼Œä½¿å¾— Koa èƒ½å¤Ÿç›‘å¬äº‹ä»¶ã€‚</p>
<h2 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h2><p>Application ç±»åŒ…å«äº†ä»¥ä¸‹å±æ€§ï¼š</p>
<ul>
<li><strong>proxy</strong>: æ˜¯å¦ä¿¡ä»» proxy header å‚æ•°ï¼Œé»˜è®¤ä¸º false</li>
<li><strong>middleware</strong>: ä¿å­˜é€šè¿‡ <code>app.use(middleware)</code> æ³¨å†Œçš„ä¸­é—´ä»¶</li>
<li><strong>subdomainOffset</strong>: å­åŸŸé»˜è®¤åç§»é‡ï¼Œé»˜è®¤ä¸º 2</li>
<li><strong>env</strong>: ç¯å¢ƒå‚æ•°ï¼Œé»˜è®¤ä¸º NODE_ENV æˆ– â€˜developmentâ€™</li>
<li><strong>context</strong>: context æ¨¡å—ï¼Œé€šè¿‡ <code>context.js</code> åˆ›å»º</li>
<li><strong>request</strong>: request æ¨¡å—ï¼Œé€šè¿‡ <code>request.js</code> åˆ›å»º</li>
<li><strong>response</strong>: response æ¨¡å—ï¼Œé€šè¿‡ <code>response.js</code> åˆ›å»º </li>
</ul>
<h2 id="Application-listen"><a href="#Application-listen" class="headerlink" title="Application#listen"></a>Application#listen</h2><p>Koa é€šè¿‡ <code>app.listen(port)</code> å‡½æ•°åœ¨æŸä¸ªç«¯å£å¯åŠ¨æœåŠ¡ã€‚</p>
<p>listen å‡½æ•°é€šè¿‡ http æ¨¡å—å¼€å¯æœåŠ¡ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Shorthand for:</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> *    http.createServer(app.callback()).listen(...)</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @param &#123;Mixed&#125; ...</span></div><div class="line"><span class="comment"> * @return &#123;Server&#125;</span></div><div class="line"><span class="comment"> * @api public</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line">listen(...args) &#123;</div><div class="line">  debug(<span class="string">'listen'</span>);</div><div class="line">  <span class="keyword">const</span> server = http.createServer(<span class="keyword">this</span>.callback());</div><div class="line">  <span class="keyword">return</span> server.listen(...args);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å®é™…ä¸Š <code>app.listen()</code>ä¸º <code>http.createServer(app.callback()).listen(...)</code>çš„é€Ÿè®°å†™æ³•ã€‚</p>
<p><code>http.createServer()</code>ç”¨äºåˆ›å»º Web æœåŠ¡å™¨ï¼Œæ¥å—ä¸€ä¸ªè¯·æ±‚ç›‘å¬å‡½æ•°ï¼Œå¹¶åœ¨å¾—åˆ°è¯·æ±‚æ—¶æ‰§è¡Œã€‚</p>
<p><code>app.callback()</code>ç”¨äºå¤„ç†è¯·æ±‚ï¼Œåˆå¹¶ä¸­é—´ä»¶ä¸åˆ›å»ºè¯·æ±‚ä¸Šä¸‹æ–‡å¯¹è±¡ç­‰ã€‚</p>
<h3 id="Application-use"><a href="#Application-use" class="headerlink" title="Application#use"></a>Application#use</h3><p>Koa é€šè¿‡ <code>app.use()</code>æ·»åŠ ä¸­é—´ä»¶ï¼Œå¹¶å°†ä¸­é—´ä»¶å‚¨å­˜åœ¨ <code>app.middleware</code>ä¸­ã€‚</p>
<p>åœ¨æ‰§è¡Œ <code>app.callback()</code>æ—¶ä¼šå°† <code>app.middleware</code> ä¸­çš„ä¸­é—´ä»¶åˆå¹¶ä¸ºä¸€ä¸ªå‡½æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Use the given middleware `fn`.</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * Old-style middleware will be converted.</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @param &#123;Function&#125; fn</span></div><div class="line"><span class="comment"> * @return &#123;Application&#125; self</span></div><div class="line"><span class="comment"> * @api public</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line">use(fn) &#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> fn !== <span class="string">'function'</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'middleware must be a function!'</span>);</div><div class="line">  <span class="keyword">if</span> (isGeneratorFunction(fn)) &#123;</div><div class="line">    deprecate(<span class="string">'Support for generators will be removed in v3. '</span> +</div><div class="line">              <span class="string">'See the documentation for examples of how to convert old middleware '</span> +</div><div class="line">              <span class="string">'https://github.com/koajs/koa/blob/master/docs/migration.md'</span>);</div><div class="line">    fn = convert(fn);</div><div class="line">  &#125;</div><div class="line">  debug(<span class="string">'use %s'</span>, fn._name || fn.name || <span class="string">'-'</span>);</div><div class="line">  <span class="keyword">this</span>.middleware.push(fn);</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Koa1.x ç‰ˆæœ¬ä½¿ç”¨ Generator Function çš„æ–¹å¼å†™ä¸­é—´ä»¶ï¼Œè€Œ Koa2 æ”¹ç”¨ ES6 async/awaitã€‚</p>
<p>æ‰€ä»¥åœ¨ <code>use()</code> å‡½æ•°ä¸­ä¼šåˆ¤æ–­æ˜¯å¦ä¸ºæ—§é£æ ¼çš„ä¸­é—´ä»¶å†™æ³•ï¼Œå¹¶å¯¹æ—§é£æ ¼å†™æ³•çš„ä¸­é—´ä»¶è¿›è¡Œè½¬æ¢ï¼ˆä½¿ç”¨ <a href="https://github.com/koajs/convert" target="_blank" rel="external">koa-convert</a> è¿›è¡Œè½¬æ¢ï¼‰ã€‚</p>
<p>å¯ä»¥æ³¨æ„åˆ°è¿™é‡Œ <code>use()</code> å‡½æ•°è¿”å›äº† thisï¼Œè¿™ä½¿å¾—åœ¨æ·»åŠ ä¸­é—´ä»¶çš„æ—¶å€™èƒ½å¤Ÿé“¾å¼è°ƒç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">app</div><div class="line">  .use(<span class="function"><span class="keyword">function</span> (<span class="params">ctx, next</span>) </span>&#123;</div><div class="line">    <span class="comment">// do some thing</span></div><div class="line">  &#125;)</div><div class="line">  .use(<span class="function"><span class="keyword">function</span> (<span class="params">ctx, next</span>) </span>&#123;</div><div class="line">    <span class="comment">// do some thing</span></div><div class="line">  &#125;)</div><div class="line">  <span class="comment">// ...</span></div></pre></td></tr></table></figure>
<h3 id="Application-callback"><a href="#Application-callback" class="headerlink" title="Application#callback"></a>Application#callback</h3><p><code>app.callback()</code>è´Ÿè´£åˆå¹¶ä¸­é—´ä»¶ï¼Œåˆ›å»ºè¯·æ±‚ä¸Šä¸‹æ–‡å¯¹è±¡ä»¥åŠè¿”å›è¯·æ±‚å¤„ç†å‡½æ•°ç­‰ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Return a request handler callback</span></div><div class="line"><span class="comment"> * for node's native http server.</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @return &#123;Function&#125;</span></div><div class="line"><span class="comment"> * @api public</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line">callback() &#123;</div><div class="line">  <span class="keyword">const</span> fn = compose(<span class="keyword">this</span>.middleware);</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (!<span class="keyword">this</span>.listeners(<span class="string">'error'</span>).length) <span class="keyword">this</span>.on(<span class="string">'error'</span>, <span class="keyword">this</span>.onerror);</div><div class="line"></div><div class="line">  <span class="keyword">const</span> handleRequest = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</div><div class="line">    res.statusCode = <span class="number">404</span>;</div><div class="line">    <span class="keyword">const</span> ctx = <span class="keyword">this</span>.createContext(req, res);</div><div class="line">    <span class="keyword">const</span> onerror = <span class="function"><span class="params">err</span> =&gt;</span> ctx.onerror(err);</div><div class="line">    <span class="keyword">const</span> handleResponse = <span class="function"><span class="params">()</span> =&gt;</span> respond(ctx);</div><div class="line">    onFinished(res, onerror);</div><div class="line">    <span class="keyword">return</span> fn(ctx).then(handleResponse).catch(onerror);</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> handleRequest;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é€šè¿‡ <code>compose</code> å‡½æ•°ï¼ˆ<a href="https://github.com/koajs/compose" target="_blank" rel="external">koa-compose</a>ï¼‰åˆå¹¶ <code>app.middleware</code>ä¸­çš„æ‰€æœ‰ä¸­é—´ä»¶ã€‚<a href="/koa/compose.md">æŸ¥çœ‹</a>å…³äº koa-compose çš„åˆ†æã€‚</p>
<p><code>app.callback()</code> å‡½æ•°æœ€åè¿”å›ä¸€ä¸ªè¯·æ±‚å¤„ç†å‡½æ•° <code>handleRequest</code>ã€‚è¯¥å‡½æ•°å³ä¸º<code>http.createServer</code> æ¥æ”¶çš„è¯·æ±‚å¤„ç†å‡½æ•°ï¼Œåœ¨å¾—åˆ°è¯·æ±‚æ—¶æ‰§è¡Œã€‚</p>
<h4 id="handleRequest"><a href="#handleRequest" class="headerlink" title="handleRequest"></a>handleRequest</h4><p><code>handleRequest</code>å‡½æ•°é¦–å…ˆå°†å“åº”çŠ¶æ€ç é»˜è®¤è®¾ç½®ä¸º 404ï¼Œæ¥ç€é€šè¿‡ <code>app.createContext()</code>åˆ›å»ºè¯·æ±‚çš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</p>
<p><code>onFinished(res, onerror)</code>é€šè¿‡ç¬¬ä¸‰æ–¹åº“ <a href="https://github.com/jshttp/on-finished" target="_blank" rel="external">on-finished</a> ç›‘å¬ http responseï¼Œå½“è¯·æ±‚ç»“æŸæ—¶æ‰§è¡Œå›è°ƒã€‚</p>
<p>è¿™é‡Œä¼ å…¥çš„å›è°ƒæ˜¯ <code>context.onerror(err)</code>ï¼Œå³å½“é”™è¯¯å‘ç”Ÿæ—¶æ‰æ‰§è¡Œã€‚</p>
<p>æœ€åè¿”å› <code>fn(ctx).then(handleResponse).catch(onerror)</code>ï¼Œå³å°†æ‰€æœ‰ä¸­é—´ä»¶æ‰§è¡Œï¼ˆä¼ å…¥è¯·æ±‚ä¸Šä¸‹æ–‡å¯¹è±¡ ctxï¼‰ï¼Œä¹‹åæ‰§è¡Œå“åº”å¤„ç†å‡½æ•°ï¼ˆ<code>app.respond(ctx)</code>ï¼‰ï¼Œå½“æŠ›å‡ºå¼‚å¸¸æ—¶åŒæ ·ä½¿ç”¨ <code>cintext.onerror(err)</code>å¤„ç†ã€‚</p>
<h4 id="createContext"><a href="#createContext" class="headerlink" title="createContext"></a>createContext</h4><p>app.createContext() ç”¨æ¥åˆ›å»ºè¯·æ±‚ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå¹¶ä»£ç† Koa çš„ request å’Œ response æ¨¡å—ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Initialize a new context.</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * @api private</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line">createContext(req, res) &#123;</div><div class="line">  <span class="keyword">const</span> context = <span class="built_in">Object</span>.create(<span class="keyword">this</span>.context);</div><div class="line">  <span class="keyword">const</span> request = context.request = <span class="built_in">Object</span>.create(<span class="keyword">this</span>.request);</div><div class="line">  <span class="keyword">const</span> response = context.response = <span class="built_in">Object</span>.create(<span class="keyword">this</span>.response);</div><div class="line">  context.app = request.app = response.app = <span class="keyword">this</span>;</div><div class="line">  context.req = request.req = response.req = req;</div><div class="line">  context.res = request.res = response.res = res;</div><div class="line">  request.ctx = response.ctx = context;</div><div class="line">  request.response = response;</div><div class="line">  response.request = request;</div><div class="line">  context.originalUrl = request.originalUrl = req.url;</div><div class="line">  context.cookies = <span class="keyword">new</span> Cookies(req, res, &#123;</div><div class="line">    keys: <span class="keyword">this</span>.keys,</div><div class="line">    secure: request.secure</div><div class="line">  &#125;);</div><div class="line">  request.ip = request.ips[<span class="number">0</span>] || req.socket.remoteAddress || <span class="string">''</span>;</div><div class="line">  context.accept = request.accept = accepts(req);</div><div class="line">  context.state = &#123;&#125;;</div><div class="line">  <span class="keyword">return</span> context;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå¯¹è¯·æ±‚éƒ½å¯¹åº”åœ¨ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­æ·»åŠ å¯¹åº”çš„ cookiesã€‚</p>
<h4 id="respond"><a href="#respond" class="headerlink" title="respond"></a>respond</h4><p><code>app.respond(ctx)</code> å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ <code>app.createContext()</code>å‡½æ•°ä¸­çš„ <code>handleResponse</code>ã€‚åœ¨æ‰€æœ‰ä¸­é—´ä»¶æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œã€‚</p>
<p>åœ¨ koa ä¸­å¯ä»¥é€šè¿‡è®¾ç½® <code>ctx.respond = false</code>æ¥è·³è¿‡è¿™ä¸ªå‡½æ•°ï¼Œä½†ä¸æ¨èè¿™æ ·åšã€‚å¦å¤–ï¼Œå½“ä¸Šä¸‹æ–‡å¯¹è±¡ä¸å¯å†™æ—¶ä¹Ÿä¼šé€€å‡ºè¯¥å‡½æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="literal">false</span> === ctx.respond) <span class="keyword">return</span>;</div><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">if</span> (!ctx.writable) <span class="keyword">return</span>;</div></pre></td></tr></table></figure>
<p>å½“è¿”å›çš„çŠ¶æ€ç è¡¨ç¤ºæ²¡æœ‰å“åº”ä¸»ä½“æ—¶ï¼Œå°†å“åº”ä¸»ä½“ç½®ç©ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ignore body</span></div><div class="line"><span class="keyword">if</span> (statuses.empty[code]) &#123;</div><div class="line">  <span class="comment">// strip headers</span></div><div class="line">  ctx.body = <span class="literal">null</span>;</div><div class="line">  <span class="keyword">return</span> res.end();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“è¯·æ±‚æ–¹æ³•ä¸º HEAD æ—¶ï¼Œåˆ¤æ–­å“åº”å¤´æ˜¯å¦å‘é€ä»¥åŠå“åº”ä¸»ä½“æ˜¯å¦ä¸º JSON æ ¼å¼ï¼Œè‹¥æ»¡è¶³åˆ™è®¾ç½®å“åº” Content-Lengthï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="string">'HEAD'</span> == ctx.method) &#123;</div><div class="line">  <span class="keyword">if</span> (!res.headersSent &amp;&amp; isJSON(body)) &#123;</div><div class="line">    ctx.length = Buffer.byteLength(<span class="built_in">JSON</span>.stringify(body));</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> res.end();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“è¿”å›çš„çŠ¶æ€ç è¡¨ç¤ºæœ‰å“åº”ä¸»ä½“ï¼Œä½†å“åº”ä¸»ä½“ä¸ºç©ºæ—¶ï¼Œå°†å“åº”ä¸»ä½“è®¾ç½®ä¸ºå“åº”ä¿¡æ¯æˆ–çŠ¶æ€ç ã€‚å¹¶å½“å“åº”å¤´æœªå‘é€æ—¶è®¾ç½® Content-Type ä¸ Content-Lengthï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="literal">null</span> == body) &#123;</div><div class="line">  body = ctx.message || <span class="built_in">String</span>(code);</div><div class="line">  <span class="keyword">if</span> (!res.headersSent) &#123;</div><div class="line">    ctx.type = <span class="string">'text'</span>;</div><div class="line">    ctx.length = Buffer.byteLength(body);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> res.end(body);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œå¯¹ä¸åŒçš„å“åº”ä¸»ä½“è¿›è¡Œå¤„ç†ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// responses</span></div><div class="line"><span class="keyword">if</span> (Buffer.isBuffer(body)) <span class="keyword">return</span> res.end(body);</div><div class="line"><span class="keyword">if</span> (<span class="string">'string'</span> == <span class="keyword">typeof</span> body) <span class="keyword">return</span> res.end(body);</div><div class="line"><span class="keyword">if</span> (body <span class="keyword">instanceof</span> Stream) <span class="keyword">return</span> body.pipe(res);</div><div class="line"></div><div class="line"><span class="comment">// body: json</span></div><div class="line">body = <span class="built_in">JSON</span>.stringify(body);</div><div class="line"><span class="keyword">if</span> (!res.headersSent) &#123;</div><div class="line">  ctx.length = Buffer.byteLength(body);</div><div class="line">&#125;</div><div class="line">res.end(body);</div></pre></td></tr></table></figure>
<h2 id="Compose"><a href="#Compose" class="headerlink" title="Compose"></a>Compose</h2><p>åœ¨ application.js ä¸­ï¼Œ<code>callback()</code>å‡½æ•°é€šè¿‡ <code>koa-compose</code> ç»„åˆæ‰€æœ‰çš„ä¸­é—´ä»¶ï¼Œç»„åˆæˆå•ä¸ªå‡½æ•°ã€‚</p>
<p>koa-compose  çš„å®ç°å¾ˆç®€å•ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">compose</span> (<span class="params">middleware</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(middleware)) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Middleware stack must be an array!'</span>)</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> fn <span class="keyword">of</span> middleware) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> fn !== <span class="string">'function'</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Middleware must be composed of functions!'</span>)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">context, next</span>) </span>&#123;</div><div class="line">    <span class="comment">// last called middleware #</span></div><div class="line">    <span class="keyword">let</span> index = <span class="number">-1</span></div><div class="line">    <span class="keyword">return</span> dispatch(<span class="number">0</span>)</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span> (<span class="params">i</span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (i &lt;= index) <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'next() called multiple times'</span>))</div><div class="line">      index = i</div><div class="line">      <span class="keyword">let</span> fn = middleware[i]</div><div class="line">      <span class="keyword">if</span> (i === middleware.length) fn = next</div><div class="line">      <span class="keyword">if</span> (!fn) <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve()</div><div class="line">      <span class="keyword">try</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(fn(context, <span class="function"><span class="keyword">function</span> <span class="title">next</span> (<span class="params"></span>) </span>&#123;</div><div class="line">          <span class="keyword">return</span> dispatch(i + <span class="number">1</span>)</div><div class="line">        &#125;))</div><div class="line">      &#125; <span class="keyword">catch</span> (err) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err)</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é¦–å…ˆåˆ¤æ–­äº†ä¼ å…¥å¾—ä¸­é—´ä»¶å‚æ•°æ˜¯å¦ä¸ºæ•°ç»„ï¼Œå¹¶æ£€æŸ¥ä¸”æ•°ç»„çš„å…ƒç´ æ˜¯å¦ä¸ºå‡½æ•°ï¼Œç„¶åè¿”å›äº†ä¸€ä¸ªå°†ä¸­é—´ä»¶ç»„åˆèµ·æ¥çš„å‡½æ•°ã€‚</p>
<p>é‡ç‚¹å…³æ³¨è¿”å›çš„å‡½æ•°ä¸­çš„<code>dispatch(i)</code>å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°†è·å–ç¬¬ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¹¶åœ¨è¿”å›çš„ Promise ä¸­æ‰§è¡Œã€‚å½“ä¸­é—´ä»¶<code>await next()</code>æ—¶æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå³ <code>dispatch(i + 1)</code>ã€‚</p>
<p>æ‰§è¡Œæµç¨‹å¯ä»¥ç®€å•çœ‹ä½œï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">middleware1</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'middleware1 begin'</span>);</div><div class="line">    <span class="keyword">await</span> middleware2();</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'middleware1 end'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">middleware2</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'middleware2 begin'</span>);</div><div class="line">    <span class="keyword">await</span> middleware3();</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'middleware2 end'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">middleware3</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'middleware3 begin'</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'middleware3 end'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">middleware1();</div><div class="line"><span class="comment">// æ‰§è¡Œç»“æœ</span></div><div class="line">middleware1 begin</div><div class="line">middleware2 begin</div><div class="line">middleware3 begin</div><div class="line">middleware3 end</div><div class="line">middleware2 end</div><div class="line">middleware1 end</div></pre></td></tr></table></figure>
<p><code>compose()</code> å‡½æ•°é€šè¿‡ Promise å°†è¿™ä¸ªè¿‡ç¨‹ä¸²è”èµ·æ¥ï¼Œä»è€Œè¿”å›å•ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚</p>
<h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><p>Koa ä¸­çš„ Context æ¨¡å—å°è£…äº† request ä¸ responseï¼Œä»£ç†äº†è¿™ä¸¤ä¸ªå¯¹è±¡çš„æ–¹æ³•ä¸å±æ€§ã€‚</p>
<p>å…¶ä¸­ä½¿ç”¨äº† Tj å†™çš„ <a href="https://github.com/tj/node-delegates" target="_blank" rel="external">node-delegates</a> åº“ï¼Œç”¨äºä»£ç† context.request ä¸ context.response ä¸Šçš„æ–¹æ³•ä¸å±æ€§ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Response delegation.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line">delegate(proto, <span class="string">'response'</span>)</div><div class="line">  .method(<span class="string">'attachment'</span>)</div><div class="line">  .method(<span class="string">'redirect'</span>)</div><div class="line">  .method(<span class="string">'remove'</span>)</div><div class="line">  .method(<span class="string">'vary'</span>)</div><div class="line">  .method(<span class="string">'set'</span>)</div><div class="line">  .method(<span class="string">'append'</span>)</div><div class="line">  .method(<span class="string">'flushHeaders'</span>)</div><div class="line">  .access(<span class="string">'status'</span>)</div><div class="line">  .access(<span class="string">'message'</span>)</div><div class="line">  .access(<span class="string">'body'</span>)</div><div class="line">  .access(<span class="string">'length'</span>)</div><div class="line">  .access(<span class="string">'type'</span>)</div><div class="line">  .access(<span class="string">'lastModified'</span>)</div><div class="line">  .access(<span class="string">'etag'</span>)</div><div class="line">  .getter(<span class="string">'headerSent'</span>)</div><div class="line">  .getter(<span class="string">'writable'</span>);</div><div class="line">  <span class="comment">// ...</span></div></pre></td></tr></table></figure>
<p>context é™¤äº†ä»£ç†è¿™ä¸¤ä¸ªæ¨¡å—ä¹‹å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€ä¸ªè¯·æ±‚å¼‚å¸¸æ—¶çš„é”™è¯¯å¤„ç†å‡½æ•°ã€‚</p>
<p>åœ¨ application.js çš„ <code>callback()</code>ä½¿ç”¨åˆ°è¿™ä¸ªå‡½æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> onerror = <span class="function"><span class="params">err</span> =&gt;</span> ctx.onerror(err);</div><div class="line"><span class="keyword">const</span> handleResponse = <span class="function"><span class="params">()</span> =&gt;</span> respond(ctx);</div><div class="line">onFinished(res, onerror);</div><div class="line"><span class="keyword">return</span> fn(ctx).then(handleResponse).catch(onerror);</div></pre></td></tr></table></figure>
<h3 id="Context-onerror"><a href="#Context-onerror" class="headerlink" title="Context#onerror"></a>Context#onerror</h3><p><code>context.onerror(err)</code>é¦–å…ˆå¯¹ä¼ å…¥çš„ err å˜é‡è¿›è¡Œåˆ¤æ–­ï¼Œå½“ err ä¸ºç©ºæ—¶é€€å‡ºè¯¥å‡½æ•°ï¼Œæˆ–è€…å½“ err ä¸ä¸ºç©ºä¸”ä¸ä¸º Error ç±»å‹æ—¶æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="literal">null</span> == err) <span class="keyword">return</span>;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (!(err <span class="keyword">instanceof</span> <span class="built_in">Error</span>)) err = <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`non-error thrown: <span class="subst">$&#123;err&#125;</span>`</span>);</div></pre></td></tr></table></figure>
<p>æ¥ç€è§¦å‘ app è‡ªèº«çš„ error äº‹ä»¶ï¼Œå°†é”™è¯¯æŠ›ç»™ appã€‚</p>
<p>åœ¨æ­¤ä¹‹å‰ï¼Œè®¾ç½® <code>headerSent</code>å˜é‡è¡¨ç¤ºå“åº”å¤´æ˜¯å¦å‘é€ï¼Œè‹¥å“åº”å¤´ä»¥å‘é€ï¼Œæˆ–è€…ä¸å¯å†™ï¼ˆå³æ— æ³•åœ¨å“åº”ä¸­æ·»åŠ é”™è¯¯ä¿¡æ¯ç­‰ï¼‰ï¼Œåˆ™é€€å‡ºè¯¥å‡½æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> headerSent = <span class="literal">false</span>;</div><div class="line"><span class="keyword">if</span> (<span class="keyword">this</span>.headerSent || !<span class="keyword">this</span>.writable) &#123;</div><div class="line">  headerSent = err.headerSent = <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// delegate</span></div><div class="line"><span class="keyword">this</span>.app.emit(<span class="string">'error'</span>, err, <span class="keyword">this</span>);</div><div class="line"></div><div class="line"><span class="comment">// nothing we can do here other</span></div><div class="line"><span class="comment">// than delegate to the app-level</span></div><div class="line"><span class="comment">// handler and log.</span></div><div class="line"><span class="keyword">if</span> (headerSent) &#123;</div><div class="line">   <span class="keyword">return</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å› ä¸ºå‘ç”Ÿäº†é”™è¯¯ï¼Œæ‰€ä»¥å¿…é¡»å°†ä¹‹å‰çš„ä¸­é—´è®¾ç½®çš„å“åº”å¤´ä¿¡æ¯æ¸…ç©ºã€‚</p>
<p>è¿™é‡Œä½¿ç”¨äº† Node æä¾›çš„ <a href="https://nodejs.org/api/http.html#http_class_http_serverresponse" target="_blank" rel="external">http.ServerResponse</a> ç±»ä¸Šçš„ <code>getHeaderNames()</code> ä¸ <code>removeHeader()</code> æ–¹æ³•ã€‚ä½†<code>getHeaderNames()</code></p>
<p>è¿™ä¸ªå‡½æ•°æ˜¯åœ¨ Node.js 7.7 æ—¶åŠ å…¥çš„ï¼Œæ‰€ä»¥å½“æ²¡æœ‰æä¾›è¯¥æ–¹æ³•æ—¶éœ€è¦ä½¿ç”¨ <code>_header</code>æ¥æ¸…ç©ºå“åº”å¤´ã€‚è¯¦æƒ…å¯è§: <a href="https://github.com/nodejs/node/pull/10805" target="_blank" rel="external">Node.js #10805ã€‚</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// first unset all headers</span></div><div class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> res.getHeaderNames === <span class="string">'function'</span>) &#123;</div><div class="line">  res.getHeaderNames().forEach(<span class="function"><span class="params">name</span> =&gt;</span> res.removeHeader(name));</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  res._headers = &#123;&#125;; <span class="comment">// Node &lt; 7.7</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ¸…ç©ºä¹‹å‰çš„ä¸­é—´ä»¶è®¾ç½®çš„å“åº”å¤´ä¹‹åï¼Œå°†å“åº”å¤´è®¾ç½®ä¸º <code>err.headers</code>ï¼Œå¹¶è®¾ç½® Context-Type ä¸çŠ¶æ€ç ã€‚</p>
<p>å½“é”™è¯¯ç ä¸º ENOENT æ—¶ï¼Œæ„å‘³ç€æ‰¾ä¸åˆ°è¯¥èµ„æºï¼Œå°†çŠ¶æ€ç è®¾ç½®ä¸º 404ï¼›å½“æ²¡æœ‰çŠ¶æ€ç æˆ–çŠ¶ä½“å•Šç é”™è¯¯æ—¶é»˜è®¤è®¾ç½®ä¸º 500ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// then set those specified</span></div><div class="line"><span class="keyword">this</span>.set(err.headers);</div><div class="line"></div><div class="line"><span class="comment">// force text/plain</span></div><div class="line"><span class="keyword">this</span>.type = <span class="string">'text'</span>;</div><div class="line"></div><div class="line"><span class="comment">// ENOENT support</span></div><div class="line"><span class="keyword">if</span> (<span class="string">'ENOENT'</span> == err.code) err.status = <span class="number">404</span>;</div><div class="line"></div><div class="line"><span class="comment">// default to 500</span></div><div class="line"><span class="keyword">if</span> (<span class="string">'number'</span> != <span class="keyword">typeof</span> err.status || !statuses[err.status]) err.status = <span class="number">500</span>;</div></pre></td></tr></table></figure>
<p>æœ€åå½“æŠ›å‡ºçš„é”™è¯¯ä¸ºè‡ªå®šä¹‰é”™è¯¯æ—¶ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯ã€‚</p>
<p>Koa ä½¿ç”¨ <a href="https://github.com/jshttp/http-errors" target="_blank" rel="external">http-errors</a> åˆ›å»ºé”™è¯¯å¯¹è±¡ï¼Œ<code>expose</code> å±æ€§è¡¨ç¤ºæ˜¯å¦åƒå®¢æˆ·ç«¯æš´éœ²é”™è¯¯ä¿¡æ¯ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> code = statuses[err.status];</div><div class="line"><span class="keyword">const</span> msg = err.expose ? err.message : code;</div><div class="line"><span class="keyword">this</span>.status = err.status;</div><div class="line"><span class="keyword">this</span>.length = Buffer.byteLength(msg);</div><div class="line"><span class="keyword">this</span>.res.end(msg);</div></pre></td></tr></table></figure>
<h2 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h2><p>Request æ¨¡å—å°è£…äº†è¯·æ±‚ç›¸å…³çš„å±æ€§ä»¥åŠæ–¹æ³•ã€‚é€šè¿‡ application ä¸­çš„ <code>createContext()</code> æ–¹æ³•ï¼Œä»£ç†å¯¹åº”çš„ request å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> request = context.request = <span class="built_in">Object</span>.create(<span class="keyword">this</span>.request);</div><div class="line"><span class="comment">// ...</span></div><div class="line">context.req = request.req = response.req = req;</div><div class="line"><span class="comment">// ...</span></div><div class="line">request.response = response;</div></pre></td></tr></table></figure>
<p><code>request.req</code>ä¸ºåŸç”Ÿçš„è¯·æ±‚å¯¹è±¡ï¼Œåœ¨ Request æ¨¡å—ä¸­å±æ€§çš„è·å–éƒ½æ˜¯é€šè¿‡ <code>ths.req</code> æ¥è·å–çš„ï¼ˆå³ <code>request.req</code>ï¼‰ã€‚</p>
<h2 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h2><p>Response æ¨¡å—å°è£…äº†å“åº”ç›¸å…³çš„å±æ€§ä»¥åŠæ–¹æ³•ã€‚ä¸ request ç›¸åŒï¼Œé€šè¿‡<code>createContext()</code> æ–¹æ³•ä»£ç†å¯¹åº”çš„ response å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> response = context.response = <span class="built_in">Object</span>.create(<span class="keyword">this</span>.response);</div><div class="line"><span class="comment">// ...</span></div><div class="line">context.res = request.res = response.res = res;</div><div class="line"><span class="comment">// ...</span></div><div class="line">response.request = request;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;æºç ç»“æ„&quot;&gt;&lt;a href=&quot;#æºç ç»“æ„&quot; class=&quot;headerlink&quot; title=&quot;æºç ç»“æ„&quot;&gt;&lt;/a&gt;æºç ç»“æ„&lt;/h2&gt;&lt;p&gt;Koa çš„æºç ä¸­ä¸»è¦ä¸º &lt;code&gt;lib&lt;/code&gt; ç›®å½•ä¸‹çš„ &lt;code&gt;application.js&lt;/code&gt;ã€&lt;code&gt;context.js&lt;/code&gt;ã€&lt;code&gt;request.js&lt;/code&gt; ä¸ &lt;code&gt;response.js&lt;/code&gt; æ–‡ä»¶&lt;/p&gt;
    
    </summary>
    
      <category term="æ€è€ƒæ€»ç»“" scheme="http://www.ahonn.me/categories/thinking/"/>
    
    
      <category term="Koa" scheme="http://www.ahonn.me/tags/Koa/"/>
    
      <category term="Node.js" scheme="http://www.ahonn.me/tags/Node-js/"/>
    
  </entry>
  
  <entry>
    <title>è½¬æŠ• Neovim</title>
    <link href="http://www.ahonn.me/2017/03/27/use-neovim/"/>
    <id>http://www.ahonn.me/2017/03/27/use-neovim/</id>
    <published>2017-03-27T03:10:06.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¾ˆä¹…ä¹‹å‰å°±å¬è¯´è¿‡ Neovimï¼Œä½†ä¸€ç›´æ²¡æœ‰æ€ä¹ˆäº†è§£è¿‡ã€‚æ˜¨å¤©ä¸‹åˆæŠ˜è…¾äº†ä¸€ä¸‹ï¼Œå½»åº•è½¬æŠ• Neovim äº†ã€‚</p>
<p>è™½ç„¶è¯´è¿™ä¸¤è´§çš„å·®åˆ«ç›®å‰è¿˜ä¸æ˜¯å¾ˆå¤§ï¼Œä½†æ˜¯ Neovim å®ç°äº†åµŒå…¥å¼ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼ŒExcited! å„ç§ REPL æ’ä»¶ç»Ÿç»Ÿéƒ½å¯ä»¥å¸è½½äº†ï¼</p>
<a id="more"></a>
<h2 id="è¿ç§»é…ç½®æ–‡ä»¶"><a href="#è¿ç§»é…ç½®æ–‡ä»¶" class="headerlink" title="è¿ç§»é…ç½®æ–‡ä»¶"></a>è¿ç§»é…ç½®æ–‡ä»¶</h2><p>Neovim é…ç½®å®Œå…¨å…¼å®¹åŸæ¥çš„ <code>.vimrc</code>ï¼Œåªéœ€è¦ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir -p <span class="variable">$&#123;XDG_CONFIG_HOME:=$HOME/.config&#125;</span></div><div class="line">ln -s ~/.vim <span class="variable">$XDG_CONFIG_HOME</span>/nvim</div><div class="line">ln -s ~/.vimrc <span class="variable">$XDG_CONFIG_HOME</span>/nvim/init.vim</div></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨-ale-ä»£æ›¿-syntastic"><a href="#ä½¿ç”¨-ale-ä»£æ›¿-syntastic" class="headerlink" title="ä½¿ç”¨ ale ä»£æ›¿ syntastic"></a>ä½¿ç”¨ ale ä»£æ›¿ syntastic</h2><p>è€æ—©å°±è§‰å¾— <code>syntastic</code> åŒæ­¥æ£€æŸ¥ä»£ç å¥½éš¾ç”¨ï¼Œè¿™ä¸‹æ¢æˆ <code>ale</code> èˆ’æœå¤šäº†ã€‚æœ‰ä¹‹å‰ä½¿ç”¨ atom æ—¶è‡ªå¸¦çš„ä»£ç æ£€æŸ¥çš„æ„Ÿè§‰ã€‚</p>
<p>(Vim 8 å¥½åƒä¹Ÿå·²ç»æä¾›äº†å¼‚æ­¥ APIï¼Œä½†æ˜¯æˆ‘ç­‰åˆ°æ¢æˆ Neovim æ‰çŸ¥é“..)</p>
<h2 id="æŠŠ-Leader-æ”¹æˆç©ºæ ¼"><a href="#æŠŠ-Leader-æ”¹æˆç©ºæ ¼" class="headerlink" title="æŠŠ Leader æ”¹æˆç©ºæ ¼"></a>æŠŠ Leader æ”¹æˆç©ºæ ¼</h2><p>å…¶å®æ˜¯çœ‹äº† <a href="https://zhuanlan.zhihu.com/p/25905625" target="_blank" rel="external">Vim é«˜æ•ˆç‡é…ç½®å¯¼è®º</a> è¿™ç¯‡æ–‡ç« ä¹‹åè¯•ç€æ”¹çš„ï¼Œæ”¹å®Œå‘ç°ç©ºæ ¼æ¯”èµ·åŸå…ˆçš„ <code>,</code> å¥½ç”¨å¤šäº†ã€‚è®©å¤§æ‹‡æŒ‡åŠ¨äº†èµ·æ¥ã€‚</p>
<p>ç„¶ååˆ‡æ¢ buffter çš„å¿«æ·é”®å°±æ˜ å°„æˆäº† <code>&lt;Space&gt; + n/m</code>ï¼Œç®€ç›´ä¸è¦å¤ªé¡ºæ‰‹ã€‚</p>
<h2 id="ä½¿ç”¨-Spacegray-ä¸»é¢˜"><a href="#ä½¿ç”¨-Spacegray-ä¸»é¢˜" class="headerlink" title="ä½¿ç”¨ Spacegray ä¸»é¢˜"></a>ä½¿ç”¨ Spacegray ä¸»é¢˜</h2><p>ä¹‹å‰ä½¿ç”¨çš„ <code>molokai</code> çœ‹ä¹…äº†æœ‰ç‚¹è§†è§‰ç–²åŠ³ï¼Œå‘ç°ä¹‹å‰åœ¨ç”¨ <code>sublime text</code> æ—¶ä½¿ç”¨çš„ <code>Spacegray</code> ä¹Ÿæœ‰ Vim ç‰ˆæœ¬ï¼Œæœæ–­æ¢ä¹‹ã€‚ï¼ˆæŠ˜è…¾é«˜äº®ä¸»é¢˜æ˜¯æ°¸æ’çš„.. ï¼‰</p>
<h2 id="ä¼˜åŒ–éš¾ç”¨çš„ç¼©è¿›è°ƒæ•´"><a href="#ä¼˜åŒ–éš¾ç”¨çš„ç¼©è¿›è°ƒæ•´" class="headerlink" title="ä¼˜åŒ–éš¾ç”¨çš„ç¼©è¿›è°ƒæ•´"></a>ä¼˜åŒ–éš¾ç”¨çš„ç¼©è¿›è°ƒæ•´</h2><p>åœ¨ Visual æ¨¡å¼ä¸‹è°ƒæ•´ç¼©è¿›å¾ˆä¸å¥½ç”¨ï¼Œ<code>v&gt;</code> ä¹‹ååˆå¾—é‡æ–°é€‰ä¸­ï¼Œè™½ç„¶è¯´å¯ä»¥ <code>v3&gt;</code> ä¹‹ç±»çš„ï¼Œä½†æ˜¯éœ€è¦å»è®¡ç®—å¤šå°‘ä¸ªç¼©è¿›ï¼Œçœ‹èµ·æ¥å¹¶ä¸æ˜¯å¾ˆæ˜æ˜¾ã€‚</p>
<p>é‚ï¼Œæ·»åŠ äº†ä¸‹é¢è¿™ä¸¤ä¸ª mappingï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">vnoremap &lt; &lt;v</div><div class="line">vnoremap &gt; &gt;v</div></pre></td></tr></table></figure>
<p>è¿™æ ·æ˜ å°„ä¹‹åæˆ‘å°±å¯ä»¥ <code>v&gt;&gt;&gt;</code> å»ç¼©è¿›äº†ï¼Œå¥½ç”¨åˆ°ä¸è¡Œï¼</p>
<h2 id="Vim-ä½¿ç”¨æ€»ç»“"><a href="#Vim-ä½¿ç”¨æ€»ç»“" class="headerlink" title="Vim ä½¿ç”¨æ€»ç»“"></a>Vim ä½¿ç”¨æ€»ç»“</h2><p>ä½¿ç”¨ Vim ä¹Ÿå·®ä¸å¤šä¸€ä¸ªæ¥æœˆäº†ï¼Œè¶Šæ¥è¶Šå‘ç° Vim çš„ä¾¿åˆ©ä¹‹å¤„ï¼Œè™½ç„¶è¯´æŠ˜è…¾é…ç½®æ’ä»¶èŠ±çš„æ—¶é—´ä¼šä¹…ä¸€ç‚¹ã€‚ä½†æ˜¯æŠ˜è…¾å®Œä¹‹åæ•ˆç‡æé«˜è¿˜æ˜¯è›®å¤šçš„ï¼Œä»¥è‡³äºç°åœ¨åœ¨åˆ«çš„ç¼–è¾‘å™¨é‡Œä¸‹æ„è¯†çš„ç”¨ Vim æ¨¡å¼ï¼Œå‘ç°æ²¡æœ‰ä¹‹åç”¨æ–¹å‘é”®æˆ–è€…é¼ æ ‡å»ç§»åŠ¨éƒ½è§‰å¾—è¶…çº§æ…¢ã€‚</p>
<p>å¼€å§‹ç†è§£ Vim å­¦ä¹ è·¯çº¿é‚£å¼ å›¾è¡¨çš„æ„æ€äº†ï½</p>
<blockquote>
<p>æˆ‘çš„ Vim é…ç½®ï¼š<a href="https://github.com/ahonn/vimrc" target="_blank" rel="external">vimrc</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¾ˆä¹…ä¹‹å‰å°±å¬è¯´è¿‡ Neovimï¼Œä½†ä¸€ç›´æ²¡æœ‰æ€ä¹ˆäº†è§£è¿‡ã€‚æ˜¨å¤©ä¸‹åˆæŠ˜è…¾äº†ä¸€ä¸‹ï¼Œå½»åº•è½¬æŠ• Neovim äº†ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶è¯´è¿™ä¸¤è´§çš„å·®åˆ«ç›®å‰è¿˜ä¸æ˜¯å¾ˆå¤§ï¼Œä½†æ˜¯ Neovim å®ç°äº†åµŒå…¥å¼ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼ŒExcited! å„ç§ REPL æ’ä»¶ç»Ÿç»Ÿéƒ½å¯ä»¥å¸è½½äº†ï¼&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ˜è…¾å·¥å…·" scheme="http://www.ahonn.me/categories/tool/"/>
    
    
      <category term="Vim" scheme="http://www.ahonn.me/tags/Vim/"/>
    
  </entry>
  
  <entry>
    <title>é˜¿é‡Œå·´å·´æš‘å‡å®ä¹ é¢è¯•æ€»ç»“</title>
    <link href="http://www.ahonn.me/2017/03/16/alibaba-summer-internship-interview-summary/"/>
    <id>http://www.ahonn.me/2017/03/16/alibaba-summer-internship-interview-summary/</id>
    <published>2017-03-16T07:15:24.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>2æœˆæœ«çš„æ—¶å€™ï¼Œé€šè¿‡ <a href="https://simplyy.space/" target="_blank" rel="external">simplyY</a> å†…æ¨äº†é˜¿é‡Œå·´å·´æš‘æœŸå®ä¹ çš„å‰ç«¯å¼€å‘å²—ï¼Œåœ¨æ­¤è¡¨ç¤ºæ„Ÿè°¢ã€‚<br>æ¥ç€3æœˆ1å·æ”¶åˆ°äº†å†…æ¨çš„é€šçŸ¥é‚®ä»¶ï¼Œå®Œå–„ä¿¡æ¯åå¾ˆå¿«å°±æ¥åˆ°äº†ä¸€é¢çš„ç”µè¯ï¼ˆ3æœˆ3å·ï¼‰ã€‚</p>
<h2 id="ä¸€é¢"><a href="#ä¸€é¢" class="headerlink" title="ä¸€é¢"></a>ä¸€é¢</h2><p>é¢è¯•äº†å¤§æ¦‚20åˆ†é’Ÿå·¦å³ï¼Œæ•´ä½“å†…å®¹è¿˜æ˜¯æ¯”è¾ƒååŸºç¡€ã€‚ä¸€å¼€å§‹æ˜¯æ­£å¸¸æµç¨‹çš„è‡ªæˆ‘ä»‹ç»ï¼Œè¯´æ˜¯ä¸‰åˆ†é’Ÿè‡ªæˆ‘ä»‹ç»ï¼Œä½†æ˜¯æˆ‘è¯­é€Ÿæ¯”è¾ƒå¿«çš„ä¸åˆ°ä¸¤åˆ†é’Ÿçš„ä»‹ç»å®Œäº†ã€‚(åˆšå¥½æ˜¯ä¸´è¿‘ä¸­åˆï¼ŒåŸæœ¬æ‰“ç®—åƒé¥­çš„ï¼Œè¦æ˜¯å»åƒé¥­çš„è¯å°±å¾—åœ¨è·¯ä¸Šé¢äº†â€¦ï¼‰</p>
<h3 id="CSS-å‚ç›´å±…ä¸­"><a href="#CSS-å‚ç›´å±…ä¸­" class="headerlink" title="CSS å‚ç›´å±…ä¸­"></a>CSS å‚ç›´å±…ä¸­</h3><p>è¿™ä¸ªå†™è¿‡ä¸€ç¯‡åšæ–‡ä¸“é—¨æ€»ç»“è¿‡ï¼Œä¸è¿‡é¢è¯•çš„æ—¶å€™è¿˜æ˜¯å¤ªè¿‡ç´§å¼ æ²¡æœ‰ç­”å…¨ã€‚ä¸»è¦æ˜¯ Flexbox å¸ƒå±€çš„å‚ç›´å±…ä¸­æ¯”è¾ƒå®¹æ˜“å¿˜è®°ã€‚</p>
<p>å…·ä½“å°±ä¸å†å•°å—¦äº†ï¼Œè¯¦æƒ…å¯ä»¥æŸ¥çœ‹ï¼š<a href="http://www.ahonn.me/2016/06/29/vertical-center-for-css/">CSS å®ç°å‚ç›´å±…ä¸­</a></p>
<a id="more"></a>
<h3 id="call-ä¸-apply-çš„åŒºåˆ«ï¼Œä»¥åŠæ€§èƒ½å·®åˆ«"><a href="#call-ä¸-apply-çš„åŒºåˆ«ï¼Œä»¥åŠæ€§èƒ½å·®åˆ«" class="headerlink" title="call ä¸ apply çš„åŒºåˆ«ï¼Œä»¥åŠæ€§èƒ½å·®åˆ«"></a>call ä¸ apply çš„åŒºåˆ«ï¼Œä»¥åŠæ€§èƒ½å·®åˆ«</h3><p><code>call</code> ä¸ <code>apply</code> çš„åŒºåˆ«ï¼Œè¿™æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é¢è¯•é¢˜äº†ã€‚<code>call()</code> ä¸ <code>apply()</code> éƒ½æ˜¯ç”¨äºåœ¨æŒ‡å®š this å€¼ä¸å‚æ•°çš„æƒ…å†µä¸‹è°ƒç”¨å‡½æ•°ï¼Œä¸»è¦çš„åŒºåˆ«åœ¨äºé™¤äº†ä¼ å…¥ this å€¼ä¹‹å¤–ï¼Œ<code>apply()</code> æ¥æ”¶ç±»æ•°ç»„æˆ–è€…ç±»æ•°ç»„å¯¹è±¡æ¥ä½œä¸ºè°ƒç”¨çš„å‡½æ•°çš„å‚æ•°ï¼Œè€Œ <code>call()</code> åˆ™æ˜¯éœ€è¦åˆ†åˆ«ä¼ å…¥å‡½æ•°çš„æ¯ä¸€ä¸ªå‚æ•°ï¼ˆé™¤ç¬¬ä¸€ä¸ªå‚æ•°ä¹‹å¤–çš„å…¶ä»–å‚æ•°ï¼‰ã€‚</p>
<blockquote>
<p>call()æ–¹æ³•ä¸apply()æ–¹æ³•çš„ä½œç”¨ç›¸åŒï¼Œå®ƒä»¬çš„åŒºåˆ«ä»…åœ¨äºæ¥æ”¶å‚æ•°çš„æ–¹å¼ä¸åŒã€‚å¯¹äºcall()æ–¹æ³•è€Œè¨€ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯thiså€¼æ²¡æœ‰å˜åŒ–ï¼Œå˜åŒ–çš„æ˜¯å…¶ä½™å‚æ•°éƒ½ç›´æ¥ä¼ é€’ç»™å‡½æ•°ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨ä½¿ç”¨call()æ–¹æ³•æ—¶ï¼Œä¼ é€’ç»™å‡½æ•°çš„å‚æ•°å¿…é¡»é€ä¸ªåˆ—ä¸¾å‡ºæ¥ã€‚â€”â€” ã€JavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€</p>
</blockquote>
<p>åŒºåˆ«çš„è¯åŸºæœ¬ä¸Šåªè¦çœ‹è¿‡ä¹¦æˆ–è€…åˆ·è¿‡é¢è¯•é¢˜éƒ½ä¼šçŸ¥é“ï¼Œä½† <code>call()</code> ä¸ <code>apply()</code> ä¹‹é—´çš„æ€§èƒ½å·®åˆ«å°±ä¸æ˜¯é‚£ä¹ˆå¸¸è§äº†ã€‚<br>æ¯”è¾ƒå¹¸è¿çš„æ˜¯ï¼Œä¹‹å‰åœ¨é˜…è¯» underscore æºç çš„æ—¶å€™æœ‰æ³¨æ„åˆ°è¿™ä¸ªç»†èŠ‚ï¼Œä¸ºæ­¤ä¹Ÿå†™è¿‡å¦å¤–çš„æ–‡ç« ï¼š<a href="http://www.ahonn.me/2016/05/03/starting-from-the-optimizeCb/">ä» optimizeCb è¯´èµ·</a>ã€‚</p>
<p>å®è·µè¯æ˜ï¼Œåœ¨çŸ¥é“è°ƒç”¨å‡½æ•°çš„å‚æ•°æ•°é‡æ—¶ï¼Œä½¿ç”¨ <code>call()</code> çš„æ€§èƒ½ä¼šä¼˜äº <code>apply()</code>ã€‚ä¸»è¦åœ¨å®ç°çš„è¿‡ç¨‹ä¸­ <code>apply()</code> éœ€è¦å®Œæˆé¢å¤–çš„æ“ä½œï¼ˆåˆ¤æ–­ç¬¬äºŒä¸ªå‚æ•°ç±»æ•°ç»„çš„é•¿åº¦ï¼Œetc.ï¼‰ã€‚å…·ä½“ä¸ºä»€ä¹ˆæœ‰è¿™ç§å·®åˆ«ï¼Œå¯ä»¥åœ¨ ECMAScript Language Specification ä¸­æŸ¥çœ‹ <a href="https://www.ecma-international.org/ecma-262/5.1/#sec-15.3.4.3" target="_blank" rel="external">Function.prototype.apply</a> ä¸ <a href="https://www.ecma-international.org/ecma-262/5.1/#sec-15.3.4.4" target="_blank" rel="external">Function.prototype.call</a> çš„å…·ä½“å®ç°å·®å¼‚ã€‚</p>
<p><strong>å‚è€ƒé“¾æ¥</strong></p>
<ul>
<li><a href="http://stackoverflow.com/questions/1986896/what-is-the-difference-between-call-and-apply" target="_blank" rel="external">javascript - What is the difference between call and apply? - Stack Overflow</a></li>
<li><a href="http://stackoverflow.com/questions/23769556/why-is-call-so-much-faster-than-apply" target="_blank" rel="external">javascript - Why is call so much faster than apply? - Stack Overflow</a></li>
<li><a href="https://jsperf.com/call-apply-segu" target="_blank" rel="external">call vs apply Â· jsPerf</a></li>
</ul>
<h3 id="ä»€ä¹ˆæ˜¯é—­åŒ…"><a href="#ä»€ä¹ˆæ˜¯é—­åŒ…" class="headerlink" title="ä»€ä¹ˆæ˜¯é—­åŒ…"></a>ä»€ä¹ˆæ˜¯é—­åŒ…</h3><p>åˆæ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ã€‚æˆ‘çš„ç†è§£æ¯”è¾ƒè‚¤æµ…ï¼Œå°±æ˜¯ A å‡½æ•°è¿”å› B å‡½æ•°ï¼ŒB å‡½æ•°èƒ½å¤Ÿè®¿é—® A å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡ï¼Œä½¿å¾—åœ¨ A å¤–éƒ¨çš„ä½œç”¨åŸŸä¸­èƒ½å¤Ÿä½¿ç”¨ B å‡½æ•°é—´æ¥æ“ä½œ A å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡ï¼Œè¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªé—­åŒ…ã€‚A å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡ä¸è¿”å›çš„ B å‡½æ•°ä¸€åŒå­˜åœ¨ï¼Œä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶æ¸…ç†ï¼ˆå¼•ç”¨è¿˜å­˜åœ¨ï¼‰ã€‚</p>
<blockquote>
<p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œé—­åŒ…ï¼ˆè‹±è¯­ï¼šClosureï¼‰ï¼Œåˆç§°è¯æ³•é—­åŒ…ï¼ˆLexical Closureï¼‰æˆ–å‡½æ•°é—­åŒ…ï¼ˆfunction closuresï¼‰ï¼Œæ˜¯å¼•ç”¨äº†è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚è¿™ä¸ªè¢«å¼•ç”¨çš„è‡ªç”±å˜é‡å°†å’Œè¿™ä¸ªå‡½æ•°ä¸€åŒå­˜åœ¨ï¼Œå³ä½¿å·²ç»ç¦»å¼€äº†åˆ›é€ å®ƒçš„ç¯å¢ƒä¹Ÿä¸ä¾‹å¤–ã€‚â€”â€” ç»´åŸºç™¾ç§‘</p>
</blockquote>
<p>å»ºè®®é˜…è¯» <a href="https://book.douban.com/subject/26351021/" target="_blank" rel="external">ã€ä½ ä¸çŸ¥é“çš„ JavaScriptï¼ˆä¸Šå·ï¼‰ã€</a> ä¸­æœ‰å…³ä½œç”¨åŸŸä¸é—­åŒ…çš„éƒ¨åˆ†ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯å°¾é€’å½’"><a href="#ä»€ä¹ˆæ˜¯å°¾é€’å½’" class="headerlink" title="ä»€ä¹ˆæ˜¯å°¾é€’å½’"></a>ä»€ä¹ˆæ˜¯å°¾é€’å½’</h3><blockquote>
<p>åœ¨è®¡ç®—æœºç§‘å­¦é‡Œï¼Œå°¾è°ƒç”¨æ˜¯æŒ‡ä¸€ä¸ªå‡½æ•°é‡Œçš„æœ€åä¸€ä¸ªåŠ¨ä½œæ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨çš„æƒ…å½¢ï¼šå³è¿™ä¸ªè°ƒç”¨çš„è¿”å›å€¼ç›´æ¥è¢«å½“å‰å‡½æ•°è¿”å›çš„æƒ…å½¢ã€‚è¿™ç§æƒ…å½¢ä¸‹ç§°è¯¥è°ƒç”¨ä½ç½®ä¸ºå°¾ä½ç½®ã€‚è‹¥è¿™ä¸ªå‡½æ•°åœ¨å°¾ä½ç½®è°ƒç”¨æœ¬èº«ï¼ˆæˆ–æ˜¯ä¸€ä¸ªå°¾è°ƒç”¨æœ¬èº«çš„å…¶ä»–å‡½æ•°ç­‰ç­‰ï¼‰ï¼Œåˆ™ç§°è¿™ç§æƒ…å†µä¸ºå°¾é€’å½’ï¼Œæ˜¯é€’å½’çš„ä¸€ç§ç‰¹æ®Šæƒ…å½¢ã€‚â€”â€” ç»´åŸºç™¾ç§‘</p>
</blockquote>
<p>ä¸€èˆ¬é€’å½’å®ç°é˜¶ä¹˜ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fact</span>(<span class="params">n</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (n == <span class="number">0</span> || n == <span class="number">1</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span> n * fact(n - <span class="number">1</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¸€èˆ¬é€’å½’éœ€è¦ä¸­æ ˆä¸Šç»´æŠ¤å‡½æ•°çš„è°ƒç”¨ä¿¡æ¯ç›´åˆ°å‡½æ•°è¿”å›åæ‰é‡Šæ”¾ï¼Œå®¹æ˜“å‘ç”Ÿã€æ ˆæº¢å‡ºã€é”™è¯¯ã€‚ä½†å¯¹äºå°¾é€’å½’æ¥è¯´ï¼Œåªéœ€è¦ç»´æŠ¤ä¸€ä¸ªè°ƒç”¨è®°å½•ã€‚</p>
<p>å°¾é€’å½’å®ç°é˜¶ä¹˜ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fact</span>(<span class="params">n</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> fact-iter(n, <span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fact</span>-<span class="title">iter</span>(<span class="params">n, a</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</div><div class="line">    <span class="keyword">return</span> a;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span> fact-iter(n - <span class="number">1</span>, n * a);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å…³äºé€’å½’ä¸å°¾é€’å½’ï¼Œåœ¨ <a href="https://book.douban.com/subject/1148282/" target="_blank" rel="external">ã€è®¡ç®—æœºç¨‹åºçš„æ„é€ å’Œè§£é‡Šã€</a>ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„è®¨è®ºã€‚</p>
<h3 id="React-çš„è®¾è®¡ç†å¿µ"><a href="#React-çš„è®¾è®¡ç†å¿µ" class="headerlink" title="React çš„è®¾è®¡ç†å¿µ"></a>React çš„è®¾è®¡ç†å¿µ</h3><p>è¿™éƒ¨åˆ†ç­”å¾—ä¸æ˜¯å¾ˆå¥½ï¼Œåªæåˆ°äº†ç»„ä»¶åŒ–ï¼Œå•å‘æ•°æ®æµï¼ŒVirtual DOM ä¹‹ç±»çš„ã€‚</p>
<p>æœ‰å…³ React çš„è®¾è®¡æ€æƒ³å¯ä»¥å‚è€ƒè¿™ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://github.com/react-guide/react-basic" target="_blank" rel="external">React è®¾è®¡æ€æƒ³</a>ã€‚</p>
<h3 id="å‰ç«¯å®‰å…¨ï¼ˆæ”»å‡»æ–¹å¼ä¸å¦‚ä½•é˜²èŒƒï¼‰"><a href="#å‰ç«¯å®‰å…¨ï¼ˆæ”»å‡»æ–¹å¼ä¸å¦‚ä½•é˜²èŒƒï¼‰" class="headerlink" title="å‰ç«¯å®‰å…¨ï¼ˆæ”»å‡»æ–¹å¼ä¸å¦‚ä½•é˜²èŒƒï¼‰"></a>å‰ç«¯å®‰å…¨ï¼ˆæ”»å‡»æ–¹å¼ä¸å¦‚ä½•é˜²èŒƒï¼‰</h3><p>ç¬¬ä¸€ååº”å°±æ˜¯ <code>XSS</code> ä¸ <code>CSRF</code>ï¼Œ<code>XSS</code> å¯ä»¥é€šè¿‡å¯¹è¾“å…¥æ•°æ®è¿›è¡Œè½¬ä¹‰æ¥é˜²èŒƒï¼Œè€Œ <code>CSRF</code> åˆ™é€šè¿‡ä½¿ç”¨ SSL é“¾æ¥è®¿é—®èµ„æºæˆ–è€…è¯·æ±‚ä¸­æ·»åŠ éªŒè¯ç æ¥è¿›è¡Œé˜²èŒƒã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–æˆ‘æ¼æ‰äº†ç½‘ç»œåŠ«æŒï¼Œæ§åˆ¶å°æ³¨å…¥ä»£ç ç­‰æ”»å‡»æ–¹å¼ï¼Œè¿™é‡Œæœ‰ç¯‡æ–‡ç« åšäº†è¯¦ç»†ä»‹ç»ï¼š<a href="https://segmentfault.com/a/1190000006672214" target="_blank" rel="external">èŠä¸€èŠWEBå‰ç«¯å®‰å…¨é‚£äº›äº‹å„¿</a>ã€‚</p>
<h2 id="äºŒé¢"><a href="#äºŒé¢" class="headerlink" title="äºŒé¢"></a>äºŒé¢</h2><p>ç¬¬ä¸€æ¬¡è¿œç¨‹è§†é¢‘é¢è¯•ï¼Œå¥½ç´§å¼ ã€‚</p>
<p>ä¸€å¼€å§‹é—®äº† CSS ä¸­ position å±æ€§çš„ absolute çš„ä½œç”¨ä»¥åŠåº”ç”¨åœºæ™¯ï¼Œè¿™ä¸ªåŸºæœ¬ä¸Šæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚æ¥ç€å«æˆ‘æ‹¿çº¸å†™å†’æ³¡æ’åºï¼ˆæ‰‹å†™ T-Tï¼‰ï¼Œé£å¿«çš„å†™å®Œã€‚<br>ç„¶åè·Ÿä¸€é¢ä¸€æ ·ä¹Ÿé—®äº†å‰ç«¯å®‰å…¨ç›¸å…³çš„é—®é¢˜ï¼Œä¸€ä¸‹å­éƒ½ä¸ç´§å¼ äº†.. æ²¡æœ‰æƒ³è±¡ä¸­çš„éš¾ã€‚</p>
<h3 id="å®ç°-bind-å‡½æ•°"><a href="#å®ç°-bind-å‡½æ•°" class="headerlink" title="å®ç° bind å‡½æ•°"></a>å®ç° bind å‡½æ•°</h3><p>åŒæ ·æ˜¯è®©æˆ‘å†™ä»£ç ï¼ŒåŒæ ·æ˜¯æ‰‹å†™ï¼ˆT-Tï¼‰ã€‚è¿™ä¸ªé—®é¢˜å¯¹æˆ‘æ¥è¯´ä¸ç®—éš¾ï¼Œä¸è¿‡åªæ˜¯å†™äº†ç®€å•çš„å®ç°ï¼Œæ²¡æœ‰è€ƒè™‘å…¶ä»–æƒ…å†µã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Function</span>.prototype.bind = <span class="built_in">Function</span>.prototype.bind || <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span>;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> self.apply(context, <span class="built_in">arguments</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åŸºæœ¬åŸç†å°±æ˜¯ä½¿ç”¨ <code>apply()</code> ä¸é—­åŒ…ï¼Œè¿”å›åŒ…å« <code>apply()</code> çš„é—­åŒ…ä½¿å¾— <code>apply()</code> ç»‘å®šæŒ‡å®šä½œç”¨åŸŸï¼Œä½†å¹¶æœªæ‰§è¡Œã€‚</p>
<h3 id="é˜…è¯»-Underscore-æºç çš„ç»å†"><a href="#é˜…è¯»-Underscore-æºç çš„ç»å†" class="headerlink" title="é˜…è¯» Underscore æºç çš„ç»å†"></a>é˜…è¯» Underscore æºç çš„ç»å†</h3><p>ä¹‹å‰æ‹–æ‹–æ‹‰æ‹‰çš„é˜…è¯»å®Œäº† Underscore çš„æºç ï¼Œå¹¶æäº¤äº†ä¸€ä¸ªå° <a href="https://github.com/jashkenas/underscore/pull/2630" target="_blank" rel="external">Pull Request</a>ã€‚</p>
<p>åœ¨é˜…è¯»çš„è¿‡ç¨‹ä¸­å­¦åˆ°äº†è®¸å¤šçš„ä¸œè¥¿ï¼Œä¾‹å¦‚ä¸Šé¢æåˆ°çš„ call ä¸ apply çš„æ€§èƒ½å·®åˆ«ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¦‚ä½•å»åˆ¤æ–­å˜é‡çš„ç±»å‹ï¼Œä»¥åŠå¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªå˜é‡æ˜¯å¦ç›¸ç­‰ï¼Œç­‰ç­‰ã€‚å¦å¤–ä¹Ÿäº†è§£åˆ°è®¸å¤šé—­åŒ…çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<h3 id="é˜…è¯»å…¶ä»–ç±»åº“çš„æ”¶è·"><a href="#é˜…è¯»å…¶ä»–ç±»åº“çš„æ”¶è·" class="headerlink" title="é˜…è¯»å…¶ä»–ç±»åº“çš„æ”¶è·"></a>é˜…è¯»å…¶ä»–ç±»åº“çš„æ”¶è·</h3><p>é™¤äº† Underscore ä¹‹å¤–è¿˜é˜…è¯»è¿‡ä¸€ç‚¹ Bootstrap å’Œ jQueryï¼Œè¿™ä¸ªåšå®¢ä¸»é¢˜çš„æ ·å¼éƒ¨åˆ†çš„ç»„ç»‡æ–¹å¼å°±æ˜¯å‚è€ƒäº† Bootstrap çš„ç»„ç»‡æ–¹å¼ï¼Œå¦å¤–ä¹Ÿç¨å¾®é˜…è¯»è¿‡ jQueryä¸­ <code>$.ajax</code> ä»¥åŠäº‹ä»¶ç›¸å…³çš„æºç ã€‚</p>
<p>åœ¨é˜…è¯»ä»£ç çš„è¿‡ç¨‹ä¸­çš„æ”¶è·å°±æ˜¯å­¦ä¹ äº†ä¸€äº›ç»„ç»‡ä»£ç çš„æ–¹å¼ï¼Œè¿˜æœ‰å¦‚ä½•å†™æ‰èƒ½æœ‰åˆ©äºæ‹“å±•ï¼Œæ›´åŠ å¥å£®ã€‚å…¶ä¸­ä¹Ÿå­¦åˆ°äº†ä¸€äº›æé«˜æ€§èƒ½çš„æŠ€å·§ï¼Œå‡½æ•°ç¼“å­˜ï¼Œäº‹ä»¶é˜Ÿåˆ—ä¹‹ç±»çš„ã€‚</p>
<h3 id="åšå®¢ä¸»é¢˜çš„å¼€å‘ç»å†"><a href="#åšå®¢ä¸»é¢˜çš„å¼€å‘ç»å†" class="headerlink" title="åšå®¢ä¸»é¢˜çš„å¼€å‘ç»å†"></a>åšå®¢ä¸»é¢˜çš„å¼€å‘ç»å†</h3><p>å…¶å®ä¸€å¼€å§‹å†™ä¸»é¢˜åªæ˜¯æƒ³ç»™è‡ªå·±ç”¨ï¼Œä¹‹åå‘ç°è›®å¤šäººä¹Ÿå–œæ¬¢æˆ‘è¿™ä¸ªä¸»é¢˜çš„ï¼Œå¹¶æ—¶ä¸æ—¶æœ‰äººä¸­ Github ä¸Šæ Issueï¼Œè¿™å¯¹æˆ‘æ˜¯è«å¤§çš„é¼“åŠ±ã€‚è™½ç„¶æˆ‘æ°´å¹³å¹¶ä¸æ˜¯å¾ˆé«˜ï¼Œä½†æ˜¯å†™å‡ºæ¥çš„ä¸œè¥¿æœ‰äººç”¨æ„Ÿè§‰çœŸçš„æ˜¯ç‰¹åˆ«å¼€å¿ƒï¼Œä¹Ÿç‰¹åˆ«æœ‰åŠ¨åŠ›å»æ”¹è¿›ã€‚</p>
<p>ä»å¼€å§‹å»å†™ä¸»é¢˜åˆ°ç°åœ¨å·®ä¸å¤šä¹Ÿä¸€å¹´äº†ï¼Œè¿™ä¸€å¹´ä¸­æˆ‘ä»å‰ç«¯å°ç™½å˜æˆå‰ç«¯å¤§ç™½ã€‚åœ¨ç»´æŠ¤çš„è¿‡ç¨‹ä¸­å­¦ä¹ åˆ°å¾ˆå¤šä¸œè¥¿ï¼Œè™½ç„¶ç›®å‰å†™å¾—ä¹Ÿä¸æ˜¯å¾ˆå¥½ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯ä¼šæ…¢æ…¢æ”¹è¿›ç»§ç»­ç»´æŠ¤ä¸‹å»çš„ã€‚</p>
<p>ç»´æŠ¤çš„è¿‡ç¨‹ä¸­çš„æ”¶è·å°±æ˜¯ï¼Œå½“ç«™åœ¨è‡ªå·±çš„è§’åº¦çœ‹é—®é¢˜ä¸åœ¨åˆ«äººçš„è§’åº¦çœ‹å®Œå…¨æ˜¯ä¸ä¸€æ ·çš„ï¼Œæˆ–è®¸æœ‰ä¸ªåŠŸèƒ½æˆ‘å¹¶ä¸éœ€è¦ï¼Œä½†æ˜¯æœ‰äººæäº†ï¼Œæˆ‘å°±å¾—ç«™åœ¨ã€ç”¨æˆ·ã€çš„è§’åº¦å»æ€è€ƒï¼Œå»å®ç°ã€‚ã€ç”¨æˆ·ã€åªå…³å¿ƒèƒ½ä¸èƒ½ç”¨ï¼Œå¥½ä¸å¥½ç”¨ï¼Œè€Œå¹¶ä¸å…³å¿ƒä»£ç å†™å¾—æ€ä¹ˆæ ·ã€‚</p>
<h3 id="å®ä¹ æœŸé—´é‡åˆ°å¾—éš¾é¢˜"><a href="#å®ä¹ æœŸé—´é‡åˆ°å¾—éš¾é¢˜" class="headerlink" title="å®ä¹ æœŸé—´é‡åˆ°å¾—éš¾é¢˜"></a>å®ä¹ æœŸé—´é‡åˆ°å¾—éš¾é¢˜</h3><p>å¯èƒ½æˆ‘åšçš„å·¥ä½œç›¸å¯¹ç®€å•ï¼Œå°±ç®—ä¸ä¼šï¼ŒåŸºæœ¬ä¸Šé æœç´¢å¼•æ“éƒ½èƒ½å¤Ÿè§£å†³ã€‚<strong>æˆ‘è§‰å¾—èƒ½ç”¨ Google è§£å†³çš„é—®é¢˜ä¸ç®—éš¾é¢˜ã€‚</strong>ä»¥æˆ‘ç°åœ¨çš„æ°´å¹³ï¼Œè¿˜è¾¾ä¸åˆ°é‡åˆ°çš„éš¾é¢˜ Google æœç´¢ä¸åˆ°çš„ğŸ˜¹</p>
<h2 id="ä¸‰é¢"><a href="#ä¸‰é¢" class="headerlink" title="ä¸‰é¢"></a>ä¸‰é¢</h2><p>ä¸‰é¢åŸºæœ¬ä¸Šæ²¡æœ‰é—®å¤ªè¿‡å…·ä½“çš„å‰ç«¯ç›¸å…³çš„é—®é¢˜ï¼Œå¤§éƒ¨åˆ†æ˜¯åœ¨èŠèŠçœ‹æ³•ï¼ŒèŠèŠé¡¹ç›®ã€‚</p>
<p>å¼€å§‹è®©æˆ‘ç”¨çº¸ç”»å‡ºåšå®¢çš„è®¾è®¡ï¼Œå…¶å®ä¸»è¦è¿˜æ˜¯ä¸»é¢˜ï¼Œæ²¡ä»€ä¹ˆéš¾åº¦ï¼Œæ¯•ç«Ÿä»£ç éƒ½æ˜¯æˆ‘è‡ªå·±å†™çš„ã€‚</p>
<p>ç„¶åè®©æˆ‘ä»‹ç»ä¸€ä¸‹æˆ‘ç†Ÿæ‚‰çš„ä¸€ä¸ªæ¡†æ¶ï¼Œè¯´çš„ Reactï¼ŒæåŠåˆ°äº† Vitrual DOM å’Œ diff ç®—æ³•ï¼Œè¯´äº†ä¸€ä¸‹ diff ç®—æ³•çš„å¤§æ¦‚ç­–ç•¥ã€‚è¿˜æœ‰è¯´åˆ°ç»„ä»¶åŒ–ï¼Œå•å‘æ•°æ®æµç­‰ç­‰ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘åœ¨äºŒé¢ä¹‹å‰åˆ·äº† ã€æ·±å…¥ React æŠ€æœ¯æ ˆã€è¿™æœ¬ä¹¦ï¼Œç»“åˆä¹‹å‰çš„å®è·µèƒ½å¤Ÿè¯´ä¸ªå¤§æ¦‚ã€‚</p>
<p>ä¸­é—´æœ‰èŠåˆ°å…´è¶£çˆ±å¥½ï¼Œæˆ‘æƒ³äº†æƒ³å¥½åƒåªæœ‰å†™ä»£ç ã€‚å¬æ­Œåº”è¯¥ä¹Ÿç®—ï¼Ÿå†™ä»£ç çš„æ—¶å€™å¿…å®šè¦å¬æ­Œã€‚æˆ‘è®°å¾—å»å¹´å›½åº†æœ‰ä¸€å¤©ä»èµ·åºŠå†™åˆ°æ™šä¸Šç¡è§‰ï¼Œå·®ä¸å¤šå†™äº† 11 ä¸ªå°æ—¶ï¼Œé‚£æ—¶å€™æ­£åœ¨æŠ˜è…¾ React ä¸ Meteorã€‚æˆ‘è‡ªå·±éƒ½è§‰å¾—ä¸å¯æ€è®®ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¯èƒ½æ˜¯è¿æ°”é—®é¢˜ï¼Œæˆ‘è§‰å¾—æˆ‘çš„è¿™å‡ é¢éš¾åº¦éƒ½ä¸é«˜ğŸ˜¹ã€‚å¾—ç›Šäºçœ‹çš„ä¹¦ï¼Œå¥½å¤šçŸ¥è¯†ç‚¹éƒ½æ˜¯ä¹¦ä¸Šæœ‰çš„ã€‚åŸºæœ¬ä¸ŠåŸºç¡€çš„å‰ç«¯é¢è¯•é¢˜éƒ½å¯ä»¥åœ¨çº¢å®ä¹¦ä¸Šæ‰¾åˆ°ï¼ŒçœŸä¸æ„§ä¸ºå‰ç«¯é¢è¯•å®å…¸ã€‚å¦å¤– Github ä¸Šçš„è¿™ä¸ªåšå®¢ä¸»é¢˜ä¹Ÿå¸®äº†å¾ˆå¤§çš„å¿™ï¼Œ300+ star æœç„¶è¿˜æ˜¯æœ‰ç‚¹ç”¨å¤„çš„ï¼ˆè™½ç„¶è¯´ star ä¸èƒ½ä»£è¡¨ä»€ä¹ˆï¼Œè€Œä¸”çš„ç¡®å†™å¾—ä¹Ÿå¾ˆæ°´ï¼Œä½†ä½œç”¨ä¸å¯å¦è®¤ï¼‰ã€‚</p>
<p>æœ€åï¼ŒåŸºç¡€å¾ˆé‡è¦ï¼ŒåŸºç¡€æ‰å®æ˜¯åŸºæœ¬ã€‚ä½†æ˜¯å¦‚æœæƒ³è¦æœ‰çªå‡ºçš„è¡¨ç°è¿˜æ˜¯éœ€è¦æ›´æœ‰æ·±åº¦çš„ç ”ç©¶ã€‚éœ€è¦ç»å¸¸æ€è€ƒæ€»ç»“ï¼Œä¸ä»…ä»…æ˜¯æµ®äºè¡¨é¢ï¼Œæ›´è¦æ·±å…¥åŸç†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;2æœˆæœ«çš„æ—¶å€™ï¼Œé€šè¿‡ &lt;a href=&quot;https://simplyy.space/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;simplyY&lt;/a&gt; å†…æ¨äº†é˜¿é‡Œå·´å·´æš‘æœŸå®ä¹ çš„å‰ç«¯å¼€å‘å²—ï¼Œåœ¨æ­¤è¡¨ç¤ºæ„Ÿè°¢ã€‚&lt;br&gt;æ¥ç€3æœˆ1å·æ”¶åˆ°äº†å†…æ¨çš„é€šçŸ¥é‚®ä»¶ï¼Œå®Œå–„ä¿¡æ¯åå¾ˆå¿«å°±æ¥åˆ°äº†ä¸€é¢çš„ç”µè¯ï¼ˆ3æœˆ3å·ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸€é¢&quot;&gt;&lt;a href=&quot;#ä¸€é¢&quot; class=&quot;headerlink&quot; title=&quot;ä¸€é¢&quot;&gt;&lt;/a&gt;ä¸€é¢&lt;/h2&gt;&lt;p&gt;é¢è¯•äº†å¤§æ¦‚20åˆ†é’Ÿå·¦å³ï¼Œæ•´ä½“å†…å®¹è¿˜æ˜¯æ¯”è¾ƒååŸºç¡€ã€‚ä¸€å¼€å§‹æ˜¯æ­£å¸¸æµç¨‹çš„è‡ªæˆ‘ä»‹ç»ï¼Œè¯´æ˜¯ä¸‰åˆ†é’Ÿè‡ªæˆ‘ä»‹ç»ï¼Œä½†æ˜¯æˆ‘è¯­é€Ÿæ¯”è¾ƒå¿«çš„ä¸åˆ°ä¸¤åˆ†é’Ÿçš„ä»‹ç»å®Œäº†ã€‚(åˆšå¥½æ˜¯ä¸´è¿‘ä¸­åˆï¼ŒåŸæœ¬æ‰“ç®—åƒé¥­çš„ï¼Œè¦æ˜¯å»åƒé¥­çš„è¯å°±å¾—åœ¨è·¯ä¸Šé¢äº†â€¦ï¼‰&lt;/p&gt;
&lt;h3 id=&quot;CSS-å‚ç›´å±…ä¸­&quot;&gt;&lt;a href=&quot;#CSS-å‚ç›´å±…ä¸­&quot; class=&quot;headerlink&quot; title=&quot;CSS å‚ç›´å±…ä¸­&quot;&gt;&lt;/a&gt;CSS å‚ç›´å±…ä¸­&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªå†™è¿‡ä¸€ç¯‡åšæ–‡ä¸“é—¨æ€»ç»“è¿‡ï¼Œä¸è¿‡é¢è¯•çš„æ—¶å€™è¿˜æ˜¯å¤ªè¿‡ç´§å¼ æ²¡æœ‰ç­”å…¨ã€‚ä¸»è¦æ˜¯ Flexbox å¸ƒå±€çš„å‚ç›´å±…ä¸­æ¯”è¾ƒå®¹æ˜“å¿˜è®°ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“å°±ä¸å†å•°å—¦äº†ï¼Œè¯¦æƒ…å¯ä»¥æŸ¥çœ‹ï¼š&lt;a href=&quot;http://www.ahonn.me/2016/06/29/vertical-center-for-css/&quot;&gt;CSS å®ç°å‚ç›´å±…ä¸­&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æ€è€ƒæ€»ç»“" scheme="http://www.ahonn.me/categories/thinking/"/>
    
    
      <category term="å‰ç«¯" scheme="http://www.ahonn.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="é¢è¯•" scheme="http://www.ahonn.me/tags/%E9%9D%A2%E8%AF%95/"/>
    
      <category term="å®ä¹ " scheme="http://www.ahonn.me/tags/%E5%AE%9E%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>ç­”å‰ç«¯é¢è¯•é¢˜</title>
    <link href="http://www.ahonn.me/2017/03/11/answer-front-end-questions/"/>
    <id>http://www.ahonn.me/2017/03/11/answer-front-end-questions/</id>
    <published>2017-03-11T09:13:46.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>ç­” <a href="https://zhuanlan.zhihu.com/p/25701897" target="_blank" rel="external">ä¸­çº§å‰ç«¯å·¥ç¨‹å¸ˆé¢è¯• æˆ‘æƒ³é—®çš„å‡ ä¸ªé—®é¢˜</a> ä¸­çš„å‡ ä¸ªé—®é¢˜ï¼Œæ„Ÿè°¢ <a href="https://www.zhihu.com/people/simplyy/answers" target="_blank" rel="external">@SimplyY
</a></p>
</blockquote>
<h2 id="æˆ‘æœ€å¤§çš„ä¼˜åŠ¿ä»¥åŠä¸ºä»€ä¹ˆé€‰æ‹©å‰ç«¯"><a href="#æˆ‘æœ€å¤§çš„ä¼˜åŠ¿ä»¥åŠä¸ºä»€ä¹ˆé€‰æ‹©å‰ç«¯" class="headerlink" title="æˆ‘æœ€å¤§çš„ä¼˜åŠ¿ä»¥åŠä¸ºä»€ä¹ˆé€‰æ‹©å‰ç«¯"></a>æˆ‘æœ€å¤§çš„ä¼˜åŠ¿ä»¥åŠä¸ºä»€ä¹ˆé€‰æ‹©å‰ç«¯</h2><ul>
<li>æˆ‘æœ€å¤§çš„ä¼˜åŠ¿æ˜¯è‡ªå­¦èƒ½åŠ›ä¸ç†è§£èƒ½åŠ›å¼ºï¼Œå¹¶ä¸”ä¸ç»™è‡ªå·±å¥—ä¸Šã€æˆ‘æ˜¯å‰ç«¯ç¨‹åºå‘˜ã€çš„æ·é”ï¼Œå¯¹äºæ‰€æœ‰æŠ€æœ¯ä¿æŒå¥½å¥‡å¿ƒï¼Œä¸ç•æƒ§èˆ’é€‚åœˆå¤–çš„äº‹ç‰©å¹¶æ•¢äºå°è¯•ã€‚</li>
<li>é€‰æ‹©å‰ç«¯çš„ç†ç”±æ˜¯ï¼Œå‰ç«¯èƒ½å¤Ÿè¿…é€Ÿçš„æŠŠæƒ³æ³•å®ç°ï¼Œå¯é€‰æŠ€æœ¯æ ˆå¹¿æ³›ï¼ˆWebï¼Œç§»åŠ¨ç«¯ï¼Œæ¡Œé¢å®¢æˆ·ç«¯ï¼‰ï¼Œä¹Ÿæ˜¯å‰ç«¯çš„ä¼˜ç‚¹ä¹‹ä¸€ã€‚</li>
</ul>
<a id="more"></a>
<h2 id="å‰åç«¯åˆ†ç¦»çš„åŸç†åŠæ„ä¹‰"><a href="#å‰åç«¯åˆ†ç¦»çš„åŸç†åŠæ„ä¹‰" class="headerlink" title="å‰åç«¯åˆ†ç¦»çš„åŸç†åŠæ„ä¹‰"></a>å‰åç«¯åˆ†ç¦»çš„åŸç†åŠæ„ä¹‰</h2><p>åç«¯æä¾›æ•°æ®æ¥å£ï¼Œå‰ç«¯è·å–æ•°æ®å¹¶å‘ˆç°ã€‚</p>
<h3 id="å‰åç«¯åˆ†ç¦»çš„æ„ä¹‰"><a href="#å‰åç«¯åˆ†ç¦»çš„æ„ä¹‰" class="headerlink" title="å‰åç«¯åˆ†ç¦»çš„æ„ä¹‰"></a>å‰åç«¯åˆ†ç¦»çš„æ„ä¹‰</h3><ul>
<li>åç«¯æ— é¡»å¥—æ¨¡ç‰ˆï¼Œå‰åç«¯è§£è€¦ã€‚</li>
<li>æé«˜å·¥ä½œæ•ˆç‡ï¼Œå‰åç«¯åŒæ­¥å¼€å‘ã€‚</li>
</ul>
<h2 id="å¯¹-react-çš„ç†è§£ä¸ç›¸å¯¹äº-jQuery-å¼€å‘çš„ä¼˜åŠ¿"><a href="#å¯¹-react-çš„ç†è§£ä¸ç›¸å¯¹äº-jQuery-å¼€å‘çš„ä¼˜åŠ¿" class="headerlink" title="å¯¹ react çš„ç†è§£ä¸ç›¸å¯¹äº jQuery å¼€å‘çš„ä¼˜åŠ¿"></a>å¯¹ react çš„ç†è§£ä¸ç›¸å¯¹äº jQuery å¼€å‘çš„ä¼˜åŠ¿</h2><h3 id="å¯¹-React-çš„ç†è§£"><a href="#å¯¹-React-çš„ç†è§£" class="headerlink" title="å¯¹ React çš„ç†è§£"></a>å¯¹ React çš„ç†è§£</h3><ul>
<li>é€šè¿‡ Virtual DOM å’Œ Diff ç®—æ³•éš”ç¦» DOM æ“ä½œã€‚</li>
<li>é‡‡ç”¨å•å‘æ•°æ®æµï¼Œæ•°æ®æµåŠ¨æ–¹å‘å•ä¸€ï¼Œå¯è·Ÿè¸ªã€‚</li>
<li>ç»„ä»¶åŒ–ï¼ŒJSX è‡ªå®šä¹‰æ ‡ç­¾ï¼Œä¾¿äºæŠ½è±¡åŒ–ã€‚</li>
</ul>
<h3 id="å¯¹æ¯”-jQuery-å¼€å‘çš„ä¼˜åŠ¿"><a href="#å¯¹æ¯”-jQuery-å¼€å‘çš„ä¼˜åŠ¿" class="headerlink" title="å¯¹æ¯” jQuery å¼€å‘çš„ä¼˜åŠ¿"></a>å¯¹æ¯” jQuery å¼€å‘çš„ä¼˜åŠ¿</h3><ul>
<li>æ— éœ€ç›´æ¥æ“ä½œ DOMï¼Œäº‹ä»¶é€šè¿‡æ”¹å˜ state é—´æ¥æ“ä½œ DOMã€‚</li>
</ul>
<p><img src="http://ouv0frko5.bkt.clouddn.com/kpqzw.jpg" alt="React-vs-jQuery.png"></p>
<h2 id="é¡µé¢æ€§èƒ½ä¼˜åŒ–"><a href="#é¡µé¢æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="é¡µé¢æ€§èƒ½ä¼˜åŒ–"></a>é¡µé¢æ€§èƒ½ä¼˜åŒ–</h2><blockquote>
<p><strong>é¡µé¢ç”Ÿæˆè¿‡ç¨‹</strong></p>
<ul>
<li>HTMLä»£ç è½¬åŒ–ä¸ºDOM</li>
<li>CSSä»£ç è½¬åŒ–æˆCSSOM</li>
<li>ç»“åˆDOMå’ŒCSSOMï¼Œç”Ÿæˆä¸€æ£µæ¸²æŸ“æ ‘</li>
<li>ç”Ÿæˆå¸ƒå±€ï¼ˆlayoutï¼‰ï¼Œå³å°†æ‰€æœ‰æ¸²æŸ“æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œå¹³é¢åˆæˆ</li>
<li>å°†å¸ƒå±€ç»˜åˆ¶ï¼ˆpaintï¼‰åœ¨å±å¹•ä¸Š</li>
</ul>
</blockquote>
<ul>
<li>å‡å°‘ HTTP è¯·æ±‚ï¼ˆåˆå¹¶ CSS/JSï¼Œå°äº 10k çš„å›¾ç‰‡ base64ï¼‰</li>
<li>å‡å°‘ DOM æ“ä½œï¼ˆå¯ä½¿ç”¨ DocumentFragmentï¼‰</li>
<li>é¿å…ä¸å¿…è¦çš„é‡ç»˜ä¸é‡æ’ï¼ˆé‡æ’å¿…å®šå¯¼è‡´é‡ç»˜ï¼‰</li>
<li>ä¼˜åŒ– CSS é€‰æ‹©å™¨ï¼ˆä»å³å‘å·¦åŒ¹é…ï¼‰</li>
<li>CSS/JS minifyï¼Œå‡å°‘æ–‡ä»¶ä½“ç§¯</li>
<li>å¼€å¯ Gzip å‹ç¼©</li>
<li>å°† CSS æ”¾åˆ°é¡¶éƒ¨ï¼ŒJavaScript æ”¾åˆ°å°¾éƒ¨ï¼ˆJavaScript ä¼šé˜»å¡é¡µé¢ï¼‰</li>
<li>å‹ç¼©å›¾ç‰‡ä»¥åŠä½¿ç”¨ CSS Sprite</li>
<li>ä½¿ç”¨ CDN åŠ é€Ÿï¼Œé€‚å½“è¿›è¡Œæ–‡ä»¶ç¼“å­˜</li>
<li>åˆç†æ§åˆ¶ cookie å¤§å°ï¼ˆæ¯æ¬¡è¯·æ±‚éƒ½ä¼šåŒ…å« cookieï¼‰</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ç­” &lt;a href=&quot;https://zhuanlan.zhihu.com/p/25701897&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ä¸­çº§å‰ç«¯å·¥ç¨‹å¸ˆé¢è¯• æˆ‘æƒ³é—®çš„å‡ ä¸ªé—®é¢˜&lt;/a&gt; ä¸­çš„å‡ ä¸ªé—®é¢˜ï¼Œæ„Ÿè°¢ &lt;a href=&quot;https://www.zhihu.com/people/simplyy/answers&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;@SimplyY
&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;æˆ‘æœ€å¤§çš„ä¼˜åŠ¿ä»¥åŠä¸ºä»€ä¹ˆé€‰æ‹©å‰ç«¯&quot;&gt;&lt;a href=&quot;#æˆ‘æœ€å¤§çš„ä¼˜åŠ¿ä»¥åŠä¸ºä»€ä¹ˆé€‰æ‹©å‰ç«¯&quot; class=&quot;headerlink&quot; title=&quot;æˆ‘æœ€å¤§çš„ä¼˜åŠ¿ä»¥åŠä¸ºä»€ä¹ˆé€‰æ‹©å‰ç«¯&quot;&gt;&lt;/a&gt;æˆ‘æœ€å¤§çš„ä¼˜åŠ¿ä»¥åŠä¸ºä»€ä¹ˆé€‰æ‹©å‰ç«¯&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;æˆ‘æœ€å¤§çš„ä¼˜åŠ¿æ˜¯è‡ªå­¦èƒ½åŠ›ä¸ç†è§£èƒ½åŠ›å¼ºï¼Œå¹¶ä¸”ä¸ç»™è‡ªå·±å¥—ä¸Šã€æˆ‘æ˜¯å‰ç«¯ç¨‹åºå‘˜ã€çš„æ·é”ï¼Œå¯¹äºæ‰€æœ‰æŠ€æœ¯ä¿æŒå¥½å¥‡å¿ƒï¼Œä¸ç•æƒ§èˆ’é€‚åœˆå¤–çš„äº‹ç‰©å¹¶æ•¢äºå°è¯•ã€‚&lt;/li&gt;
&lt;li&gt;é€‰æ‹©å‰ç«¯çš„ç†ç”±æ˜¯ï¼Œå‰ç«¯èƒ½å¤Ÿè¿…é€Ÿçš„æŠŠæƒ³æ³•å®ç°ï¼Œå¯é€‰æŠ€æœ¯æ ˆå¹¿æ³›ï¼ˆWebï¼Œç§»åŠ¨ç«¯ï¼Œæ¡Œé¢å®¢æˆ·ç«¯ï¼‰ï¼Œä¹Ÿæ˜¯å‰ç«¯çš„ä¼˜ç‚¹ä¹‹ä¸€ã€‚&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="æ€è€ƒæ€»ç»“" scheme="http://www.ahonn.me/categories/thinking/"/>
    
    
      <category term="å‰ç«¯" scheme="http://www.ahonn.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="é¢è¯•" scheme="http://www.ahonn.me/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>XMLHttpRequest å­¦ä¹ ç¬”è®°</title>
    <link href="http://www.ahonn.me/2017/03/02/xmlhttprequest-study-notes/"/>
    <id>http://www.ahonn.me/2017/03/02/xmlhttprequest-study-notes/</id>
    <published>2017-03-02T10:35:39.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>AJAXå³â€œAsynchronous JavaScript and XMLâ€ï¼ˆå¼‚æ­¥çš„JavaScriptä¸XMLæŠ€æœ¯ï¼‰ï¼ŒæŒ‡çš„æ˜¯ä¸€å¥—ç»¼åˆäº†å¤šé¡¹æŠ€æœ¯çš„æµè§ˆå™¨ç«¯ç½‘é¡µå¼€å‘æŠ€æœ¯ã€‚</p>
</blockquote>
<p>Ajax æŠ€æœ¯çš„æ ¸å¿ƒæ˜¯ <code>XMLHttpRequest</code> å¯¹è±¡ï¼Œèµ·åˆ IE é¦–å…ˆå¼•å…¥è¿™ä¸ªç‰¹æ€§ï¼Œåé¢å…¶ä»–æµè§ˆå™¨ä¾›åº”å•†ä¹Ÿæä¾›äº†ç›¸åŒçš„å®ç°ã€‚</p>
<h2 id="XMLHttpRequest-å¯¹è±¡"><a href="#XMLHttpRequest-å¯¹è±¡" class="headerlink" title="XMLHttpRequest å¯¹è±¡"></a>XMLHttpRequest å¯¹è±¡</h2><p>XMLHttpRequest æ˜¯ä¸€ä¸ªAPI, å®ƒä¸ºå®¢æˆ·ç«¯æä¾›äº†åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®çš„åŠŸèƒ½ã€‚å®ƒæä¾›äº†ä¸€ä¸ªé€šè¿‡ URL æ¥è·å–æ•°æ®çš„ç®€å•æ–¹å¼ï¼Œå¹¶ä¸”ä¸ä¼šä½¿æ•´ä¸ªé¡µé¢åˆ·æ–°ã€‚</p>
<a id="more"></a>
<h3 id="ä¸»è¦æ–¹æ³•"><a href="#ä¸»è¦æ–¹æ³•" class="headerlink" title="ä¸»è¦æ–¹æ³•"></a>ä¸»è¦æ–¹æ³•</h3><ul>
<li><p>open() å¯åŠ¨è¯·æ±‚ä»¥å¤‡å‘é€ï¼Œå‚æ•°åŒ…æ‹¬è¯·æ±‚æ–¹å¼ï¼Œè¯·æ±‚åœ°å€ï¼Œæ˜¯å¦å¼‚æ­¥</p>
</li>
<li><p>send() å‘é€è¯·æ±‚ï¼Œå¿…è¦å‚æ•°å¯å‘é€è¯·æ±‚ä¸»ä½“æ•°æ®ï¼Œæ— æ•°æ®æ—¶ä¼ å…¥ null</p>
</li>
<li><p>abort() å‘èµ·å¼‚æ­¥è¯·æ±‚æ—¶ï¼Œç»ˆæ­¢è¯·æ±‚</p>
</li>
<li><p>setRequestHeader() è®¾ç½®è¯·æ±‚å¤´éƒ¨ä¿¡æ¯</p>
</li>
<li><p>getRequestHeader() è·å–è¯·æ±‚å¤´éƒ¨ä¿¡æ¯</p>
</li>
<li><p>getAllRequestHeader() è·å–å…¨éƒ¨è¯·æ±‚å¤´éƒ¨ä¿¡æ¯ï¼Œä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›</p>
</li>
</ul>
<h3 id="ä¸»è¦å±æ€§"><a href="#ä¸»è¦å±æ€§" class="headerlink" title="ä¸»è¦å±æ€§"></a>ä¸»è¦å±æ€§</h3><ul>
<li><p>status å“åº”çš„ HTTP çŠ¶æ€ç </p>
</li>
<li><p>statusText å“åº”çš„ HTTP çŠ¶æ€è¯´æ˜</p>
</li>
<li><p>responseText ä½œä¸ºå“åº”ä¸»ä½“è¿”å›çš„æ–‡æœ¬</p>
</li>
<li><p>responseXML å“åº”æ•°æ®ä¸­çš„ XML DOM æ–‡æ¡£</p>
</li>
<li><p>readyState è¯·æ±‚/å“åº”è¿‡ç¨‹çš„å½“å‰æ´»åŠ¨é˜¶æ®µ</p>
<ul>
<li><p>0 æœªåˆå§‹åŒ–ï¼Œæ²¡æœ‰ä½¿ç”¨ <code>open()</code></p>
</li>
<li><p>1 å¯åŠ¨ï¼Œè°ƒç”¨ <code>open()</code> ä½†æœªè°ƒç”¨ <code>send()</code></p>
</li>
<li><p>2 å‘é€ï¼Œå·²ç»è°ƒç”¨ <code>send()</code>ï¼Œä½†æœªæ¥æ”¶åˆ°å“åº”æ•°æ®</p>
</li>
<li><p>3 æ¥æ”¶ï¼Œæ¥æ”¶åˆ°éƒ¨åˆ†å“åº”æ•°æ®</p>
</li>
<li><p>4 å®Œæˆï¼Œæ¥æ”¶åˆ°å…¨éƒ¨å“åº”æ•°æ®</p>
</li>
</ul>
</li>
</ul>
<h3 id="readystatechange-äº‹ä»¶"><a href="#readystatechange-äº‹ä»¶" class="headerlink" title="readystatechange äº‹ä»¶"></a>readystatechange äº‹ä»¶</h3><p>å½“ readyState å±æ€§å€¼æ”¹å˜æ—¶è§¦å‘ readystatechange äº‹ä»¶ã€‚é€šè¿‡åˆ¤æ–­ readystate å±æ€§çš„å€¼ï¼Œåœ¨å®Œæˆè¯·æ±‚å“åº”æ•´ä¸ªè¿‡ç¨‹ä¹‹åæ‰§è¡ŒæŸäº›æ“ä½œã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;AJAXå³â€œAsynchronous JavaScript and XMLâ€ï¼ˆå¼‚æ­¥çš„JavaScriptä¸XMLæŠ€æœ¯ï¼‰ï¼ŒæŒ‡çš„æ˜¯ä¸€å¥—ç»¼åˆäº†å¤šé¡¹æŠ€æœ¯çš„æµè§ˆå™¨ç«¯ç½‘é¡µå¼€å‘æŠ€æœ¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ajax æŠ€æœ¯çš„æ ¸å¿ƒæ˜¯ &lt;code&gt;XMLHttpRequest&lt;/code&gt; å¯¹è±¡ï¼Œèµ·åˆ IE é¦–å…ˆå¼•å…¥è¿™ä¸ªç‰¹æ€§ï¼Œåé¢å…¶ä»–æµè§ˆå™¨ä¾›åº”å•†ä¹Ÿæä¾›äº†ç›¸åŒçš„å®ç°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;XMLHttpRequest-å¯¹è±¡&quot;&gt;&lt;a href=&quot;#XMLHttpRequest-å¯¹è±¡&quot; class=&quot;headerlink&quot; title=&quot;XMLHttpRequest å¯¹è±¡&quot;&gt;&lt;/a&gt;XMLHttpRequest å¯¹è±¡&lt;/h2&gt;&lt;p&gt;XMLHttpRequest æ˜¯ä¸€ä¸ªAPI, å®ƒä¸ºå®¢æˆ·ç«¯æä¾›äº†åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®çš„åŠŸèƒ½ã€‚å®ƒæä¾›äº†ä¸€ä¸ªé€šè¿‡ URL æ¥è·å–æ•°æ®çš„ç®€å•æ–¹å¼ï¼Œå¹¶ä¸”ä¸ä¼šä½¿æ•´ä¸ªé¡µé¢åˆ·æ–°ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯æ–‡ç« " scheme="http://www.ahonn.me/categories/technology/"/>
    
    
      <category term="å‰ç«¯" scheme="http://www.ahonn.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="JavaScript" scheme="http://www.ahonn.me/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Vim æŠ˜è…¾è®°</title>
    <link href="http://www.ahonn.me/2017/02/19/notes-of-vim/"/>
    <id>http://www.ahonn.me/2017/02/19/notes-of-vim/</id>
    <published>2017-02-19T14:37:54.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ˜¨å¤©åœ¨å¾®ä¿¡è¯»ä¹¦ä¸Šé¢çœ‹åˆ°äº†æ± å»ºå¼ºçš„ã€ŠMacTalk äººç”Ÿå…ƒç¼–ç¨‹ã€‹ï¼Œç„¶åèŠ±äº†å·®ä¸å¤šä¸€å¤©çœ‹å®Œï¼Œå…¶ä¸­æœ‰ç¯‡æœ‰å…³äº Vim çš„æ–‡ç« æèµ·äº†æˆ‘å¯¹è¿™ä¸ªç¼–è¾‘å™¨çš„å†ä¸€æ¬¡å…´è¶£ï¼ˆå¯¹çš„ï¼Œæˆ‘å¯¹å®ƒæ„Ÿå…´è¶£å¾ˆå¤šæ¬¡äº†ï¼Œæ¯æ¬¡éƒ½æ‡’..ï¼‰ã€‚</p>
<p>ä¸€ç›´æ‡’å¾—å»æ…¢æ…¢é…ç½®å®ƒï¼Œåˆä¸æƒ³ç”¨åˆ«äººçš„é…ç½®ã€‚è‡ªå·±ç”¨çš„ç¼–è¾‘å™¨è¿˜æ˜¯æƒ³è‡ªå·±æŠ˜è…¾ï¼Œç„¶åä»Šå¤©å°±è¶ç€æˆ‘å¯¹è¿™ä¸ªè¿˜æœ‰ç‚¹çƒ­åº¦èµ¶ç´§æŠ˜è…¾èµ·æ¥ã€‚</p>
<h2 id="MacVim"><a href="#MacVim" class="headerlink" title="MacVim"></a>MacVim</h2><p>å…¶å®åœ¨å‘½ä»¤è¡Œé‡Œé¢ç›´æ¥å†™ä»£ç è¿˜æœ‰æœ‰äº›ä¸ä¹ æƒ¯çš„ï¼Œæ‰€ä»¥é€‰äº† MacVim è¿™ä¸ª GUI ç‰ˆæœ¬ã€‚è¿™æ ·åˆå¯ä»¥ä¸å…¶ä»–ç¼–è¾‘å™¨ä¸€æ ·å•ç‹¬æ‰“å¼€ï¼Œæƒ³å°æ”¹ä»£ç çš„æ—¶å€™åˆå¯ä»¥ç›´æ¥æ‰“å¼€å‘½ä»¤è¡Œæã€‚</p>
<p>åœ¨ MacTalk çš„æ–‡ç« é‡Œé¢æœ‰æåˆ° Vim ä¸­æ–‡ç‰ˆæœ¬çš„<a href="http://sourceforge.net/projects/vimcdoc/files/latest/download" target="_blank" rel="external">å¸®åŠ©æ–‡æ¡£</a>ï¼Œé‚ä¸‹è½½ä¹‹ã€‚æœç„¶è¿˜æ˜¯ä¸­æ–‡çš„æ¯”è¾ƒæµ…æ˜¾æ˜“æ‡‚ã€‚</p>
<p>ä»¥å‰çœ‹åˆ«äººçš„ <code>.vimrc</code> é…ç½®ï¼Œé‡Œé¢æœ‰äº›ç¼–è¾‘å™¨çš„åŸºæœ¬é…ç½®ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯å“ªé‡ŒæŸ¥çš„ã€‚åŸæ¥è¿™äº›é…ç½®å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥ <code>:help options</code> è¿›è¡ŒæŸ¥çœ‹ã€‚</p>
<a id="more"></a>
<h3 id="ç¼©è¿›"><a href="#ç¼©è¿›" class="headerlink" title="ç¼©è¿›"></a>ç¼©è¿›</h3><p>å…³äºç¼©è¿›çš„é…ç½®ï¼Œä¸»è¦è®¾ç½®äº† <code>autoindent</code>, <code>smartindent</code> å’Œ <code>expandtab</code> è¿™ä¸‰ä¸ªé€‰é¡¹ã€‚</p>
<ul>
<li><code>autoindent</code> é€‰é¡¹æ ¹æ®ä¸Šä¸€è¡Œå†³å®šæ–°è¡Œçš„ç¼©è¿›</li>
<li><code>smartindent</code> é€‰é¡¹æ™ºèƒ½è‡ªåŠ¨ç¼©è¿›</li>
<li><code>expandtab</code> é€‰é¡¹å°† tab è½¬æ¢ä¸ºç©ºæ ¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">set autoindent</div><div class="line">set smartindent</div><div class="line">set expandtab</div></pre></td></tr></table></figure>
<h3 id="è¡Œå·"><a href="#è¡Œå·" class="headerlink" title="è¡Œå·"></a>è¡Œå·</h3><p>æ˜¾ç¤ºè¡Œå·æ˜¯ç¡¬éœ€æ±‚ï¼Œä½†æ˜¯ä¸å…¶ä»–ç¼–è¾‘å™¨ä¸åŒï¼Œåœ¨ vim ä¸Šè¿˜æœ‰ç›¸å¯¹è¡Œå·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">set number</div><div class="line">set relativenumber</div></pre></td></tr></table></figure>
<h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><p>æ˜¾è€Œæ˜“è§ï¼Œæ‰‹åŠ¨å®‰è£… vim æ’ä»¶æ˜¯å¾ˆéº»çƒ¦å¾ˆéº»çƒ¦çš„ã€‚ä¸ sublime text ä¹‹ç±»çš„ç±»ä¼¼ï¼Œvim åŒæ ·æœ‰ç±»ä¼¼çš„æ’ä»¶ç®¡ç†å™¨ <a href="https://github.com/VundleVim/Vundle.vim" target="_blank" rel="external">Vundle</a>ã€‚</p>
<p>åˆ›å»ºæ–‡ä»¶å¤¹ <code>~/.vim</code> å’Œé…ç½®æ–‡ä»¶ <code>~/.vimrc</code>ï¼Œå¹¶å®‰è£… Vundle:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle</div></pre></td></tr></table></figure>
<p>ä¸ºäº†æ–¹ä¾¿ç®¡ç†å†æ–°å»ºä¸€ä¸ª <code>.vimrc.bundles</code> æ¥å•ç‹¬å­˜æ”¾æ’ä»¶åˆ—è¡¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">set nocompatible    &quot; be iMproved, required</div><div class="line">filetype off        &quot; requried</div><div class="line">set rtp+=~/.vim/bundle/vundle/</div><div class="line"></div><div class="line">call vundle#begin()</div><div class="line"></div><div class="line">&quot; Let Vundle manage Vundle</div><div class="line">Bundle &apos;gmarik/vundle&apos;</div><div class="line"></div><div class="line">&quot; .... å…¶ä»–æ’ä»¶</div><div class="line"></div><div class="line">call vundle#end()</div><div class="line">&quot; required</div><div class="line">filetype plugin indent on</div></pre></td></tr></table></figure>
<p>ä»¥åæ·»åŠ æ’ä»¶çš„æ—¶å€™åªéœ€è¦åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œé¢æ·»åŠ ä¸€è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Bundle &apos;xxx&apos;</div></pre></td></tr></table></figure>
<p>å®‰è£…æ’ä»¶è¾“å…¥ <code>:BundleInstall</code> å‘½ä»¤å³å¯ï¼Œå¸è½½æ’ä»¶æ—¶åˆ é™¤å¯¹åº”çš„é…ç½®å¹¶è¿è¡Œ <code>:BundleClean</code> åˆ é™¤æ’ä»¶ã€‚</p>
<h3 id="æ‹¬å·è¡¥å…¨"><a href="#æ‹¬å·è¡¥å…¨" class="headerlink" title="æ‹¬å·è¡¥å…¨"></a>æ‹¬å·è¡¥å…¨</h3><p>ç¬¬ä¸€æ¬¡ç”¨çš„æ—¶å€™ï¼Œè¾“å…¥ <code>(</code> å±…ç„¶æ²¡æœ‰è‡ªå·±è¹¦å‡ºæ¥å¦å¤–ä¸€ä¸ª <code>)</code>ã€‚è¿™ä¸ç§‘å­¦ï¼Œè®²é“ç†è¿™ä¸ªæ˜¯ä¸€å®šè¦çš„ã€‚</p>
<p>å‘ç°å¾ˆå¤šäººç”¨çš„æ˜¯ <a href="https://github.com/Raimondi/delimitMate" target="_blank" rel="external">delimitMate</a> ï¼Œæ·»åŠ  <code>Bundle &#39;delimitMate&#39;</code> åˆ° <code>.vimrc.bundles</code>ï¼Œè¿è¡Œ <code>BundleInstall</code>ã€‚</p>
<p>å®‰è£…å®Œç›´æ¥å°±å¯ä»¥è‡ªåŠ¨è¡¥å…¨æ‹¬å·äº†ã€‚</p>
<h3 id="Emmet"><a href="#Emmet" class="headerlink" title="Emmet"></a>Emmet</h3><p>å¾ˆå¤šæµè§ˆå™¨éƒ½æ”¯æŒ Emmet æ’ä»¶ï¼Œvim åŒæ ·ä¹Ÿæœ‰ã€‚ä½†è¿™ä¸ª Emmet æ˜¯ç¬¬ä¸‰æ–¹çš„ï¼Œå« <a href="https://github.com/mattn/emmet-vim/" target="_blank" rel="external">Emmet.vim</a>ã€‚</p>
<p>å®‰è£…å®Œä¹‹åä¸»è¦æ˜¯è®¾ç½®ä¸€ä¸‹å‡ºå‘çš„å¿«æ·é”®ï¼Œé»˜è®¤çš„å¿«æ·é”®æ˜¯ <code>Ctrl + y</code>ã€‚<br>æˆ‘æŠŠå¿«æ·é”®ä¿®æ”¹æˆ <code>Ctrl + e</code> æ¯”è¾ƒé¡ºæ‰‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&quot; Emmet.vim</div><div class="line">let g:user_emmet_expandabbr_key = &apos;&lt;c-e&gt;&apos;</div></pre></td></tr></table></figure>
<h3 id="ç›®å½•æ ‘"><a href="#ç›®å½•æ ‘" class="headerlink" title="ç›®å½•æ ‘"></a>ç›®å½•æ ‘</h3><p>ç›®å½•æ ‘å°±åŸºæœ¬ä¸Šä¹Ÿå°±æ˜¯ä½¿ç”¨ <a href="https://github.com/scrooloose/nerdtree" target="_blank" rel="external">NERDTree</a>ã€‚</p>
<p>å¼€å¯ç›®å½•æ ‘çš„å¿«æ·é”®ä¿®æ”¹ä¸º <code>Ctrl + b</code>ï¼Œç„¶åå½“ vim åªå‰©ç›®å½•æ ‘æ˜¾ç¤ºçš„æ—¶å€™è‡ªåŠ¨é€€å‡ºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&quot; NERDTree </div><div class="line">map &lt;c-b&gt; :NERDTreeToggle&lt;CR&gt;</div><div class="line">autocmd vimenter * NERDTree</div><div class="line">autocmd bufenter * if (winnr(&quot;$&quot;) == 1 &amp;&amp; exists(&quot;b:NERDTreeType&quot;) &amp;&amp;b:NERDTreeType == &quot;primary&quot;) | q | endif</div></pre></td></tr></table></figure></p>
<h3 id="ä»£ç è¡¥å…¨"><a href="#ä»£ç è¡¥å…¨" class="headerlink" title="ä»£ç è¡¥å…¨"></a>ä»£ç è¡¥å…¨</h3><p>è¡¥å…¨ç”¨çš„å°±æ˜¯å¤§åé¼é¼çš„ <a href="https://github.com/Valloric/YouCompleteMe" target="_blank" rel="external">YouCompleteMe</a> äº†ã€‚</p>
<p>å…³äºè¿™ä¸ªæ’ä»¶ç½‘ä¸Šæœ‰å¾ˆå¤šæ’ä»¶ï¼Œæˆ‘å°±ä¸å•°å—¦äº†ã€‚è¿™é‡Œä¸»è¦æ˜¯æŠ„çš„ç™¾åº¦ EFE çš„é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&quot; YouCompleteMe</div><div class="line">&quot; http://efe.baidu.com/blog/vim-javascript-completion/#youcompleteme</div><div class="line">let g:ycm_min_num_of_chars_for_completion = 3 </div><div class="line">let g:ycm_autoclose_preview_window_after_completion=1</div><div class="line">let g:ycm_complete_in_comments = 1</div><div class="line">let g:ycm_key_list_select_completion = [&apos;&lt;c-n&gt;&apos;, &apos;&lt;Down&gt;&apos;]</div><div class="line">let g:ycm_key_list_previous_completion = [&apos;&lt;c-p&gt;&apos;, &apos;&lt;Up&gt;&apos;]</div><div class="line">&quot; Use tab</div><div class="line">function! TabFunction ()</div><div class="line">    let line = getline(&apos;.&apos;)</div><div class="line">    let substr = strpart(line, -1, col(&apos;.&apos;)+1)</div><div class="line">    let substr = matchstr(substr, &quot;[^ \t]*$&quot;)</div><div class="line">    if strlen(substr) == 0</div><div class="line">        return &quot;\&lt;tab&gt;&quot;</div><div class="line">    endif</div><div class="line">    return pumvisible() ? &quot;\&lt;c-n&gt;&quot; : &quot;\&lt;c-x&gt;\&lt;c-o&gt;&quot;</div><div class="line">endfunction</div><div class="line">inoremap &lt;tab&gt; &lt;c-r&gt;=TabFunction()&lt;cr&gt;</div><div class="line"></div><div class="line">let g:ycm_semantic_triggers = &#123;</div><div class="line">    \   &apos;css&apos;: [ &apos;re!^\s&#123;2&#125;&apos;, &apos;re!:\s+&apos;],</div><div class="line">    \   &apos;html&apos;: [ &apos;&lt;/&apos; ],</div><div class="line">    \ &#125;</div></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æŠ˜è…¾äº†ä¸€ä¸‹åˆï¼Œç»ˆäºç®—æ˜¯æå®šäº†ã€‚å…¶å®è¿‡ç¨‹è¿˜æ˜¯è›®å¥½ç©çš„ï¼Œæœ‰æœºä¼šè¿˜æƒ³å†™å†™æ’ä»¶ç©ç©ã€‚æŠ›å¼ƒ VS Codeï¼Œå¼€å§‹ Vim ä¹‹æ—…æ„Ÿã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ˜¨å¤©åœ¨å¾®ä¿¡è¯»ä¹¦ä¸Šé¢çœ‹åˆ°äº†æ± å»ºå¼ºçš„ã€ŠMacTalk äººç”Ÿå…ƒç¼–ç¨‹ã€‹ï¼Œç„¶åèŠ±äº†å·®ä¸å¤šä¸€å¤©çœ‹å®Œï¼Œå…¶ä¸­æœ‰ç¯‡æœ‰å…³äº Vim çš„æ–‡ç« æèµ·äº†æˆ‘å¯¹è¿™ä¸ªç¼–è¾‘å™¨çš„å†ä¸€æ¬¡å…´è¶£ï¼ˆå¯¹çš„ï¼Œæˆ‘å¯¹å®ƒæ„Ÿå…´è¶£å¾ˆå¤šæ¬¡äº†ï¼Œæ¯æ¬¡éƒ½æ‡’..ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ç›´æ‡’å¾—å»æ…¢æ…¢é…ç½®å®ƒï¼Œåˆä¸æƒ³ç”¨åˆ«äººçš„é…ç½®ã€‚è‡ªå·±ç”¨çš„ç¼–è¾‘å™¨è¿˜æ˜¯æƒ³è‡ªå·±æŠ˜è…¾ï¼Œç„¶åä»Šå¤©å°±è¶ç€æˆ‘å¯¹è¿™ä¸ªè¿˜æœ‰ç‚¹çƒ­åº¦èµ¶ç´§æŠ˜è…¾èµ·æ¥ã€‚&lt;/p&gt;
&lt;h2 id=&quot;MacVim&quot;&gt;&lt;a href=&quot;#MacVim&quot; class=&quot;headerlink&quot; title=&quot;MacVim&quot;&gt;&lt;/a&gt;MacVim&lt;/h2&gt;&lt;p&gt;å…¶å®åœ¨å‘½ä»¤è¡Œé‡Œé¢ç›´æ¥å†™ä»£ç è¿˜æœ‰æœ‰äº›ä¸ä¹ æƒ¯çš„ï¼Œæ‰€ä»¥é€‰äº† MacVim è¿™ä¸ª GUI ç‰ˆæœ¬ã€‚è¿™æ ·åˆå¯ä»¥ä¸å…¶ä»–ç¼–è¾‘å™¨ä¸€æ ·å•ç‹¬æ‰“å¼€ï¼Œæƒ³å°æ”¹ä»£ç çš„æ—¶å€™åˆå¯ä»¥ç›´æ¥æ‰“å¼€å‘½ä»¤è¡Œæã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ MacTalk çš„æ–‡ç« é‡Œé¢æœ‰æåˆ° Vim ä¸­æ–‡ç‰ˆæœ¬çš„&lt;a href=&quot;http://sourceforge.net/projects/vimcdoc/files/latest/download&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å¸®åŠ©æ–‡æ¡£&lt;/a&gt;ï¼Œé‚ä¸‹è½½ä¹‹ã€‚æœç„¶è¿˜æ˜¯ä¸­æ–‡çš„æ¯”è¾ƒæµ…æ˜¾æ˜“æ‡‚ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥å‰çœ‹åˆ«äººçš„ &lt;code&gt;.vimrc&lt;/code&gt; é…ç½®ï¼Œé‡Œé¢æœ‰äº›ç¼–è¾‘å™¨çš„åŸºæœ¬é…ç½®ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯å“ªé‡ŒæŸ¥çš„ã€‚åŸæ¥è¿™äº›é…ç½®å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥ &lt;code&gt;:help options&lt;/code&gt; è¿›è¡ŒæŸ¥çœ‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ˜è…¾å·¥å…·" scheme="http://www.ahonn.me/categories/tool/"/>
    
    
      <category term="Vim" scheme="http://www.ahonn.me/tags/Vim/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript ç»§æ‰¿çš„é‚£äº›äº‹</title>
    <link href="http://www.ahonn.me/2017/01/24/something-about-javaScript-inherit/"/>
    <id>http://www.ahonn.me/2017/01/24/something-about-javaScript-inherit/</id>
    <published>2017-01-24T15:15:02.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScript çš„ç»§æ‰¿æ˜¯å®ç°ç»§æ‰¿ï¼Œè€Œæ²¡æœ‰ Java ä¸­çš„æ¥å£ç»§æ‰¿ã€‚è¿™æ˜¯å› ä¸º JavaScript ä¸­å‡½æ•°æ²¡æœ‰ç­¾åï¼Œè€Œå®ç°ç»§æ‰¿ä¾é çš„æ˜¯åŸå‹é“¾æ¥å®ç°çš„ã€‚</p>
<h2 id="åŸå‹é“¾ç»§æ‰¿"><a href="#åŸå‹é“¾ç»§æ‰¿" class="headerlink" title="åŸå‹é“¾ç»§æ‰¿"></a>åŸå‹é“¾ç»§æ‰¿</h2><p>JavaScript ä¸­é€šè¿‡ä¿®æ”¹å¯¹è±¡åŸå‹æŒ‡å‘çš„å¯¹è±¡æ¥å®ç°ç»§æ‰¿ï¼Œå³æ˜¯å°†ä¸€ä¸ªå¯¹è±¡çš„åŸå‹æŒ‡å‘è¦ç»§æ‰¿çš„å¯¹è±¡å®ä¾‹ï¼Œä»è€Œå®ç°ç»§æ‰¿å¯¹è±¡çš„å±æ€§åŠæ–¹æ³•ã€‚</p>
<a id="more"></a>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.type = <span class="string">'super'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">SuperType.prototype.getType() &#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.type;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.type = <span class="string">'sub'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</div><div class="line"></div><div class="line"><span class="keyword">var</span> sub = <span class="keyword">new</span> SubType();</div><div class="line"><span class="built_in">console</span>.log(sub.getType()); <span class="comment">// "sub"</span></div></pre></td></tr></table></figure>
<h3 id="åŸå‹é“¾ç»§æ‰¿çš„ä¸è¶³"><a href="#åŸå‹é“¾ç»§æ‰¿çš„ä¸è¶³" class="headerlink" title="åŸå‹é“¾ç»§æ‰¿çš„ä¸è¶³"></a>åŸå‹é“¾ç»§æ‰¿çš„ä¸è¶³</h3><p>å®é™…ä¸Šï¼Œä¸Šé¢çš„ä»£ç è¿˜ç¼ºå°‘ä¸€å¥ä»£ç ï¼Œæˆ‘ä»¬å°† SubType çš„åŸå‹æŒ‡å‘äº† SuperType çš„å®ä¾‹ï¼Œå³<code>SubType.prototype.constructor</code> ä¼šè¿”å› <code>SuperType</code> è€Œä¸æ˜¯ <code>SubType</code>ï¼Œä½¿ç”¨ <code>instanceof</code> æ“ä½œç¬¦è¿”å›çš„å°†æ˜¯ <code>SuperType</code>ã€‚æ‰€ä»¥éœ€è¦å°† <code>SubType.prototype.constructor</code> é‡æ–°æŒ‡å‘ <code>SubType</code>ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</div><div class="line">SubType.prototype.constructor = SubType;</div><div class="line"><span class="comment">// ...</span></div></pre></td></tr></table></figure>
<p>ä½†å³ä½¿æ˜¯è¿™æ ·ï¼ŒåŸå‹é“¾ç»§æ‰¿ä¾ç„¶æœ‰ä¸¤ç‚¹é—®é¢˜ï¼šåŸå‹ä¸­çš„å®ä¾‹å¼•ç”¨ç±»å‹å±æ€§ä¼šåœ¨æ‰€æœ‰å¯¹è±¡å®ä¾‹ä¸­å…±äº«ï¼Œæ— æ³•æƒ³ Java çš„ç»§æ‰¿ä¸€æ ·å‘çˆ¶ç±»çš„æ„é€ å‡½æ•°ä¸­ä¼ é€’å‚æ•°ã€‚</p>
<h2 id="å…¶ä»–ç»§æ‰¿æ–¹å¼"><a href="#å…¶ä»–ç»§æ‰¿æ–¹å¼" class="headerlink" title="å…¶ä»–ç»§æ‰¿æ–¹å¼"></a>å…¶ä»–ç»§æ‰¿æ–¹å¼</h2><p>ç”±äºåŸå‹é“¾ç»§æ‰¿å­˜åœ¨ä¸€äº›ä¸è¶³ï¼Œä¸ºäº†è§£å†³è¿™äº›ä¸è¶³ï¼ŒJavaScript ä¸­è¿˜æœ‰å…¶ä»–çš„å‡ ç§ç»§æ‰¿çš„æ–¹å¼ã€‚</p>
<h3 id="å€Ÿç”¨æ„é€ å‡½æ•°"><a href="#å€Ÿç”¨æ„é€ å‡½æ•°" class="headerlink" title="å€Ÿç”¨æ„é€ å‡½æ•°"></a>å€Ÿç”¨æ„é€ å‡½æ•°</h3><p>å› ä¸ºåŸå‹é“¾æ— æ³•ä¼ é€’å‚æ•°åˆ°çˆ¶ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œå› æ­¤å‡ºç°äº†è¿™ç§å«åšå€Ÿç”¨æ„é€ å‡½æ•°çš„æŠ€æœ¯ã€‚é¡¾åæ€ä¹‰ï¼Œå³æ˜¯å€Ÿç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°åœ¨å­ç±»ä¸­è¿›è¡Œè°ƒç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  SuperType.call(<span class="keyword">this</span>); <span class="comment">// &lt;- æ‰§è¡Œçˆ¶ç±»æ„é€ å‡½æ•°</span></div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å€Ÿç”¨æ„é€ å‡½æ•°è™½ç„¶è§£å†³äº†æ„é€ å‡½æ•°ä¼ å‚çš„é—®é¢˜ï¼Œä½†æ˜¯å½“çˆ¶ç±»æ‹¥æœ‰æ–¹æ³•æ—¶æ¯ä¸ªå­ç±»çš„å®ä¾‹éƒ½ä¼šæ‹¥æœ‰ç‹¬ç«‹çš„æ–¹æ³•ï¼Œè¿™ä¸ªé—®é¢˜ä¸å•ç‹¬ä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å®šä¹‰ç±»å‹çš„æ—¶å€™ç›¸åŒã€‚</p>
<h3 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h3><p>ç±»æ¯”ä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å®šä¹‰ç±»å‹æ—¶çš„è§£å†³æ–¹æ³•ï¼ˆç»„åˆæ„é€ å‡½æ•°æ¨¡å¼ä¸åŸå‹æ¨¡å¼ï¼‰ï¼Œç»§æ‰¿æ—¶çš„è§£å†³æ–¹æ³•ä¹Ÿç±»ä¼¼ã€‚å³ç»„åˆåŸå‹é“¾ç»§æ‰¿å’Œå€Ÿç”¨æ„é€ å‡½æ•°ï¼Œå±æ€§ç”±å€Ÿç”¨æ„é€ å‡½æ•°çš„æ–¹å¼ç»§æ‰¿ï¼Œæ–¹æ³•ç”±åŸå‹é“¾ç»§æ‰¿ã€‚</p>
<p>å®é™…ä¸Šä¹Ÿå°±æ˜¯åœ¨åŸå‹é“¾ç»§æ‰¿çš„ä»£ç ä¸­æ·»åŠ åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.type = <span class="string">'super'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">SuperType.prototype.getType() &#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.type;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  SuperType.call(<span class="keyword">this</span>);</div><div class="line">  <span class="keyword">this</span>.type = <span class="string">'sub'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</div><div class="line">SubType.prototype.constructor = SubType;</div></pre></td></tr></table></figure>
<h3 id="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h3><p>ç»„åˆç»§æ‰¿æ˜¯å¸¸ç”¨çš„ç»§æ‰¿æ–¹å¼ï¼Œä½†æ˜¯åŒæ ·çš„ä¹Ÿæ˜¯æœ‰ä¸è¶³ä¹‹å¤„ï¼šè°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œä¸€æ¬¡åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œä¸€æ¬¡åœ¨å®ä¾‹çˆ¶ç±»å¯¹è±¡èµ‹å€¼ç»™å­ç±»çš„åŸå‹ã€‚</p>
<p>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿åœ¨æŒ‡å®šå­ç±»çš„åŸå‹çš„æ—¶å€™ä¸å¿…è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ <code>Object.create()</code> åˆ›å»ºçˆ¶ç±»åŸå‹çš„å‰¯æœ¬ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  SuperType.call(<span class="keyword">this</span>);</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">SubType.prototype = <span class="built_in">Object</span>.create(SuperType.prototype); <span class="comment">// ç›´æ¥ä½¿ç”¨çˆ¶ç±»åŸå‹åˆ›å»ºå‰¯æœ¬</span></div><div class="line">SubType.prototype.constructor = SubType;</div></pre></td></tr></table></figure>
<h2 id="ES6-ä¸­çš„ç»§æ‰¿"><a href="#ES6-ä¸­çš„ç»§æ‰¿" class="headerlink" title="ES6 ä¸­çš„ç»§æ‰¿"></a>ES6 ä¸­çš„ç»§æ‰¿</h2><p>ES6 å¼•å…¥äº† <code>class</code> å…³é”®å­ï¼Œå¯ä»¥åƒå…¶ä»–è¯­è¨€ä¸­ä¸€æ ·ä½¿ç”¨ <code>extends</code> å…³é”®å­—æ¥ç»§æ‰¿ã€‚è™½ç„¶èƒ½å¤Ÿä½¿ç”¨ <code>extends</code> å®ç°ç»§æ‰¿ï¼Œä½†å®é™…ä¸Šå†…éƒ¨è¿˜æ˜¯åŸºäºåŸå‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubType</span> <span class="keyword">extends</span> <span class="title">SuperType</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">super</span>();</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScript çš„ç»§æ‰¿æ˜¯å®ç°ç»§æ‰¿ï¼Œè€Œæ²¡æœ‰ Java ä¸­çš„æ¥å£ç»§æ‰¿ã€‚è¿™æ˜¯å› ä¸º JavaScript ä¸­å‡½æ•°æ²¡æœ‰ç­¾åï¼Œè€Œå®ç°ç»§æ‰¿ä¾é çš„æ˜¯åŸå‹é“¾æ¥å®ç°çš„ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŸå‹é“¾ç»§æ‰¿&quot;&gt;&lt;a href=&quot;#åŸå‹é“¾ç»§æ‰¿&quot; class=&quot;headerlink&quot; title=&quot;åŸå‹é“¾ç»§æ‰¿&quot;&gt;&lt;/a&gt;åŸå‹é“¾ç»§æ‰¿&lt;/h2&gt;&lt;p&gt;JavaScript ä¸­é€šè¿‡ä¿®æ”¹å¯¹è±¡åŸå‹æŒ‡å‘çš„å¯¹è±¡æ¥å®ç°ç»§æ‰¿ï¼Œå³æ˜¯å°†ä¸€ä¸ªå¯¹è±¡çš„åŸå‹æŒ‡å‘è¦ç»§æ‰¿çš„å¯¹è±¡å®ä¾‹ï¼Œä»è€Œå®ç°ç»§æ‰¿å¯¹è±¡çš„å±æ€§åŠæ–¹æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯æ–‡ç« " scheme="http://www.ahonn.me/categories/technology/"/>
    
    
      <category term="å‰ç«¯" scheme="http://www.ahonn.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="JavaScript" scheme="http://www.ahonn.me/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>ä»é›¶å¼€å§‹åˆ¶ä½œ Hexo ä¸»é¢˜</title>
    <link href="http://www.ahonn.me/2016/12/15/create-a-hexo-theme-from-scratch/"/>
    <id>http://www.ahonn.me/2016/12/15/create-a-hexo-theme-from-scratch/</id>
    <published>2016-12-15T09:43:47.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>æœ¬æ–‡å°†ä¼šä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªç®€å•çš„åšå®¢ä¸»é¢˜ã€‚æ ·å¼ä¸»è¦å‚è€ƒ <a href="https://hexo.io/themes/" target="_blank" rel="external">Hexo theme</a> ä¸­çš„ <a href="https://github.com/lotabout/hexo-theme-noise" target="_blank" rel="external">Noise</a> ä¸»é¢˜ã€‚ </p>
<p>å¼€å§‹ä¹‹å‰ä½ éœ€è¦äº†è§£ï¼š</p>
<ul>
<li>æ¨¡æ¿å¼•æ“</li>
<li>CSSé¢„å¤„ç†å™¨</li>
<li>Hexo æ–‡æ¡£</li>
</ul>
<p>æœ¬æ–‡ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“ä¸º <a href="http://www.embeddedjs.com/" target="_blank" rel="external">ejs</a>ï¼Œä½¿ç”¨çš„ CSS é¢„å¤„ç†å™¨ä¸º <a href="http://stylus-lang.com/" target="_blank" rel="external">stylus</a>ã€‚è¿™ä¹Ÿæ˜¯ hexo é¡¹ç›®é¢„è£…äº†çš„ render æ’ä»¶ï¼Œå¦‚æœæƒ³ä½¿ç”¨å…¶ä»–æ¨¡æ¿å¼•æ“æˆ–è€…å…¶ä»– CSS é¢„å¤„ç†å™¨ï¼Œå¯ä»¥å®‰è£…ç›¸å¯¹åº”çš„ render æ’ä»¶ã€‚ä¾‹å¦‚æˆ‘çš„ <a href="https://github.com/ahonn/hexo-theme-even" target="_blank" rel="external">Even</a> ä¸»é¢˜ä½¿ç”¨çš„æ˜¯ Swig ä¸ SCSSã€‚</p>
<p>æœ¬æ–‡çš„ä»£ç ï¼š <a href="https://github.com/ahonn/theme-example" target="_blank" rel="external">theme-example</a> ã€‚</p>
<a id="more"></a>
<h2 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h2><p>ä¸»é¢˜ç›®å½•ç»“æ„ä»¥è‡ªå¸¦çš„ <a href="https://github.com/hexojs/hexo-theme-landscape" target="_blank" rel="external">landscape</a> ä¸»é¢˜ä¸ºä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">â”œâ”€â”€ languages  è¯­è¨€æ–‡ä»¶ï¼Œç”¨äºå›½é™…åŒ–</div><div class="line">â”œâ”€â”€ layout     é¡µé¢æ¨¡æ¿æ–‡ä»¶</div><div class="line">â”œâ”€â”€ scripts    Hexo è„šæœ¬</div><div class="line">â””â”€â”€ source     ä¸»é¢˜èµ„æºæ–‡ä»¶ï¼ŒåŒ…æ‹¬é¡µé¢æ ·å¼ï¼Œè„šæœ¬ï¼Œå­—ä½“ç­‰</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨ <code>themes</code> ä¸­æ–°å»º <code>theme-example</code> æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨ <code>theme-demo</code> ä¸­æŒ‰ç…§ landscape ä¸»é¢˜çš„ç›®å½•ç»“æ„æ–°å»º <code>languages</code>ï¼Œ<code>layout</code>ï¼Œ<code>scripts</code> ä¸ <code>source</code> æ–‡ä»¶å¤¹ã€‚</p>
<h2 id="åˆ›å»ºå¸ƒå±€æ¨¡æ¿"><a href="#åˆ›å»ºå¸ƒå±€æ¨¡æ¿" class="headerlink" title="åˆ›å»ºå¸ƒå±€æ¨¡æ¿"></a>åˆ›å»ºå¸ƒå±€æ¨¡æ¿</h2><p>åœ¨ <code>layout</code> ä¸­åˆ›å»º <code>index.ejs</code> æ–‡ä»¶ï¼Œé¦–é¡µå°†ä¼šä½¿ç”¨è¯¥å¸ƒå±€æ¨¡æ¿ç”Ÿæˆ HTML æ–‡ä»¶ã€‚</p>
<p><code>layout/index.ejs</code>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"</span> <span class="attr">name</span>=<span class="string">"viewport"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello Word<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­çš„ä¸»é¢˜é…ç½®ï¼Œä½¿ç”¨æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ <code>theme-example</code> ä¸»é¢˜ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Extensions</span></div><div class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></div><div class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></div><div class="line"><span class="attr">theme:</span> <span class="string">theme-example</span></div></pre></td></tr></table></figure>
<p>è¿è¡Œ <code>hexo server --debug</code> ä»¥ debug æ¨¡å¼å¼€å¯ Hexo æœ¬åœ°æœåŠ¡å™¨é¢„è§ˆï¼Œè®¿é—® <a href="http://localhost:4000/" target="_blank" rel="external">http://localhost:4000/</a>ã€‚</p>
<p><img src="http://ouv0frko5.bkt.clouddn.com/q2yje.jpg" alt="Hello World"></p>
<h2 id="æ·»åŠ é¡µé¢å¯¼èˆª"><a href="#æ·»åŠ é¡µé¢å¯¼èˆª" class="headerlink" title="æ·»åŠ é¡µé¢å¯¼èˆª"></a>æ·»åŠ é¡µé¢å¯¼èˆª</h2><p>ç°åœ¨æˆ‘ä»¬éœ€è¦åœ¨é¡µé¢ä¸­æ·»åŠ å¯¼èˆªï¼Œç”±äºå¯¼èˆªä¸å•å•ä¼šåœ¨é¦–é¡µå‡ºç°ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ <code>layout</code> ä¸­åˆ›å»ºå…±ç”¨çš„å¸ƒå±€æ–‡ä»¶ <code>layout.ejs</code>ï¼Œ åŒæ—¶åˆ›å»º <code>_partial/head.ejs</code> ä¿å­˜ HTML çš„ head ä»¥åŠåˆ›å»º <code>_partial/header.ejs</code> æ–‡ä»¶ï¼Œç¼–å†™é¡µé¢å¯¼èˆªéƒ¨åˆ†ã€‚</p>
<p><code>layout/layout.ejs</code>:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>('<span class="attr">_partial</span>/<span class="attr">head</span>') %&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>('<span class="attr">_partial</span>/<span class="attr">header</span>') %&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">main</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">%-</span> <span class="attr">body</span> %&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">main</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>layout.ejs</code> æ–‡ä»¶é€šè¿‡ <code>partial()</code> å‡½æ•°æ¥åŒ…å«å…¶ä»–æ–‡ä»¶ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½çš„ç»„ç»‡ä»£ç ã€‚è¯¦è§ <a href="https://hexo.io/docs/templates.html#Partials" target="_blank" rel="external">Templates | Hexo</a>ã€‚</p>
<p><code>layout/_partial/head.ejs</code>:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"</span> <span class="attr">name</span>=<span class="string">"viewport"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">config.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>è¿™é‡Œä½¿ç”¨äº† <code>config</code> å˜é‡ï¼Œè¯¥å˜é‡åŒ…å«çš„æ˜¯ç«™ç‚¹é…ç½®ï¼ˆå³ç«™ç‚¹æ ¹ç›®å½•ä¸‹ <code>_config.yml</code> ä¸­çš„é…ç½®ï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒHexo è¿˜æä¾›äº†è®¸å¤šå˜é‡å¯åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼Œè¯¦è§ <a href="https://hexo.io/docs/variables.html" target="_blank" rel="external">Variables | Hexo</a>ã€‚</p>
<p><code>layout/_partial/header.ejs</code>:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"blog-title"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&lt;%- url_for() %&gt;"</span> <span class="attr">class</span>=<span class="string">"logo"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">config.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"navbar"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"menu"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"menu-item"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/"</span> <span class="attr">class</span>=<span class="string">"menu-item-link"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"menu-item"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/archives"</span> <span class="attr">class</span>=<span class="string">"menu-item-link"</span>&gt;</span>Archive<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>æ¥ç€æˆ‘ä»¬æ¸…ç©º <code>index.ejs</code> ä¸­çš„å†…å®¹ï¼Œå¹¶æ·»åŠ  <code>&lt;h2&gt;Hello World&lt;/h2&gt;</code>ã€‚åœ¨ <code>layout</code> ç›®å½•ä¸‹çš„ <code>index.ejs</code> ä¼šè‡ªåŠ¨ç»§æ‰¿ <code>layout.ejs</code>ï¼Œå¹¶å°†å…¶ä¸­çš„å†…å®¹å¡«å…¥ <code>&lt;%- body %&gt;</code> çš„ä½ç½®ã€‚æˆ‘ä»¬å°†å¾—åˆ°ä¸€ä¸ªæœ‰å¯¼èˆªèœå•çš„ Hello World é¡µé¢ã€‚</p>
<p><a href="http://ouv0frko5.bkt.clouddn.com/tsz8v.jpg" target="_blank" rel="external">Index</a></p>
<h2 id="æ·»åŠ ä¸»é¢˜é…ç½®æ–‡ä»¶"><a href="#æ·»åŠ ä¸»é¢˜é…ç½®æ–‡ä»¶" class="headerlink" title="æ·»åŠ ä¸»é¢˜é…ç½®æ–‡ä»¶"></a>æ·»åŠ ä¸»é¢˜é…ç½®æ–‡ä»¶</h2><p>å®é™…ä¸Šæˆ‘ä»¬éœ€è¦è®©å¯¼èˆªèœå•æ ¹æ®æˆ‘ä»¬çš„éœ€è¦æ˜¾ç¤ºä¸åŒçš„é¡¹ï¼Œä¸Šé¢è¿™ç§å†™æ³•ä¸æ–¹ä¾¿ä¿®æ”¹ã€‚æ‰€ä»¥æˆ‘ä»¬ä¼šåœ¨ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¯¼èˆªèœå•çš„é…ç½®ã€‚åœ¨ <code>thmem-demo</code> ä¸‹æ–°å»ºä¸»é¢˜çš„é…ç½®æ–‡ä»¶ <code>_config.yml</code>ï¼Œåœ¨å…¶ä¸­æ·»åŠ éœ€è¦é…ç½®çš„å­—æ®µã€‚ç„¶åå¯ä»¥é€šè¿‡ <code>theme</code> è¿™ä¸ªå˜é‡æ¥æ‹¿åˆ°è¯¥é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®ã€‚</p>
<p><code>theme-demo/_config.yml</code>:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attr">menu:</span></div><div class="line"><span class="attr">  Home:</span> <span class="string">/</span></div><div class="line"><span class="attr">  Archives:</span> <span class="string">/archives</span></div></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ <code>header.ejs</code> ä¸­ä½¿ç”¨ <code>theme.menu</code> è·å–åˆ°å¯¼èˆªèœå•çš„è®¾ç½®ã€‚å°† <code>header.ejs</code> ä¿®æ”¹ä¸ºï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"blog-title"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&lt;%- url_for() %&gt;"</span> <span class="attr">class</span>=<span class="string">"logo"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">config.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"navbar"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"menu"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">%</span> <span class="attr">for</span> (<span class="attr">name</span> <span class="attr">in</span> <span class="attr">theme.menu</span>) &#123; %&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"menu-item"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&lt;%- url_for(theme.menu[name]) %&gt;"</span> <span class="attr">class</span>=<span class="string">"menu-item-link"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">name</span> %&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></div></pre></td></tr></table></figure>
<p>å½“éœ€è¦åœ¨å¯¼èˆªä¸­æ·»åŠ é“¾æ¥çš„æ—¶å€™å°±å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ç›´æ¥æ·»åŠ ï¼Œä¾‹å¦‚æ·»åŠ  Github çš„é“¾æ¥ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">menu:</span></div><div class="line"><span class="attr">  Home:</span> <span class="string">/</span></div><div class="line"><span class="attr">  Archives:</span> <span class="string">/archives</span></div><div class="line"><span class="attr">  Github:</span> <span class="attr">https://github.com/ahonn</span></div></pre></td></tr></table></figure>
<p>é™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥æ·»åŠ å…¶ä»–éœ€è¦çš„é…ç½®ï¼Œä¾‹å¦‚ RSSï¼Œè¯„è®ºç­‰ç­‰ã€‚</p>
<h2 id="æ·»åŠ é¦–é¡µæ–‡ç« åˆ—è¡¨"><a href="#æ·»åŠ é¦–é¡µæ–‡ç« åˆ—è¡¨" class="headerlink" title="æ·»åŠ é¦–é¡µæ–‡ç« åˆ—è¡¨"></a>æ·»åŠ é¦–é¡µæ–‡ç« åˆ—è¡¨</h2><p>æ¥ç€æˆ‘ä»¬å®Œå–„é¦–é¡µçš„æ¨¡æ¿ï¼Œä½¿å…¶èƒ½å¤Ÿæ˜¾ç¤ºæ–‡ç« åˆ—è¡¨ã€‚å‰é¢å·²ç»è¯´è¿‡ Hexo æä¾›äº†å„ç§æœ‰ç”¨çš„å˜é‡ï¼Œåœ¨è¿™é‡Œå°†ä¼šä½¿ç”¨åˆ° <code>page</code> è¿™ä¸ªå˜é‡ã€‚<code>page</code> ä¼šæ ¹æ®ä¸åŒçš„é¡µé¢æ‹¥æœ‰ä¸åŒçš„å±æ€§ã€‚å…·ä½“æœ‰ä»€ä¹ˆå±æ€§ï¼Œå¯ä»¥è·å–åˆ°å“ªäº›æ•°æ®å¯ä»¥æŸ¥çœ‹<a href="https://hexo.io/docs/variables.html#Page-Variables" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚</p>
<p>é‚£ä¹ˆè¿™é‡Œæˆ‘ä»¬ä¼šä½¿ç”¨ <code>page</code> å˜é‡çš„ <code>posts</code> å±æ€§æ‹¿åˆ°æ–‡ç« æ•°æ®çš„é›†åˆã€‚ç¼–è¾‘ <code>index.ejs</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"posts"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">%</span> <span class="attr">page.posts.each</span>(<span class="attr">function</span> (<span class="attr">post</span>) &#123; %&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-title"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"post-title-link"</span> <span class="attr">href</span>=<span class="string">"&lt;%- url_for(post.path) %&gt;"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">post.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-content"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">%-</span> <span class="attr">post.content</span> %&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-meta"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"post-time"</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span> <span class="attr">date</span>(<span class="attr">post.date</span>, "<span class="attr">YYYY-MM-DD</span>") %&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">article</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">%</span> &#125;) %&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ä» <code>page.posts</code> ä¸­è·å–å•ç¯‡æ–‡ç« çš„æ•°æ®ï¼Œå¹¶è·å–æ–‡ç« çš„æ ‡é¢˜ï¼Œå†…å®¹ç­‰æ•°æ®å¡«å……åˆ°æ¨¡æ¿ä¸­ã€‚å¤„ç†æ–‡ç« åˆ›å»ºæ—¶é—´çš„æ—¶å€™ä½¿ç”¨äº† <code>date()</code> å‡½æ•°ï¼Œè¿™æ˜¯ Hexo æä¾›çš„æ—¶é—´å¤„ç†çš„<a href="https://hexo.io/docs/helpers.html#date" target="_blank" rel="external">è¾…åŠ©å‡½æ•°</a>ã€‚æœ¬æ–‡ä¸­ä½¿ç”¨åˆ°çš„å‡½æ•°å¦‚æ— ç‰¹åˆ«è¯´æ˜ï¼Œå³ä¸º Hexo çš„è¾…åŠ©å‡½æ•°ã€‚</p>
<h3 id="æ–‡ç« æ‘˜å½•"><a href="#æ–‡ç« æ‘˜å½•" class="headerlink" title="æ–‡ç« æ‘˜å½•"></a>æ–‡ç« æ‘˜å½•</h3><p>ç”±äºé¦–é¡µæ˜¾ç¤ºæ–‡ç« å†…å®¹æ—¶ä½¿ç”¨çš„æ˜¯ <code>post.content</code>ï¼Œå³æ–‡ç« çš„å…¨éƒ¨å†…å®¹ã€‚æ‰€ä»¥é¦–é¡µä¼šæ˜¾ç¤ºæ¯ä¸€ç¯‡æ–‡ç« çš„å†…å®¹ï¼Œå®é™…ä¸Šæˆ‘ä»¬å¹¶ä¸æƒ³åœ¨é¦–é¡µæ˜¾ç¤ºé‚£ä¹ˆå¤šå†…å®¹ï¼Œåªæƒ³æ˜¾ç¤ºæ–‡ç« çš„æ‘˜å½•ã€‚</p>
<p>Hexo æä¾›äº† <code>excerpt</code> å±æ€§æ¥è·å–æ–‡ç« çš„æ‘˜å½•éƒ¨åˆ†ï¼Œä¸è¿‡è¿™é‡Œéœ€è¦åœ¨æ–‡ç« ä¸­æ·»åŠ ä¸€ä¸ª <code>&lt;!--more--&gt;</code> æ ‡è®°ã€‚æ·»åŠ äº†è¿™ä¸ªæ ‡è®°ä¹‹åï¼Œ<code>post.excerpt</code> å°†ä¼šè·å–åˆ°æ ‡è®°ä¹‹å‰çš„å†…å®¹ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªæ ‡è®°ï¼Œé‚£ä¹ˆ <code>post.excerpt</code> ä¼šæ˜¯ç©ºçš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠé¦–é¡µæ–‡ç« å†…å®¹éƒ¨åˆ†çš„ <code>post.content</code> æ›¿æ¢æˆ <code>post.excerpt</code>ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-content"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">%-</span> <span class="attr">post.excerpt</span> %&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="æ·»åŠ é¡µé¢æ ·å¼"><a href="#æ·»åŠ é¡µé¢æ ·å¼" class="headerlink" title="æ·»åŠ é¡µé¢æ ·å¼"></a>æ·»åŠ é¡µé¢æ ·å¼</h2><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å®Œæˆäº†é¦–é¡µçš„é¡µé¢ç»“æ„ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ·»åŠ æ ·å¼ï¼Œæ‰€ä»¥çœ‹èµ·æ¥å¾ˆä¸‘ã€‚æˆ‘ä»¬åœ¨ <code>source</code> æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ª <code>css</code> æ–‡ä»¶å¤¹æ¥å­˜æ”¾æ ·å¼æ–‡ä»¶ã€‚</p>
<p>ç”±äº Hexo åœ¨æ–°å»ºé¡¹ç›®çš„æ—¶å€™ä¼šå®‰è£… <code>hexo-renderer-stylus</code> è¿™ä¸ªæ’ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— éœ€å…¶ä»–æ­¥éª¤ï¼Œåªéœ€è¦å°†æ ·å¼æ–‡ä»¶æ”¾åˆ° <code>css</code> æ–‡ä»¶å¤¹ä¸­ã€‚Hexo åœ¨ç”Ÿæˆé¡µé¢çš„æ—¶å€™ä¼šå°† <code>source</code> ä¸­çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°ç”Ÿæˆçš„ <code>public</code> æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”åœ¨æ­¤ä¹‹å‰ä¼šç¼–è¯‘ styl ä¸º css æ–‡ä»¶ã€‚</p>
<p>åœ¨ <code>css</code> æ–‡ä»¶å¤¹ä¸­åˆ›å»º <code>style.styl</code>ï¼Œç¼–å†™ä¸€äº›åŸºç¡€çš„æ ·å¼ï¼Œå¹¶æŠŠæ‰€æœ‰æ ·å¼ <code>import</code> åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚æ‰€ä»¥æœ€ç»ˆç¼–è¯‘ä¹‹ååªä¼šæœ‰ <code>style.css</code> ä¸€ä¸ªæ–‡ä»¶ã€‚åˆ›å»º <code>_partial/header.styl</code> ä¸ <code>_partial/post.styl</code> å­˜æ”¾é¡µé¢å¯¼èˆªä»¥åŠæ–‡ç« çš„æ ·å¼ï¼Œå¹¶ä¸”åœ¨ <code>style.styl</code> ä¸­ <code>import</code> è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚ </p>
<p><code>_partial/header.styl</code>:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.header</span> &#123;</div><div class="line">  <span class="attribute">margin-top</span>: <span class="number">2em</span></div><div class="line">  <span class="attribute">display</span>: flex</div><div class="line">  <span class="attribute">align-items</span>: baseline</div><div class="line">  <span class="attribute">justify-content</span>: space-between</div><div class="line"></div><div class="line">  <span class="selector-class">.blog-title</span> <span class="selector-class">.logo</span> &#123;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#AAA</span>;</div><div class="line">    <span class="attribute">font-size</span>: <span class="number">2em</span>;</div><div class="line">    <span class="attribute">font-family</span>: <span class="string">"Comic Sans MS"</span>,cursive,LiSu,sans-serif;</div><div class="line">    <span class="attribute">text-decoration</span>: none;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="selector-class">.menu</span> &#123;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="selector-class">.menu-item</span> &#123;</div><div class="line">      <span class="attribute">display</span>: inline-block;</div><div class="line">      <span class="attribute">margin-right</span>: <span class="number">10px</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="selector-class">.menu-item-link</span> &#123;</div><div class="line">      <span class="attribute">color</span>: <span class="number">#AAA</span>;</div><div class="line">      <span class="attribute">text-decoration</span>: none;</div><div class="line"></div><div class="line">      &amp;:hover &#123;</div><div class="line">        <span class="attribute">color</span>: <span class="number">#368CCB</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>_partial/post.style</code>:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.post</span> &#123;</div><div class="line">  <span class="attribute">margin</span>: <span class="number">1em</span> auto;</div><div class="line">  <span class="attribute">padding</span>: <span class="number">30px</span> <span class="number">50px</span>;</div><div class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</div><div class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</div><div class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#ddd</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.posts</span>  &#123;</div><div class="line">  <span class="selector-class">.post</span>:first-child &#123;</div><div class="line">    <span class="attribute">margin-top</span>: <span class="number">0</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="selector-class">.post-title</span> &#123;</div><div class="line">    <span class="attribute">font-size</span>: <span class="number">1.5em</span>;</div><div class="line"></div><div class="line">    <span class="selector-class">.post-title-link</span> &#123;</div><div class="line">      <span class="attribute">color</span>: <span class="number">#368CCB</span>;</div><div class="line">      <span class="attribute">text-decoration</span>: none;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="selector-class">.post-content</span> &#123;</div><div class="line">    <span class="selector-tag">a</span> &#123;</div><div class="line">      <span class="attribute">color</span>: <span class="number">#368CCB</span>;</div><div class="line">      <span class="attribute">text-decoration</span>: none;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="selector-class">.post-meta</span> &#123;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#BABABA</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>style.styl</code>:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">  <span class="attribute">background-color</span>: <span class="number">#F2F2F2</span>;</div><div class="line">  <span class="attribute">font-size</span>: <span class="number">1.25rem</span>;</div><div class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.container</span> &#123;</div><div class="line">  <span class="attribute">max-width</span>: <span class="number">960px</span>;</div><div class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@import "_partial/header";</div><div class="line">@import "_partial/post";</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ ·å¼æ·»åŠ åˆ°é¡µé¢ä¸­ï¼Œè¿™é‡Œä½¿ç”¨äº†å¦å¤–ä¸€ä¸ªè¾…åŠ©å‡½æ•° <a href="https://hexo.io/docs/helpers.html#css" target="_blank" rel="external"><code>css()</code></a>:</p>
<p><code>layout/_partial/head.ejs</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"</span> <span class="attr">name</span>=<span class="string">"viewport"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">config.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">%-</span> <span class="attr">css</span>('<span class="attr">css</span>/<span class="attr">style.css</span>') %&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ç«™ç‚¹çš„é¦–é¡µæ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p>
<p><img src="http://ouv0frko5.bkt.clouddn.com/6se7j.jpg" alt="Home Page"></p>
<p><strong>æ³¨æ„ï¼Œè¿™é‡Œä¼šæŠ¥é”™ã€‚åŸå› æ˜¯ç”Ÿæˆæ–‡ç« é¡µæ—¶æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„æ¨¡ç‰ˆï¼Œæ‰€ä»¥ä½¿ç”¨äº†é¦–é¡µçš„æ¨¡ç‰ˆï¼Œä½†æ–‡ç« é¡µå¹¶æ²¡æœ‰ <code>page.posts</code> è¿™ä¸ªå±æ€§ï¼ˆundefined æ²¡æœ‰ each æ–¹æ³•ï¼‰ã€‚æ–°å»º post.ejs å³å¯è§£å†³ï¼Œæˆ–ç›´æ¥è·³è¿‡ç›´åˆ°å®Œæˆæ–‡ç« é¡µæ¨¡ç‰ˆã€‚</strong></p>
<h2 id="æ·»åŠ åˆ†é¡µ"><a href="#æ·»åŠ åˆ†é¡µ" class="headerlink" title="æ·»åŠ åˆ†é¡µ"></a>æ·»åŠ åˆ†é¡µ</h2><p>åœ¨ç«™ç‚¹çš„ <code>source/_post/</code> ç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„æ–‡ç« ï¼Œç°åœ¨æˆ‘ä»¬æŠŠåŸæœ¬çš„ <code>hello-world.md</code> å¤åˆ¶é»è´´ 10+ æ¬¡ï¼Œå†æŸ¥çœ‹ç«™ç‚¹é¦–é¡µã€‚ä¼šå‘ç°ï¼Œé¦–é¡µåªæ˜¾ç¤ºäº† 10 ç¯‡æ–‡ç« ã€‚</p>
<p>é¦–é¡µæ˜¾ç¤ºçš„æ–‡ç« æ•°é‡æˆ‘ä»¬å¯ä»¥é€šè¿‡ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­çš„ <code>per_page</code> å­—æ®µæ¥ä¿®æ”¹ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å¯èƒ½æŠŠæ‰€æœ‰æ–‡ç« éƒ½æ”¾åœ¨ä¸€é¡µï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨æ¥æ·»åŠ æ–‡ç« åˆ—è¡¨çš„åˆ†é¡µã€‚</p>
<p>æ–°å»º <code>_partial/paginator.ejs</code>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (<span class="attr">page.total</span> &gt;</span> 1)&#123; %&gt;</div><div class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"page-nav"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">%-</span> <span class="attr">paginator</span>(&#123;</span></div><div class="line"><span class="tag">      <span class="attr">prev_text:</span> "&amp;<span class="attr">laquo</span>; <span class="attr">Prev</span>",</span></div><div class="line"><span class="tag">      <span class="attr">next_text:</span> "<span class="attr">Next</span> &amp;<span class="attr">raquo</span>;"</span></div><div class="line"><span class="tag">    &#125;) %&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></div></pre></td></tr></table></figure>
<p>åœ¨ <code>index.ejs</code> ä¸­æ·»åŠ è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>('<span class="attr">_partial</span>/<span class="attr">paginator</span>') %&gt;</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨åˆ°äº†å¦å¤–çš„ä¸€ä¸ªè¾…åŠ©å‡½æ•° <a href="https://hexo.io/docs/helpers.html#paginator" target="_blank" rel="external"><code>paginator</code></a>ï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ’å…¥åˆ†é¡µé“¾æ¥ã€‚</p>
<h2 id="æ·»åŠ æ–‡ç« è¯¦æƒ…é¡µ"><a href="#æ·»åŠ æ–‡ç« è¯¦æƒ…é¡µ" class="headerlink" title="æ·»åŠ æ–‡ç« è¯¦æƒ…é¡µ"></a>æ·»åŠ æ–‡ç« è¯¦æƒ…é¡µ</h2><p>æ–‡ç« è¯¦æƒ…é¡µå¯¹åº”çš„å¸ƒå±€æ–‡ä»¶æ˜¯ <code>post.ejs</code>ï¼Œæ–°å»º <code>post.ejs</code>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-title"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">page.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-meta"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"post-time"</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span> <span class="attr">date</span>(<span class="attr">page.date</span>, "<span class="attr">YYYY-MM-DD</span>") %&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-content"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">%-</span> <span class="attr">page.content</span> %&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ç”±äºè¿™é‡Œæ˜¯æ–‡ç« çš„æ¨¡æ¿ï¼Œæ‰€ä»¥å˜é‡ <code>page</code> è¡¨ç¤ºçš„æ˜¯æ–‡ç« çš„æ•°æ®ï¼Œè€Œä¸æ˜¯é¦–é¡µçš„æ–‡ç« æ•°æ®é›†åˆã€‚</p>
<h2 id="æ·»åŠ å½’æ¡£é¡µ"><a href="#æ·»åŠ å½’æ¡£é¡µ" class="headerlink" title="æ·»åŠ å½’æ¡£é¡µ"></a>æ·»åŠ å½’æ¡£é¡µ</h2><p>åˆ›å»ºå½’æ¡£é¡µä½¿ç”¨çš„æ¨¡æ¿æ–‡ä»¶ <code>archive.ejs</code>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"archive"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"post-archive"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">%</span> <span class="attr">page.posts.each</span>(<span class="attr">function</span> (<span class="attr">post</span>) &#123; %&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"post-item"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"post-date"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">date</span>(<span class="attr">post.date</span>, "<span class="attr">YYYY-MM-DD</span>") %&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"post-title"</span> <span class="attr">href</span>=<span class="string">"&lt;%- url_for(post.path) %&gt;"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">post.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">%</span> &#125;) %&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>('<span class="attr">_partial</span>/<span class="attr">paginator</span>') %&gt;</span></div></pre></td></tr></table></figure>
<p>å…¶å®ç»“æ„è·Ÿé¦–é¡µå·®ä¸å¤šï¼Œåªæ˜¯ä¸æ˜¾ç¤ºæ–‡ç« å†…å®¹è€Œå·²ã€‚æ·»åŠ å½’æ¡£é¡µçš„æ ·å¼ï¼š</p>
<p><code>css/_partial/archive.styl</code>:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.archive</span> &#123;</div><div class="line">  <span class="attribute">margin</span>: <span class="number">1em</span> auto;</div><div class="line">  <span class="attribute">padding</span>: <span class="number">30px</span> <span class="number">50px</span>;</div><div class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</div><div class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</div><div class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#ddd</span>;</div><div class="line"></div><div class="line">  <span class="selector-class">.post-archive</span> &#123;</div><div class="line">    <span class="attribute">list-style</span>: none;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="selector-class">.post-item</span> &#123;</div><div class="line">      <span class="attribute">margin</span>: <span class="number">5px</span> <span class="number">0</span>;</div><div class="line"></div><div class="line">      <span class="selector-class">.post-date</span> &#123;</div><div class="line">        <span class="attribute">display</span>: inline-block;</div><div class="line">        <span class="attribute">margin-right</span>: <span class="number">10px</span>;</div><div class="line">        <span class="attribute">color</span>: <span class="number">#BABABA</span>;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="selector-class">.post-title</span> &#123;</div><div class="line">        <span class="attribute">color</span>: <span class="number">#368CCB</span>;</div><div class="line">        <span class="attribute">text-decoration</span>: none;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å›½é™…åŒ–"><a href="#å›½é™…åŒ–" class="headerlink" title="å›½é™…åŒ–"></a>å›½é™…åŒ–</h2><p>è¿˜è®°å¾—æˆ‘ä»¬ä¸€å¼€å§‹åˆ›å»ºçš„ <code>languages</code> æ–‡ä»¶å¤¹å—ï¼Ÿæ²¡é”™ï¼Œå®ƒæ˜¯ç”¨æ¥æ·»åŠ å¤šç§è¯­è¨€ï¼Œç”¨äº i18n çš„ã€‚ç«™ç‚¹çš„è¯­è¨€è®¾ç½®ä¸ºç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­çš„ <code>language</code>ã€‚</p>
<p>å½“è¯¥å­—æ®µä¸ºç©ºæ—¶ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯ <code>languages/default.yml</code> è¿™ä¸ªæ–‡ä»¶ã€‚é‚£ä¹ˆç°åœ¨æˆ‘ä»¬æ¥æ·»åŠ è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å†³å®šä¸»é¢˜çš„é»˜è®¤è¯­è¨€æ˜¯è‹±æ–‡ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="attr">Menu:</span></div><div class="line"><span class="attr">  Home:</span> <span class="string">Home</span></div><div class="line"><span class="attr">  Archives:</span> <span class="string">Archives</span></div><div class="line"><span class="attr">  Github:</span> <span class="string">Github</span></div><div class="line"></div><div class="line"><span class="attr">Paginator:</span></div><div class="line"><span class="attr">  Prev:</span> <span class="string">Prev</span></div><div class="line"><span class="attr">  Next:</span> <span class="string">Next</span></div></pre></td></tr></table></figure>
<p>ç›®å‰æˆ‘ä»¬éœ€è¦ä¸»é¢˜æ ¹æ®é€‰æ‹©çš„è¯­è¨€è‡ªåŠ¨ä¿®æ”¹çš„æœ‰ä¸Šé¢è¿™äº›ï¼Œæ¥ç€æˆ‘ä»¬éœ€è¦ä¿®æ”¹ <code>header.ejs</code> ä¸ <code>paginator.ejs</code> è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼š</p>
<p><code>_partial/header.ejs</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"blog-title"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&lt;%- url_for() %&gt;"</span> <span class="attr">class</span>=<span class="string">"logo"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">config.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"navbar"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"menu"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">%</span> <span class="attr">for</span> (<span class="attr">name</span> <span class="attr">in</span> <span class="attr">theme.menu</span>) &#123; %&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"menu-item"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&lt;%- url_for(theme.menu[name]) %&gt;"</span> <span class="attr">class</span>=<span class="string">"menu-item-link"</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span> <span class="attr">__</span>('<span class="attr">Menu.</span>' + <span class="attr">name</span>) %&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>_partial/paginator.ejs</code>:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (<span class="attr">page.total</span> &gt;</span> 1)&#123; %&gt;</div><div class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"page-nav"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">%-</span> <span class="attr">paginator</span>(&#123;</span></div><div class="line"><span class="tag">      <span class="attr">prev_text:</span> "&amp;<span class="attr">laquo</span>;" + <span class="attr">__</span>('<span class="attr">Paginator.Prev</span>'),</span></div><div class="line"><span class="tag">      <span class="attr">next_text:</span> <span class="attr">__</span>('<span class="attr">Paginator.Next</span>') + "&amp;<span class="attr">raquo</span>;"</span></div><div class="line"><span class="tag">    &#125;) %&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></div></pre></td></tr></table></figure></p>
<p>ä¿®æ”¹ä¹‹åå…¶å®ä¸ä¹‹å‰ç›¸æ¯”æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œèµ·ç çœ‹èµ·æ¥æ˜¯ã€‚ç°åœ¨æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªä¸­æ–‡çš„æ–‡ä»¶ï¼š</p>
<p><code>languages/zh-CN.yml</code><br><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="attr">Menu:</span></div><div class="line"><span class="attr">  Home:</span> <span class="string">é¦–é¡µ</span></div><div class="line"><span class="attr">  Archives:</span> <span class="string">å½’æ¡£</span></div><div class="line"><span class="attr">  Github:</span> <span class="string">äº¤å‹</span></div><div class="line"></div><div class="line"><span class="attr">Paginator:</span></div><div class="line"><span class="attr">  Prev:</span> <span class="string">ä¸Šä¸€é¡µ</span></div><div class="line"><span class="attr">  Next:</span> <span class="string">ä¸‹ä¸€é¡µ</span></div></pre></td></tr></table></figure></p>
<p>ç„¶åæˆ‘ä»¬å°†ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­çš„ <code>language</code> å­—æ®µä¿®æ”¹ä¸º <code>zh-CN</code>ï¼ˆä¸ <code>zh-CN.yml</code> æ–‡ä»¶åç›¸åŒï¼‰ã€‚å†æ¬¡è®¿é—®ç«™ç‚¹ä¹‹åå°±ä¼šå‘ç°å¯¼èˆªä¸åˆ†é¡µéƒ¨åˆ†çš„æ–‡å­—å˜æˆäº†ä¸­æ–‡ã€‚</p>
<h2 id="æœ€åæ€»ç»“"><a href="#æœ€åæ€»ç»“" class="headerlink" title="æœ€åæ€»ç»“"></a>æœ€åæ€»ç»“</h2><p>å¦‚æœä½ æœ‰è€å¿ƒçœ‹æˆ‘åºŸè¯äº†è¿™ä¹ˆå¤šçš„è¯ï¼Œæ­å–œä½ ï¼Œä½ åº”è¯¥å¯¹æ€ä¹ˆå»å†™ä¸€ä¸ª Hexo ä¸»é¢˜æœ‰äº†ä¸€å®šçš„äº†è§£ã€‚å…¶å®è¯´ç™½äº†ï¼ŒHexo å°±æ˜¯æŠŠé‚£äº› Markdown æ–‡ä»¶æŒ‰ç…§ä¸åŒçš„å¸ƒå±€æ¨¡æ¿ï¼Œå¡«ä¸Šå¯¹åº”çš„æ•°æ®ç”Ÿæˆ HTML é¡µé¢ï¼Œå¤åˆ¶ <code>source</code> ä¸­çš„åˆ°ç”Ÿæˆçš„ <code>public</code> æ–‡ä»¶å¤¹ä¸­ï¼Œä¸­é—´è¿‡ç¨‹ä¼šæŠŠéœ€è¦ç¼–è¯‘çš„ stylus/less/sass ç­‰æ–‡ä»¶ç¼–è¯‘ã€‚</p>
<p>æœ¬æ–‡å¹¶æ²¡æœ‰æåŠæœ‰å…³é¡µé¢ JavaScript çš„éƒ¨åˆ†ï¼Œå®é™…ä¸Šä¸å†™ CSS æ ·å¼ç›¸åŒã€‚åœ¨ <code>source/js</code> ä¸­å†™ JavaScript è„šæœ¬ï¼Œç„¶ååœ¨æ¨¡æ¿ä¸­å¼•å…¥å³å¯ã€‚</p>
<p>æ„Ÿè°¢é˜…è¯»ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;a href=&quot;#å†™åœ¨å‰é¢&quot; class=&quot;headerlink&quot; title=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;/a&gt;å†™åœ¨å‰é¢&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡å°†ä¼šä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªç®€å•çš„åšå®¢ä¸»é¢˜ã€‚æ ·å¼ä¸»è¦å‚è€ƒ &lt;a href=&quot;https://hexo.io/themes/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo theme&lt;/a&gt; ä¸­çš„ &lt;a href=&quot;https://github.com/lotabout/hexo-theme-noise&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Noise&lt;/a&gt; ä¸»é¢˜ã€‚ &lt;/p&gt;
&lt;p&gt;å¼€å§‹ä¹‹å‰ä½ éœ€è¦äº†è§£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¨¡æ¿å¼•æ“&lt;/li&gt;
&lt;li&gt;CSSé¢„å¤„ç†å™¨&lt;/li&gt;
&lt;li&gt;Hexo æ–‡æ¡£&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ¬æ–‡ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“ä¸º &lt;a href=&quot;http://www.embeddedjs.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ejs&lt;/a&gt;ï¼Œä½¿ç”¨çš„ CSS é¢„å¤„ç†å™¨ä¸º &lt;a href=&quot;http://stylus-lang.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;stylus&lt;/a&gt;ã€‚è¿™ä¹Ÿæ˜¯ hexo é¡¹ç›®é¢„è£…äº†çš„ render æ’ä»¶ï¼Œå¦‚æœæƒ³ä½¿ç”¨å…¶ä»–æ¨¡æ¿å¼•æ“æˆ–è€…å…¶ä»– CSS é¢„å¤„ç†å™¨ï¼Œå¯ä»¥å®‰è£…ç›¸å¯¹åº”çš„ render æ’ä»¶ã€‚ä¾‹å¦‚æˆ‘çš„ &lt;a href=&quot;https://github.com/ahonn/hexo-theme-even&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Even&lt;/a&gt; ä¸»é¢˜ä½¿ç”¨çš„æ˜¯ Swig ä¸ SCSSã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡çš„ä»£ç ï¼š &lt;a href=&quot;https://github.com/ahonn/theme-example&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;theme-example&lt;/a&gt; ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ€è€ƒæ€»ç»“" scheme="http://www.ahonn.me/categories/thinking/"/>
    
    
      <category term="å‰ç«¯" scheme="http://www.ahonn.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="Hexo" scheme="http://www.ahonn.me/tags/Hexo/"/>
    
      <category term="ä»é›¶å¼€å§‹" scheme="http://www.ahonn.me/tags/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    
  </entry>
  
  <entry>
    <title>2016 å¹´ç»ˆæ€»ç»“</title>
    <link href="http://www.ahonn.me/2016/12/13/2016-summary/"/>
    <id>http://www.ahonn.me/2016/12/13/2016-summary/</id>
    <published>2016-12-13T03:23:09.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€è½¬çœ¼ 2016 å¹´å°±å¿«è¦ç»“æŸäº†ï¼Œè¿™ä¸€å¹´å¯¹è‡ªå·±æ¥è¯´æ”¶è·äº†å¾ˆå¤šã€‚</p>
<p>å»å¹´çš„æ€»ç»“ï¼Œç»™è‡ªå·±å®šä¸‹äº†ä¸ª 2016 å¹´çš„è®¡åˆ’ã€‚ç°åœ¨ 2016 ä¹Ÿå·®ä¸å¤šå¿«ç»“æŸäº†ï¼Œæˆ‘å¯¹è‡ªå·±æ‰§è¡Œçš„æƒ…å†µè¿˜æ˜¯æ¯”è¾ƒæ»¡æ„çš„ã€‚</p>
<h2 id="å…³äº-Github"><a href="#å…³äº-Github" class="headerlink" title="å…³äº Github"></a>å…³äº Github</h2><p>å»å¹´å¹´åº•å‚åŠ äº† Github ä¸Šçš„ä¸€ä¸ªç¼–ç¨‹é©¬æ‹‰æ¾ï¼Œä¸€å¼€å§‹ commit éƒ½æ˜¯æ²¡æœ‰æ–­è¿‡çš„ï¼Œä½†æ˜¯ä¹‹åæ…¢æ…¢çš„æ€»ä¼šæœ‰æŠ“è„‘è¢‹æƒ³ commit çš„çŠ¶å†µå‡ºç°ã€‚ä¸èƒ½è¯´è¿™æ ·ä¸å¥½ï¼Œåªä¸è¿‡ä¼šè®©è‡ªå·±ä¸ºäº† commit è€Œ commitï¼Œæœ¬æœ«å€’ç½®äº†ã€‚æ‰€ä»¥åé¢å°±ä¸å†ç®¡æ˜¯å¦è¿ç»­ commit äº†ï¼Œä¹ŸæŠŠä¹‹å‰å‡ ä¸ªè‡ªå·±è§‰å¾—ä¸è¡Œçš„é¡¹ç›®ç»™åˆ é™¤äº†ã€‚è´´ä¸€å¼ ä»Šå¹´ Github ä¸Šçš„ commit å›¾ï¼Œè™½ç„¶è¿˜æ˜¯æœ‰å¾ˆå¤šè´¨é‡ä¸é«˜çš„æäº¤ï¼Œä½†ä¹Ÿç®—æ˜¯ä»Šå¹´å¯¹è‡ªå·±çš„ä»˜å‡ºçš„ä¸€ç‚¹äº¤ä»£äº†ã€‚</p>
<p><a href="http://ouv0frko5.bkt.clouddn.com/y8uvm.jpg" target="_blank" rel="external">Github Commit</a></p>
<a id="more"></a>
<p>å¤§å¤šæ•°çš„æäº¤éƒ½è´¡çŒ®è‡ª <a href="https://github.com/ahonn/hexo-theme-even" target="_blank" rel="external">hexo-theme-even</a> è¿™ä¸ªé¡¹ç›®ã€‚æ”¾å‡åœ¨å®¶çš„æ—¶å€™çªç„¶æƒ³è‡ªå·±å†™ä¸ªåšå®¢çš„ä¸»é¢˜ï¼Œç»“æœè¯´å¹²å°±å¹²ï¼Œå°±å†™èµ·æ¥äº†ã€‚åˆ°ç›®å‰ä¸ºæ­¢å·²ç»é‡æ„äº†ä¸¤éäº†ï¼Œæ¯ä¸€æ¬¡éƒ½èƒ½å¤Ÿå‘ç°ä¹‹å‰å†™çš„ä¸å¥½çš„åœ°æ–¹ã€‚ä¸è¿‡åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æ˜ç™½äº†ä¸€ç‚¹ï¼Œä¸èƒ½ä¸ºäº†å†™ä»£ç è€Œå†™ä»£ç ï¼Œåº”è¯¥æ›´åŠ å…³æ³¨ç”¨æˆ·ä½“éªŒã€‚ä¹‹å‰å†™çš„æ—¶å€™å®Œå…¨æ˜¯è‡ªå·±èƒ½ç”¨å°±å¥½çš„ï¼Œåæ¥ä½¿ç”¨çš„äººè¶Šæ¥è¶Šå¤šäº†ï¼Œå°±éœ€è¦å…³æ³¨ä¸€äº›ä¹‹å‰è‡ªå·±ä¸ä¼šå…³æ³¨åˆ°çš„ç‚¹ã€‚</p>
<p>æ›´æ·±åˆ»çš„ä½“ä¼šåˆ°ï¼Œè®¾è®¡ä¸è§„åˆ’åº”è¯¥å åˆ°çš„æ¯”é‡åº”è¯¥è¿œè¿œå¤§äºç¼–ç çš„æ¯”é‡ã€‚è¿™å°±å¥½æ¯”ç›–æˆ¿å­ï¼Œä¸€è‚¡è„‘çš„æ¬ç –ç›–æœ€åå¯èƒ½ç›–å‡ºæ¥çš„æ˜¯æ­ªæ¥¼ã€‚</p>
<h2 id="å…³äºå®ä¹ "><a href="#å…³äºå®ä¹ " class="headerlink" title="å…³äºå®ä¹ "></a>å…³äºå®ä¹ </h2><p>æš‘å‡çš„æ—¶å€™æ²¡æœ‰å›å®¶ï¼Œæ‰¾äº†ä¸€ä¸ªæŠ€æœ¯ç›¸å…³çš„æš‘å‡å®ä¹ ã€‚å½“ç„¶ï¼Œæ‰€è°“æš‘å‡å®ä¹ å°±æ˜¯æ‰“æ‰“ä¸‹æ‰‹å’¯ã€‚ä¸è¿‡æœŸé—´ä¹Ÿå‚ä¸äº†ä¸ªå¾ˆæœ‰æ„æ€çš„é¡¹ç›®ï¼Œä¸è¿‡å› ä¸ºæ˜¯æ¯”è¾ƒåé‡åç«¯çš„å…¬å¸ï¼ˆä½¿ç”¨çš„å¤§å¤šæ˜¯ Rubyï¼‰ï¼Œæ‰€ä»¥å‰ç«¯éƒ¨åˆ†éƒ½æ˜¯è‡ªå·±æŠ˜è…¾ï¼Œæ²¡æœ‰å­¦åˆ°ä»€ä¹ˆä¸œè¥¿ã€‚</p>
<p>åœ¨å®ä¹ æœŸé—´ä¹Ÿå­¦åˆ°äº†éå¸¸å¤šçš„ä¸œè¥¿ï¼Œæ¯”å¦‚è¯´æ€ä¹ˆä½¿ç”¨ git è¿›è¡Œå›¢é˜Ÿåä½œï¼Œå†™é¡µé¢çš„æ—¶å€™è¦æ³¨é‡ç”¨æˆ·ä½“éªŒï¼Œä¸€ä¸ªæŒ‰é’®æˆ–è€…ä¸€ä¸ªæ–‡æœ¬çš„ä½ç½®éƒ½éœ€è¦æ…é‡æ€è€ƒã€‚ç”±äºå…¬å¸æ¯”è¾ƒå°ï¼Œæ„Ÿå—ä¸åˆ°æ¯”è¾ƒæµ“åšçš„æŠ€æœ¯æ°”æ°›ã€‚æ‰€ä»¥å¸Œæœ›å¤§ä¸‰ç»“æŸçš„è¿™ä»½å®ä¹ èƒ½å¤Ÿæ‰¾åˆ°è‡ªå·±æ‰€æœŸæœ›çš„é‚£æ ·æŠ€æœ¯æ°”æ°›æµ“åšçš„å…¬å¸æ¥å®ä¹ ã€‚</p>
<h2 id="å…³äºè¯»ä¹¦"><a href="#å…³äºè¯»ä¹¦" class="headerlink" title="å…³äºè¯»ä¹¦"></a>å…³äºè¯»ä¹¦</h2><p>æš‘å‡å®ä¹ çš„æ—¶å€™ç”±äºæ˜¯ä¸€ä¸ªäººä½ï¼Œæ¯å¤©ä¸Šä¸‹ç­éƒ½è¦åœ¨åœ°é“ä¸ŠèŠ±è´¹ä¸€ä¸ªå¤šé’Ÿçš„æ—¶é—´ã€‚æ‰€ä»¥åœ¨ä¸€å¼€å§‹çš„æ—¶å€™å°±ç”¨äº†äº¬ä¸œç™½æ¡é¢„å…ˆä¹°äº†ä¸ª Kindleï¼Œç„¶ååœ¨å®ä¹ çš„è¿™æ®µæ—¶é—´é‡Œçœ‹å®Œäº†ã€Šä¹”å¸ƒæ–¯ä¼ ã€‹ï¼Œã€Šè§£å¿§æ‚è´§åº—ã€‹ï¼Œã€Šäººæ€§çš„å¼±ç‚¹ã€‹ä»¥åŠã€Šå®‰é™ã€‹ã€‚å…³äºè¯»ä¹¦ï¼Œæƒ³èµ·äº†ä¸€ä¸ªçŸ¥ä¹ä¸Šçš„ä¸€ä¸ªå›ç­”ï¼š<a href="https://www.zhihu.com/question/22456239/answer/45671305" target="_blank" rel="external">è¯»äº†å¾ˆå¤šä¹¦ï¼Œä½†æ˜¯éƒ½å¿˜æ‰äº†ï¼Œè¯»ä¹¦çš„æ„ä¹‰åœ¨å“ªé‡Œï¼Ÿ - å°§å¤§åŠ›çš„å›ç­” - çŸ¥ä¹</a>ï¼Œæ·±ä»¥ä¸ºç„¶ã€‚è¯»ä¹¦å¯¹æˆ‘çš„å½±å“è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œä¼šæ”¹å˜å¯¹äº‹ç‰©çš„çœ‹æ³•ã€‚ä¸æ˜¯æœ‰å¥è¯è¯´ï¼Œè¯»ä¸‡å·ä¹¦ï¼Œè¡Œä¸‡é‡Œè·¯ã€‚æ‰€ä»¥è¦å¤šè¯»ä¹¦ï¼Œä»¥åæœ‰æœºä¼šçš„è¯ä¹Ÿè¦å¤šå‡ºå»èµ°èµ°ã€‚</p>
<p>é™¤äº†çœ‹è¿™äº›ä¹¦ä¹‹å¤–ï¼Œä¹Ÿçœ‹äº†ä¸€äº›æŠ€æœ¯æ€§çš„ä¹¦ç±ã€‚å®ä¹ ä¹‹å‰çœ‹äº†æœ¬ã€Šæ·±å…¥ç†è§£ bootstrapã€‹ï¼Œè¿™ä¸ªåœ¨æˆ‘å®ä¹ çš„æ—¶å€™ç”¨ bootstrap çš„æ—¶å€™æœ‰å¾ˆå¤§å¸®åŠ©ã€‚è¿˜æœ‰ä¸€äº› JavaScript ç›¸å…³çš„ä¹¦ï¼Œé«˜ç¨‹ä¸‰æ‰“ç®—åœ¨å¤§ä¸‰å®ä¹ ä¹‹å‰å†åˆ·å¤šä¸€æ¬¡ã€‚</p>
<p>æœ‰ç‚¹å°é—æ†¾çš„æ˜¯ï¼Œæˆ‘ä¾æ—§æ²¡æœ‰çœ‹å®Œ SICPï¼ˆStructure and Interpretation of Computer Programs<br>ï¼‰ï¼Œçœ‹äº†å‰ä¸¤ç« å°±æ²¡æœ‰çœ‹äº†ã€‚æ‰€ä»¥æ˜å¹´çš„è®¡åˆ’é‡Œé¢ä¼šåŠ ä¸Šçœ‹å®Œè¿™æœ¬ä¹¦ã€‚æ­¤å¤–ï¼ŒåŒåä¸€çš„æ—¶å€™ä¹Ÿä¹°äº†å¥½å‡ æœ¬æŠ€æœ¯ç±»ä¹¦ç±ï¼Œå…¶å®éƒ½æ˜¯ä¸ºäº†åˆ°æ—¶å€™é¢è¯•è€Œå‡†å¤‡çš„ï¼Œæ­£å¥½ä¹Ÿæ˜¯éœ€è¦è¡¥è¡¥åŸºç¡€ã€‚å…¶å®æ›´å…³é”®çš„ä¸€ç‚¹æ˜¯å¤ªç©·åªèƒ½ä¹°ä¹¦äº†â€¦</p>
<h2 id="å…³äºç”Ÿæ´»"><a href="#å…³äºç”Ÿæ´»" class="headerlink" title="å…³äºç”Ÿæ´»"></a>å…³äºç”Ÿæ´»</h2><p>ä»Šå¹´å›å®¶çš„æ—¶é—´æ¯”è¾ƒå°‘ï¼Œå‰åŠå¹´åœ¨å­¦æ ¡ï¼ŒååŠå¹´åœ¨å­¦æ ¡ï¼Œä¸­é—´å®ä¹ åœ¨å¹¿å·ä¸€ä¸ªäººä½ã€‚ç¬¬ä¸€æ¬¡ç¦»å®¶è¿˜æ˜¯ä¸€ä¸ªäººç”Ÿæ´»ï¼Œè®©æˆ‘è¿™æ ·ä¸€ä¸ªä¸ä¼šç…§é¡¾è‡ªå·±çš„äººä¹Ÿæ…¢æ…¢çš„å­¦ä¼šäº†ç…§é¡¾è‡ªå·±ã€‚åŒæ—¶ä¹Ÿæ˜ç™½äº†å¾ˆå¤šäº‹æƒ…ï¼Œä¸€ä¸ªäººçš„æ—¶å€™è¦å¥½å¥½çš„ï¼Œä¸èƒ½è®©çˆ¶æ¯æ‹…å¿ƒã€‚</p>
<h2 id="å…³äºæ¥å¹´"><a href="#å…³äºæ¥å¹´" class="headerlink" title="å…³äºæ¥å¹´"></a>å…³äºæ¥å¹´</h2><p>2018 å¹´å°±æ­£å¼æ¯•ä¸šäº†ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å­¦æ ¡çš„æ—¶é—´ä¸å¤šäº†ï¼Œå¸Œæœ›è‡ªå·±èƒ½å¥½å¥½è¿‡å®Œè¿™æœ€åçš„å­¦ç”Ÿæ—¶å…‰ã€‚</p>
<p>æ— ä¾‹å¤–ï¼Œä»Šå¹´çš„æ€»ç»“ä¹Ÿè¦å¯¹æ–°çš„ä¸€å¹´åˆ—ä¸ªè®¡åˆ’ã€‚</p>
<ul>
<li>ç»§ç»­å¥½å¥½ç»´æŠ¤åšå®¢ä¸»é¢˜</li>
<li>å®Œæˆ leetcode ä¸Šçš„å‰ 150 é“é¢˜ç›®</li>
<li>è¯»å®Œä¹°çš„é‚£äº›ä¹¦ï¼ŒåŒ…æ‹¬ä¸é™äºé«˜ç¨‹ä¸‰ï¼ŒSICP</li>
<li>å†™è‡ªå·±çš„ç®€å†ç½‘ç«™</li>
<li>å¤šè¿åŠ¨ï¼Œä¹…åå¯¹èº«ä½“ä¸å¥½</li>
<li>æœ‰æœºä¼šå¤šå‡ºå»èµ°èµ°</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€è½¬çœ¼ 2016 å¹´å°±å¿«è¦ç»“æŸäº†ï¼Œè¿™ä¸€å¹´å¯¹è‡ªå·±æ¥è¯´æ”¶è·äº†å¾ˆå¤šã€‚&lt;/p&gt;
&lt;p&gt;å»å¹´çš„æ€»ç»“ï¼Œç»™è‡ªå·±å®šä¸‹äº†ä¸ª 2016 å¹´çš„è®¡åˆ’ã€‚ç°åœ¨ 2016 ä¹Ÿå·®ä¸å¤šå¿«ç»“æŸäº†ï¼Œæˆ‘å¯¹è‡ªå·±æ‰§è¡Œçš„æƒ…å†µè¿˜æ˜¯æ¯”è¾ƒæ»¡æ„çš„ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å…³äº-Github&quot;&gt;&lt;a href=&quot;#å…³äº-Github&quot; class=&quot;headerlink&quot; title=&quot;å…³äº Github&quot;&gt;&lt;/a&gt;å…³äº Github&lt;/h2&gt;&lt;p&gt;å»å¹´å¹´åº•å‚åŠ äº† Github ä¸Šçš„ä¸€ä¸ªç¼–ç¨‹é©¬æ‹‰æ¾ï¼Œä¸€å¼€å§‹ commit éƒ½æ˜¯æ²¡æœ‰æ–­è¿‡çš„ï¼Œä½†æ˜¯ä¹‹åæ…¢æ…¢çš„æ€»ä¼šæœ‰æŠ“è„‘è¢‹æƒ³ commit çš„çŠ¶å†µå‡ºç°ã€‚ä¸èƒ½è¯´è¿™æ ·ä¸å¥½ï¼Œåªä¸è¿‡ä¼šè®©è‡ªå·±ä¸ºäº† commit è€Œ commitï¼Œæœ¬æœ«å€’ç½®äº†ã€‚æ‰€ä»¥åé¢å°±ä¸å†ç®¡æ˜¯å¦è¿ç»­ commit äº†ï¼Œä¹ŸæŠŠä¹‹å‰å‡ ä¸ªè‡ªå·±è§‰å¾—ä¸è¡Œçš„é¡¹ç›®ç»™åˆ é™¤äº†ã€‚è´´ä¸€å¼ ä»Šå¹´ Github ä¸Šçš„ commit å›¾ï¼Œè™½ç„¶è¿˜æ˜¯æœ‰å¾ˆå¤šè´¨é‡ä¸é«˜çš„æäº¤ï¼Œä½†ä¹Ÿç®—æ˜¯ä»Šå¹´å¯¹è‡ªå·±çš„ä»˜å‡ºçš„ä¸€ç‚¹äº¤ä»£äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://ouv0frko5.bkt.clouddn.com/y8uvm.jpg&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Github Commit&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æ€è€ƒæ€»ç»“" scheme="http://www.ahonn.me/categories/thinking/"/>
    
    
      <category term="å¹´ç»ˆæ€»ç»“" scheme="http://www.ahonn.me/tags/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript åˆ›å»ºå¯¹è±¡çš„ä¸€äº›å§¿åŠ¿</title>
    <link href="http://www.ahonn.me/2016/11/30/some-ways-of-javascript-create-object/"/>
    <id>http://www.ahonn.me/2016/11/30/some-ways-of-javascript-create-object/</id>
    <published>2016-11-30T10:52:21.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h2><p>åœ¨å‡½æ•°ä¸­åˆ›å»º Object å¯¹è±¡ï¼Œå¹¶ä¸ºå¯¹è±¡æ·»åŠ å±æ€§ã€‚å‡½æ•°è¿”å›æ·»åŠ å±æ€§ä¹‹åçš„å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name, age</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>()</div><div class="line">  o.name = name</div><div class="line">  o.age = age</div><div class="line">  o.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> o</div><div class="line">&#125; </div><div class="line"></div><div class="line"><span class="keyword">var</span> p = createPerson(<span class="string">"ahonn"</span>, <span class="number">21</span>)</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>ä½†å·¥å‚æ¨¡å¼äº§ç”Ÿçš„å¯¹è±¡ä¾æ—§ä¸º Object ç±»å‹ï¼Œåªæ˜¯åœ¨å¯¹è±¡ä¸Šæ·»åŠ äº†ä¸€äº›å±æ€§ã€‚</p>
<blockquote>
<p>å·¥å‚æ¨¡å¼è™½ç„¶è§£å†³äº†åˆ›å»ºå¤šä¸ªç›¸ä¼¼å¯¹è±¡çš„é—®é¢˜ï¼Œä½†å´æ²¡æœ‰è§£å†³å¯¹è±¡è¯†åˆ«çš„é—®é¢˜ï¼ˆå³æ€æ ·çŸ¥é“ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹ï¼‰</p>
</blockquote>
<h2 id="æ„é€ å‡½æ•°æ¨¡å¼"><a href="#æ„é€ å‡½æ•°æ¨¡å¼" class="headerlink" title="æ„é€ å‡½æ•°æ¨¡å¼"></a>æ„é€ å‡½æ•°æ¨¡å¼</h2><p>ç”±äºå·¥å‚æ¨¡å¼åˆ›å»ºçš„å¯¹è±¡æ²¡æœ‰è§£å†³å¯¹è±¡è¯†åˆ«çš„é—®é¢˜ï¼Œå‡ºç°äº†å¦å¤–ä¸€ç§æ–°æ¨¡å¼ï¼šæ„é€ å‡½æ•°æ¨¡å¼ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.age = age</div><div class="line">  <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">"ahonn"</span>, <span class="number">21</span>)</div></pre></td></tr></table></figure>
<p>è¿™é‡Œä½¿ç”¨äº† <code>new</code> æ“ä½œç¬¦ï¼Œå³æ˜¯å°† Person å‡½æ•°é€šè¿‡æ„é€ å‡½æ•°çš„æ–¹å¼å»è°ƒç”¨æ¥åˆ›å»ºå¯¹è±¡ã€‚</p>
<p>æ„é€ å‡½æ•°ä¼šè¿›è¡Œä¸‹é¢å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</li>
<li>å°†æ„é€ å‡½æ•°çš„ this æŒ‡å‘æ–°å¯¹è±¡</li>
<li>é€šè¿‡ this ç»™å¯¹è±¡æ·»åŠ å±æ€§</li>
<li>è¿”å›æ–°å¯¹è±¡</li>
</ul>
<p>ä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼åˆ›å»ºçš„å¯¹è±¡å¯ä»¥é€šè¿‡ <code>constructor</code> å±æ€§æŸ¥çœ‹å¯¹è±¡çš„ç±»å‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(p.constructor) <span class="comment">// Person</span></div></pre></td></tr></table></figure>
<h3 id="æ„é€ å‡½æ•°ä¹Ÿæ˜¯æ™®é€šå‡½æ•°"><a href="#æ„é€ å‡½æ•°ä¹Ÿæ˜¯æ™®é€šå‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°ä¹Ÿæ˜¯æ™®é€šå‡½æ•°"></a>æ„é€ å‡½æ•°ä¹Ÿæ˜¯æ™®é€šå‡½æ•°</h3><p>æ„é€ å‡½æ•°ä¸æ™®é€šçš„å‡½æ•°æ— å¼‚ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°ã€‚ä½†æ­¤æ—¶å°±ä¸ä¼šåˆ›å»ºæ–°å¯¹è±¡ï¼Œå‡½æ•°ä¸­çš„ this æŒ‡å‘çš„æ˜¯å‡½æ•°å½“å‰æ‰€åœ¨çš„ä½œç”¨åŸŸã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Person(<span class="string">"ahonn"</span>, <span class="number">21</span>)</div><div class="line"><span class="keyword">this</span>.sayName() <span class="comment">// ahonn</span></div></pre></td></tr></table></figure>
<h2 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h2><p>é€šè¿‡æ„é€ å‡½æ•°æ¨¡å¼åˆ›å»ºçš„å¯¹è±¡æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åˆ›å»ºçš„å¯¹è±¡å„è‡ªæ‹¥æœ‰è‡ªå·±çš„æ–¹æ³•ï¼Œè€Œå®é™…ä¸Šè¿™äº›æ–¹æ³•éƒ½æ˜¯ç›¸åŒçš„ã€‚é€šè¿‡åŸå‹æ¨¡å¼å³å¯ä»¥å°†å…±åŒçš„å±æ€§æ–¹æ³•æ”¾åœ¨ prototype ä¸Šã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"></div><div class="line">Person.prototype.name = <span class="string">"ahonn"</span></div><div class="line">Person.prototype.age = <span class="number">21</span></div><div class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person()</div><div class="line">p1.sayName() <span class="comment">// "ahonn"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person()</div><div class="line">p2.sayName() <span class="comment">// "ahonn"</span></div></pre></td></tr></table></figure>
<p>å¯¹è±¡åœ¨ prototype ä¸Šçš„å±æ€§æ˜¯å…±äº«çš„ï¼Œå³ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§ï¼Œå¦ä¸€ä¸ªå¯¹è±¡å¯¹äºçš„å±æ€§å€¼ä¹Ÿä¼šæ”¹å˜ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">p1.name = <span class="string">"test"</span></div><div class="line">p1.sayName() <span class="comment">// test</span></div><div class="line"></div><div class="line">p2.sayName() <span class="comment">// test</span></div></pre></td></tr></table></figure>
<h2 id="æ„é€ å‡½æ•°ä¸åŸå‹æ¨¡å¼"><a href="#æ„é€ å‡½æ•°ä¸åŸå‹æ¨¡å¼" class="headerlink" title="æ„é€ å‡½æ•°ä¸åŸå‹æ¨¡å¼"></a>æ„é€ å‡½æ•°ä¸åŸå‹æ¨¡å¼</h2><p>ä½¿ç”¨åŸå‹æ¨¡å¼åˆ›å»ºçš„å¯¹è±¡å…±äº« prototype ä¸Šçš„å±æ€§ï¼Œé‚£ä¹ˆå½“æœ‰äº›å±æ€§ä¸æƒ³è¦å¯¹è±¡ä¹‹é—´å…±äº«çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç»“åˆæ„é€ å‡½æ•°æ¨¡å¼ä¸åŸå‹æ¨¡å¼æ¥ä½¿ç”¨ã€‚è¿™ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.age = age</div><div class="line">&#125;</div><div class="line"></div><div class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span>  p1 = <span class="keyword">new</span> Person(<span class="string">"ahonn"</span>, <span class="number">21</span>)</div><div class="line">p1.sayName() <span class="comment">// "ahonn"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">"test"</span>, <span class="number">12</span>)</div><div class="line">p2.sayName() <span class="comment">// "test"</span></div></pre></td></tr></table></figure>
<h2 id="ES6-ç±»"><a href="#ES6-ç±»" class="headerlink" title="ES6 ç±»"></a>ES6 ç±»</h2><p>åœ¨ ES6 ä¸­æœ‰ç±»ä¼¼äº Java åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼Œå³é€šè¿‡ç±»æ¥åˆ›å»ºå¯¹è±¡ã€‚ES6 ä¸­æä¾›äº† <code>class</code> å…³é”®å­—ï¼Œæ¥å£°æ˜ä¸€ä¸ªç±»å‹ï¼Œå¹¶å¦‚ä¸Šé¢æ„é€ å‡½æ•°æ¨¡å¼çš„æ–¹å¼ä¸€æ ·ä½¿ç”¨ <code>new</code> æ¥å£°æ˜å¯¹è±¡ã€‚è™½ç„¶å¯ä»¥ä½¿ç”¨ç±»ä¼¼ Java ä¸­çš„ <code>class</code> æ¥å£°æ˜ï¼Œä½†å®é™…ä¸Šåªæ˜¯ç»™æ„é€ å‡½æ•°ä¸åŸå‹æ¨¡å¼åŠ ä¸Šäº†è¯­æ³•ç³–ï¼Œä½¿å¾—ä»£ç çœ‹èµ·æ¥æ›´åŠ æ˜“è¯»ã€‚</p>
<p>è¿˜æ˜¯ Person ç±»çš„ä¾‹å­<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(name, age) &#123;</div><div class="line">    <span class="keyword">this</span>.name = name</div><div class="line">    <span class="keyword">this</span>.age = age</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  sayName() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">"ahonn"</span>, <span class="number">21</span>)</div><div class="line">p.sayName() <span class="comment">// "ahonn"</span></div></pre></td></tr></table></figure></p>
<p>é€šè¿‡ <code>class</code> å…³é”®å­—å£°æ˜ Person ç±»ï¼Œ<code>constructor</code> å‡½æ•°å³ä¸º Person ç±»çš„æ„é€ å‡½æ•°ï¼Œç±»å±æ€§çš„åˆå§‹åŒ–ä¹Ÿåœ¨å…¶ä¸­ã€‚éœ€è¦åœ¨å„ä¸ªå¯¹è±¡ä¸­å…±äº«çš„æ–¹æ³•ä¹Ÿå†™åœ¨ <code>class</code> ä¸­ï¼Œé¿å…äº†åŸæ¥å®šä¹‰åœ¨ <code>prototype</code> ä¸Šæ—¶çš„æ’•è£‚æ„Ÿã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å·¥å‚æ¨¡å¼&quot;&gt;&lt;a href=&quot;#å·¥å‚æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;å·¥å‚æ¨¡å¼&quot;&gt;&lt;/a&gt;å·¥å‚æ¨¡å¼&lt;/h2&gt;&lt;p&gt;åœ¨å‡½æ•°ä¸­åˆ›å»º Object å¯¹è±¡ï¼Œå¹¶ä¸ºå¯¹è±¡æ·»åŠ å±æ€§ã€‚å‡½æ•°è¿”å›æ·»åŠ å±æ€§ä¹‹åçš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;createPerson&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;name, age&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; o = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Object&lt;/span&gt;()&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  o.name = name&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  o.age = age&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  o.sayName = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.name)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; o&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; p = createPerson(&lt;span class=&quot;string&quot;&gt;&quot;ahonn&quot;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;21&lt;/span&gt;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯æ–‡ç« " scheme="http://www.ahonn.me/categories/technology/"/>
    
    
      <category term="å‰ç«¯" scheme="http://www.ahonn.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="JavaScript" scheme="http://www.ahonn.me/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript æ•°æ®ç±»å‹åˆ¤æ–­</title>
    <link href="http://www.ahonn.me/2016/11/21/javascript-data-type-judgment/"/>
    <id>http://www.ahonn.me/2016/11/21/javascript-data-type-judgment/</id>
    <published>2016-11-21T07:07:49.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å¼€å§‹è¯»ä¹‹å‰æ²¡æœ‰è¯»å®Œçš„ underscore çš„æºç ï¼ŒåˆšæŠŠ Object éƒ¨åˆ†è¯»å®Œã€‚å¯¹ JavaScript ä¸­ç±»å‹åˆ¤æ–­éƒ¨åˆ†çš„æ€»ç»“ã€‚</p>
<h2 id="Object-prototype-toString"><a href="#Object-prototype-toString" class="headerlink" title="Object.prototype.toString()"></a>Object.prototype.toString()</h2><p>åœ¨è¿›è¡Œç±»å‹åˆ¤æ–­æ—¶ï¼Œä½¿ç”¨åˆ°æœ€å¤šçš„å½“å± <code>Object.prototype.toString()</code>ã€‚</p>
<p><code>toString()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªä»£è¡¨è¯¥å¯¹è±¡çš„å­—ç¬¦ä¸²ã€‚æ¯ä¸ªå¯¹è±¡éƒ½ä¼šç»§æ‰¿ Object ä¸Šçš„ <code>toString</code> æ–¹æ³•ï¼Œå¦‚æœè¯¥æ–¹æ³•æ²¡æœ‰è¢«åŒåæ–¹æ³•è¦†ç›–çš„è¯ã€‚ä½¿ç”¨ <code>toString()</code> æ–¹æ³•å°†ä¼šè¿”å›å­—ç¬¦ä¸² <code>&quot;[object type]&quot;</code>ã€‚å…¶ä¸­ type æ ¹æ®å¯¹è±¡çš„ç±»å‹çš„ä¸åŒè€Œä¸åŒã€‚</p>
<p>å…³äº <code>Object.prototype.toString()</code> çš„è¯¦ç»†æè¿°å¯ä»¥æŸ¥çœ‹ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString" target="_blank" rel="external">Object.prototype.toString() - JavaScript | MDN</a></p>
<a id="more"></a>
<h2 id="ä½¿ç”¨-toString-åˆ¤æ–­ç±»å‹"><a href="#ä½¿ç”¨-toString-åˆ¤æ–­ç±»å‹" class="headerlink" title="ä½¿ç”¨ toString() åˆ¤æ–­ç±»å‹"></a>ä½¿ç”¨ toString() åˆ¤æ–­ç±»å‹</h2><p>ç”±äº <code>toString()</code> ä¼šè¿”å›å¸¦æœ‰ç±»å‹ä¿¡æ¯çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥é€šå¸¸å¯ä»¥ä½¿ç”¨å®ƒæ¥è¿›è¡Œæ•°æ®ç±»å‹çš„åˆ¤æ–­ã€‚</p>
<p>underscore ä¸­å¯¹ä¸€äº›æ•°æ®ç±»å‹çš„åˆ¤æ–­å®ç°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">_.each([<span class="string">'Arguments'</span>, <span class="string">'Function'</span>, <span class="string">'String'</span>, <span class="string">'Number'</span>, <span class="string">'Date'</span>, <span class="string">'RegExp'</span>, <span class="string">'Error'</span>, <span class="string">'Symbol'</span>, <span class="string">'Map'</span>, <span class="string">'WeakMap'</span>, <span class="string">'Set'</span>, <span class="string">'WeakSet'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  _[<span class="string">'is'</span> + name] = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> toString.call(obj) === <span class="string">'[object '</span> + name + <span class="string">']'</span>;</div><div class="line">  &#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>é€šè¿‡ <code>toString()</code> å‡½æ•°çš„è¿”å›å€¼åˆ¤æ–­ç±»å‹ï¼Œè¿™é‡Œä¸ä½¿ç”¨ <code>typeof</code> åˆ¤æ–­çš„åŸå› æ˜¯å­—é¢é‡ä¸å¯¹è±¡çš„è¿”å›å€¼ä¸åŒã€‚</p>
<p>ä¾‹å¦‚å­—ç¬¦ä¸²å­—é¢é‡ <code>&quot;1&quot;</code> é€šè¿‡ <code>typeof</code> æ“ä½œç¬¦è¿”å›çš„æ˜¯ <code>&quot;string&quot;</code>ï¼Œè€Œå­—ç¬¦ä¸²å¯¹è±¡ <code>new String(&#39;1&#39;)</code> é€šè¿‡ <code>typeof</code> æ“ä½œç¬¦è¿”å›çš„å´æ˜¯ <code>&quot;object&quot;</code>ã€‚æ‰€ä»¥é€šè¿‡ <code>Object.prototype.toString()</code> æ¥è¿›è¡Œåˆ¤æ–­æœ€ä¸ºå¦¥å½“ã€‚</p>
<h2 id="åˆ¤æ–­-NaNï¼Œnullï¼Œundefined"><a href="#åˆ¤æ–­-NaNï¼Œnullï¼Œundefined" class="headerlink" title="åˆ¤æ–­ NaNï¼Œnullï¼Œundefined"></a>åˆ¤æ–­ NaNï¼Œnullï¼Œundefined</h2><h3 id="NaN"><a href="#NaN" class="headerlink" title="NaN"></a>NaN</h3><p>åœ¨ JavaScript çš„ Number ç±»å‹ä¸­æœ‰è¿™æ ·ä¸€ä¸ªç‰¹æ®Šçš„å­˜åœ¨ï¼Œé‚£å°±æ˜¯ <code>NaN</code>ã€‚<code>NaN</code> çš„æ„æ€æ˜¯ Not-A-Numberï¼Œå³ä¸æ˜¯ä¸€ä¸ªæ•°å­—ã€‚å½“å¯¹æ— æ³•è½¬æ¢ä¸ºæ•°å­—çš„å˜é‡è¿›è¡Œæ•°å­—è½¬æ¢æ—¶å°±ä¼šå¾—åˆ° <code>NaN</code>ã€‚<code>Nan</code> è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„æ€§è´¨ï¼Œå°±æ˜¯ <code>NaN === NaN</code> è¿”å›çš„æ˜¯ falseã€‚</p>
<p>æ‰€ä»¥å¯¹ NaN çš„åˆ¤æ–­çš„å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">_.isNaN = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> _.isNumber(obj) &amp;&amp; <span class="built_in">isNaN</span>(obj);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>å…ˆåˆ¤æ–­æ˜¯å¦ä¸º Number ç±»å‹ï¼Œæ’é™¤éšå¼ç±»å‹è½¬æ¢é€ æˆçš„è¯¯åˆ¤ã€‚å†ä½¿ç”¨ isNaN å‡½æ•°åˆ¤æ–­æ˜¯å¦ä¸º NaNã€‚</p>
<h3 id="null"><a href="#null" class="headerlink" title="null"></a>null</h3><p>åœ¨ JavaScript ä¸­æœ‰ <code>==</code> ä¸ <code>===</code> ä¸¤ä¸ªç›¸ç­‰æ“ä½œç¬¦ï¼Œåè€…ä¸ºä¸¥æ ¼æ¯”è¾ƒã€‚<code>null == undefined</code> çš„è¿”å›å€¼æ˜¯ trueï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨è¿™ä¸ªæ¥åˆ¤æ–­æ˜¯å¦ä¸º nullã€‚è€Œ <code>null === undefined</code> è¿”å›çš„æ˜¯ falseï¼Œå› æ­¤ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰å“åˆ¤æ–­æ˜¯å¦ä¸º nullã€‚è€Œ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">_.isNull = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> obj === <span class="literal">null</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="undefined"><a href="#undefined" class="headerlink" title="undefined"></a>undefined</h3><p>åˆ¤æ–­å˜é‡æ˜¯å¦ä¸º <code>undefined</code>ï¼Œå¾ˆè‡ªç„¶ä¼šæƒ³åˆ°ä½¿ç”¨ <code>foo === undefined</code> çš„æ–¹å¼æ¥åˆ¤æ–­ã€‚ä½†æ˜¯è¿™æ ·åšæ˜¯ä¸å®‰å…¨çš„ï¼Œåœ¨æ—§çš„æµè§ˆå™¨ç‰ˆæœ¬ä¸Š <code>undefined</code> æ˜¯å¯ä»¥è¢«é‡å†™çš„ã€‚è¿™æ—¶ä½¿ç”¨ä¸Šé¢é‚£æ ·åˆ¤æ–­ä¼šå‡ºç°è¿™ç§çŠ¶å†µï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="literal">undefined</span> = <span class="string">'foo'</span>;</div><div class="line"><span class="keyword">var</span> foo = <span class="string">'foo'</span>;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(foo === <span class="literal">undefined</span>); <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>æ‰€ä»¥è¿™ç§åˆ¤æ–­æ–¹å¼ä¸è¢«æ¨èï¼Œå³ä½¿æ–°ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸Šæ— æ³•é‡å†™ undefinedã€‚æ›´æ¨èçš„æ–¹å¼æ˜¯ä½¿ç”¨ <code>void 0</code> æ¥åˆ¤æ–­ã€‚<br>å…³äº <code>void 0</code> ä¸ <code>undefined</code> å¯ä»¥å‚è€ƒæˆ‘åœ¨çŸ¥ä¹ä¸Šçš„å›ç­”ï¼š<a href="https://www.zhihu.com/question/52645620/answer/131470539" target="_blank" rel="external">ï¼ˆvoid 0ï¼‰åœ¨javascriptä¸­è¡¨ç¤ºä»€ä¹ˆï¼Œå’Œundefinedæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></p>
<p>æ¨èçš„ undefined åˆ¤æ–­å®ç°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">_.isUndefined = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> obj === <span class="keyword">void</span> <span class="number">0</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="åˆ¤æ–­-Object"><a href="#åˆ¤æ–­-Object" class="headerlink" title="åˆ¤æ–­ Object"></a>åˆ¤æ–­ Object</h2><p>åœ¨ underscore ä¸­å¯¹å¯¹è±¡ç±»å‹çš„åˆ¤æ–­æ˜¯é€šè¿‡ <code>typeof</code> æ¥å®ç°çš„ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">_.isObject = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> type = <span class="keyword">typeof</span> obj;</div><div class="line">  <span class="keyword">return</span> type === <span class="string">'function'</span> || type === <span class="string">'object'</span> &amp;&amp; !!obj;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p><code>typeof</code> æ“ä½œç¬¦åœ¨å˜é‡ä¸º <code>null</code> æˆ–è€…æ˜¯å¯¹è±¡æ—¶è¿”å› <code>&quot;object&quot;</code>ï¼Œåœ¨å˜é‡ä¸ºå‡½æ•°å¯¹è±¡æ—¶è¿”å› <code>function</code>ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦çš„æ˜¯åˆ¤æ–­å˜é‡æ˜¯å¦ä¸ºå¯¹è±¡ï¼Œé‚£ä¹ˆå°±éœ€è¦æ’é™¤ <code>null</code> çš„æƒ…å†µï¼Œå³å°†å˜é‡è¿›è¡Œä¸¤æ¬¡å–åæ“ä½œï¼Œå°†å˜é‡è½¬æ¢ä¸º <code>Boolean</code> ç±»å‹ã€‚ç”±äº <code>null</code> ä¼šè½¬æ¢ä¸º <code>false</code>ï¼Œé‚£ä¹ˆè¿™æ ·å°±å¯ä»¥æ’é™¤ <code>null</code> çš„å¹²æ‰°ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘å¼€å§‹è¯»ä¹‹å‰æ²¡æœ‰è¯»å®Œçš„ underscore çš„æºç ï¼ŒåˆšæŠŠ Object éƒ¨åˆ†è¯»å®Œã€‚å¯¹ JavaScript ä¸­ç±»å‹åˆ¤æ–­éƒ¨åˆ†çš„æ€»ç»“ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Object-prototype-toString&quot;&gt;&lt;a href=&quot;#Object-prototype-toString&quot; class=&quot;headerlink&quot; title=&quot;Object.prototype.toString()&quot;&gt;&lt;/a&gt;Object.prototype.toString()&lt;/h2&gt;&lt;p&gt;åœ¨è¿›è¡Œç±»å‹åˆ¤æ–­æ—¶ï¼Œä½¿ç”¨åˆ°æœ€å¤šçš„å½“å± &lt;code&gt;Object.prototype.toString()&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;toString()&lt;/code&gt; æ–¹æ³•è¿”å›ä¸€ä¸ªä»£è¡¨è¯¥å¯¹è±¡çš„å­—ç¬¦ä¸²ã€‚æ¯ä¸ªå¯¹è±¡éƒ½ä¼šç»§æ‰¿ Object ä¸Šçš„ &lt;code&gt;toString&lt;/code&gt; æ–¹æ³•ï¼Œå¦‚æœè¯¥æ–¹æ³•æ²¡æœ‰è¢«åŒåæ–¹æ³•è¦†ç›–çš„è¯ã€‚ä½¿ç”¨ &lt;code&gt;toString()&lt;/code&gt; æ–¹æ³•å°†ä¼šè¿”å›å­—ç¬¦ä¸² &lt;code&gt;&amp;quot;[object type]&amp;quot;&lt;/code&gt;ã€‚å…¶ä¸­ type æ ¹æ®å¯¹è±¡çš„ç±»å‹çš„ä¸åŒè€Œä¸åŒã€‚&lt;/p&gt;
&lt;p&gt;å…³äº &lt;code&gt;Object.prototype.toString()&lt;/code&gt; çš„è¯¦ç»†æè¿°å¯ä»¥æŸ¥çœ‹ï¼š&lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Object.prototype.toString() - JavaScript | MDN&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯æ–‡ç« " scheme="http://www.ahonn.me/categories/technology/"/>
    
    
      <category term="å‰ç«¯" scheme="http://www.ahonn.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="JavaScript" scheme="http://www.ahonn.me/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>ã€Œå¾®ä¿¡å°ç¨‹åºã€å…¥å‘æ€»ç»“</title>
    <link href="http://www.ahonn.me/2016/11/14/wechat-app-summary/"/>
    <id>http://www.ahonn.me/2016/11/14/wechat-app-summary/</id>
    <published>2016-11-14T14:03:46.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>å‰æ®µæ—¶é—´å»äº†å¹¿å·å‚åŠ äº†å…³äºã€Œå¾®ä¿¡å°ç¨‹åºã€çš„æŠ€æœ¯æ²™é¾™ï¼Œæ•´åœºä¸‹æ¥æ”¶è·é¢‡å¤šã€‚å®é™…ä¸Šå¾®ä¿¡å°ç¨‹åºåˆšåˆšå‘å¸ƒå‡ºæ¥çš„æ—¶å€™å°±å…³æ³¨ï¼Œå¼„äº†ç ´è§£äº†çš„å¼€å‘å·¥å…·ï¼Œè·‘äº†ä¸ªå®˜æ–¹çš„ Demoã€‚</p>
<p>å¬å®Œå›æ¥ä¹‹åå°±æƒ³ç€æŒ–ä¸ªç›¸å…³çš„å‘ï¼Œæ­£å¥½çœ‹åˆ°æ‰‹æœºä¸Šçš„ ã€ŒONE Â· ä¸€ä¸ªã€ã€‚ä¸Šç½‘æ‰¾åˆ°äº† ONE çš„æ¥å£ï¼Œæ‰“ç®—æä¸€ä¸ªä»¿ç…§ ONE å®˜æ–¹ APP çš„å°ç¨‹åºï¼Œæœ€åå°±æœ‰äº† <a href="https://github.com/ahonn/weapp-one" target="_blank" rel="external">weapp-one</a> è¿™ä¸ªé¡¹ç›®ã€‚</p>
<h2 id="å…³äºå°ç¨‹åº"><a href="#å…³äºå°ç¨‹åº" class="headerlink" title="å…³äºå°ç¨‹åº"></a>å…³äºå°ç¨‹åº</h2><p>å¾®ä¿¡å°ç¨‹åºä¸æ˜¯ Web ä¹Ÿä¸æ˜¯ Nativeï¼Œå°è¯•ä¹‹åç»™æˆ‘çš„æ„Ÿè§‰æœ‰ç‚¹åƒæ˜¯ weexã€‚å› ä¸ºä¹‹å‰å°è¯• weex çš„æ—¶å€™æ˜¯ä¸‹è½½ä¸€ä¸ª APPï¼Œç„¶åé€šè¿‡åº”ç”¨å†…æ‰«ç æ¥è¿è¡Œå¯¹åº”çš„åº”ç”¨ã€‚è¿™ä¸€ç‚¹ä¸Šå°ç¨‹åºç±»ä¼¼ã€‚</p>
<p>åœ¨æ²™é¾™ä¸Šæœ‰ä½åˆ†äº«å˜‰å®¾æœ‰æåˆ°ï¼Œå°ç¨‹åºå®é™…ä¸Šæ˜¯åœ¨ Webview ä¹‹ä¸Šå†åŠ ä¸Šä¸€å±‚åŸç”Ÿçš„ç»„ä»¶ã€‚ä¾‹å¦‚åº•éƒ¨çš„ tabbar ä»¥åŠé¡¶éƒ¨çš„ navbar å°±æ˜¯åŸç”Ÿçš„ã€‚è¿˜æœ‰å°ç¨‹åºçš„ map ç»„ä»¶ï¼Œæ˜¯è°ƒç”¨åŸç”Ÿçš„ map ç»„ä»¶ã€‚</p>
<a id="more"></a>
<h2 id="è¯·æ±‚é™åˆ¶"><a href="#è¯·æ±‚é™åˆ¶" class="headerlink" title="è¯·æ±‚é™åˆ¶"></a>è¯·æ±‚é™åˆ¶</h2><p>ä¸€å¼€å§‹å°±é‡åˆ°äº†é—®é¢˜ï¼ŒONE å®˜æ–¹çš„æ¥å£æ˜¯ http çš„ï¼Œè€Œä¸”æ˜¯ 8000 è¿™ä¸ªç«¯å£ã€‚å¾®ä¿¡å°ç¨‹åºå¯¹å‘é€çš„è¯·æ±‚æœ‰é™åˆ¶ï¼Œå¿…é¡»æ˜¯ httpsï¼ˆåœ¨æœ¬åœ°å¼€å‘å¯ä»¥ç”¨ httpï¼‰ï¼Œè€Œä¸”ä¸èƒ½å¸¦ç«¯å£å·ã€‚</p>
<p>æ‰€ä»¥æˆ‘å°±ä½¿ç”¨äº†æ¯”è¾ƒæš´åŠ›çš„æ–¹æ³•ï¼ŒæŠŠå¼€å‘å·¥å…·ä¸­å¯¹åº”ç”¨æ¥é™åˆ¶çš„ä»£ç ç»™æ³¨é‡Šæ‰äº†ï¼Œåæ­£åªæ˜¯ç”¨æ¥ä½“éªŒä¸€ä¸‹å°ç¨‹åºå¼€å‘ï¼Œæ‰€ä»¥å°±æ— æ‰€è°“äº†ã€‚</p>
<h2 id="æ·»åŠ é¡µé¢"><a href="#æ·»åŠ é¡µé¢" class="headerlink" title="æ·»åŠ é¡µé¢"></a>æ·»åŠ é¡µé¢</h2><p>åœ¨å°ç¨‹åºä¸­æ·»åŠ é¡µé¢éƒ½éœ€è¦å°†è·¯å¾„æ·»åŠ åˆ° <code>app.json</code> ä¸­çš„ <code>page</code> é¡¹ä¸­ï¼Œå¦åˆ™ä¼šæ‰¾ä¸åˆ°é¡µé¢ã€‚ä¸ Vue ç±»ä¼¼ï¼Œæ¯ä¸ªå°ç¨‹åºé¡µé¢åŒ…å« <code>page.js</code>ï¼Œ<code>page.wxml</code>ï¼Œ<code>page.wxss</code>ï¼Œåˆ†åˆ«å¯¹åº”è„šæœ¬ï¼Œæ¨¡æ¿ä»¥åŠæ ·å¼ã€‚</p>
<p>è¿˜å¯ä»¥æ·»åŠ ä¸€ä¸ª <code>page.json</code> å¯¹é¡µé¢è¿›è¡Œå•ç‹¬é…ç½®ï¼Œæ¯”å¦‚é…ç½® <code>navigationBarTitleText</code> æ¥æ”¹å˜å¯¼èˆªä¸Šçš„æ–‡å­—æ˜¾ç¤ºï¼Œè¯¸å¦‚æ­¤ç±»çš„å¯¹é¡µé¢çš„çª—å£è¡¨ç°é…ç½®ã€‚</p>
<h2 id="å¥‡æ€ªçš„ç»„ä»¶"><a href="#å¥‡æ€ªçš„ç»„ä»¶" class="headerlink" title="å¥‡æ€ªçš„ç»„ä»¶"></a>å¥‡æ€ªçš„ç»„ä»¶</h2><p><strong>viewã€text</strong><br>åœ¨ wxml é‡Œé¢å†™çš„æ˜¯ç±»ä¼¼ HTML çš„æ ‡ç­¾ï¼Œæ ‡å‡†çš„ HTML æ ‡ç­¾æ˜¯æ— æ³•ä½¿ç”¨çš„ã€‚åªèƒ½ä½¿ç”¨å¾®ä¿¡å°ç¨‹åºå®˜æ–¹çš„ç»„ä»¶ï¼Œç»„ä»¶å¯¹åº”æœ‰ä¸€äº›å±æ€§æˆ–äº‹ä»¶å¯ä»¥è°ƒç”¨ã€‚æœ‰ç±»ä¼¼äº <code>&lt;div&gt;</code> çš„ <code>&lt;view&gt;</code> ç»„ä»¶ï¼ŒåŸºæœ¬ä¸Šé¡µé¢ä¸Šçš„ç»„ä»¶éƒ½ä¼šè¢« <code>&lt;view&gt;</code> åŒ…è£¹ä½ã€‚<br>ç„¶åæ–‡å­—æ–¹é¢æ˜¯ä½¿ç”¨ <code>&lt;text&gt;</code>ï¼Œè™½ç„¶ç›´æ¥æ˜¾ç¤ºæ–‡å­—ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ä¸è¿‡æˆ‘è¿˜æ˜¯æŠŠæ‰€æœ‰çš„æ–‡å­—éƒ½åŠ ä¸Šäº† <code>&lt;text&gt;</code> æ ‡ç­¾ã€‚</p>
<p><strong>image</strong><br>è¯´èµ·ç»„ä»¶ï¼Œå¾®ä¿¡å°ç¨‹åºé‡Œæœ€è®©æˆ‘ä¸çˆ½çš„å°±æ˜¯ <code>&lt;image&gt;</code> è¿™ä¸ªç»„ä»¶äº†ã€‚ç»™è¿™ä¸ªç»„ä»¶ä¸€ä¸ªå›¾ç‰‡åœ°å€ä¹‹åï¼Œé»˜è®¤çš„æ ·å¼ä¸æ˜¯å›¾ç‰‡çš„å¤§å°ï¼Œè€Œæ˜¯å›ºå®šçš„ 300px * 225pxã€‚ä¸ HTML ä¸­çš„ <code>&lt;img&gt;</code> å®Œå…¨ä¸åŒï¼Œç”¨èµ·æ¥æœ‰ç‚¹ä¸èˆ’æœã€‚<br><code>&lt;image&gt;</code> ç»„ä»¶è¿˜æä¾›äº†ä¸åŒæ˜¾ç¤ºæ–¹å¼çš„ modeï¼Œä¸è¿‡ç”¨èµ·æ¥è¿˜æ˜¯è§‰å¾—æ€ªæ€ªçš„ã€‚</p>
<p><strong>audio</strong><br>éŸ³é¢‘æ’­æ”¾çš„è¯æœ‰ <code>&lt;audio&gt;</code> è¿™ä¸ªç»„ä»¶ï¼Œä½†æ˜¯è¿™ä¸ªç»„ä»¶çš„æ ·å¼å¥½åƒæ˜¯å›ºå®šçš„ï¼Œç±»ä¼¼äºåœ¨ç½‘é¡µä¹ŸåŠ ä¸Šç½‘æ˜“äº‘éŸ³ä¹çš„å¤–é“¾é‚£æ ·ã€‚ä¸è¿‡å¹¸å¥½æœ‰éŸ³é¢‘æ’­æ”¾ç›¸å…³çš„ api å¯ä»¥ç”¨ï¼Œè¿™æ ·å°±å¯ä»¥å½“ç”¨æˆ·è§¦å‘æŸäº›æ“ä½œçš„æ—¶å€™æ’­æ”¾éŸ³é¢‘ï¼Œå³å¯å®ç°æ’­æ”¾æŒ‰é’®ç‚¹å‡»åæ’­æ”¾éŸ³é¢‘ã€‚</p>
<p>å¾®ä¿¡å°ç¨‹åºåœ¨æ’­æ”¾éŸ³é¢‘çš„æ—¶å€™ï¼Œå¼€å‘å·¥å…·ä¸Šä¼šå‡ºç°å¯¹åº”çš„éŸ³ä¹æ ï¼Œå¯ä»¥å¯¹æ’­æ”¾çš„éŸ³é¢‘è¿›è¡Œæ’­æ”¾/æš‚åœã€‚çŒœçŒœåœ¨çœŸæœºä¸Šä½¿ç”¨æ—¶ï¼Œä¼šåœ¨é€šçŸ¥æ å‡ºç°éŸ³é¢‘æ§åˆ¶ã€‚ä¸Šé¢ä¼šæ˜¾ç¤ºéŸ³é¢‘çš„ä½œè€…ä»¥åŠæ­Œæ›²åç§°ã€‚ä½†æ˜¯åœ¨å®é™…ä½¿ç”¨ä¸­æœ‰ä¸€ç‚¹æ¯”è¾ƒå°´å°¬ï¼Œä½¿ç”¨è°ƒç”¨ api çš„æ–¹å¼æ’­æ”¾éŸ³é¢‘æ²¡æœ‰è®¾ç½®éŸ³é¢‘ä½œè€…çš„é€‰é¡¹ã€‚è¯¦æƒ…å¯ä»¥è§ <a href="https://mp.weixin.qq.com/debug/wxadoc/dev/api/media-background-audio.html?t=20161107#wxplaybackgroundaudioobject" target="_blank" rel="external">éŸ³ä¹æ’­æ”¾æ§åˆ¶ Â· å°ç¨‹åº</a></p>
<p><strong>video</strong><br>ç›¸è¾ƒä¸ HTML5 ä¸­çš„ <code>&lt;video&gt;</code> æ ‡ç­¾ï¼Œå¾®ä¿¡å°ç¨‹åºä¸­çš„ <code>&lt;video&gt;</code> ç»„ä»¶ç¼ºå¤±äº†å¾ˆå¤šä¸œè¥¿ï¼Œä¾‹å¦‚ <code>loop</code> ä¸ <code>poster</code>ã€‚ä¹Ÿå°±æ˜¯è¯´æ— æ³•åœ¨ç”¨æˆ·ç‚¹å‡»æ’­æ”¾æŒ‰é’®å‰æ˜¾ç¤ºç‰¹å®šçš„å›¾åƒï¼Œåªèƒ½æ˜¯æ˜¾ç¤ºè§†é¢‘æœ€å¼€å¤´ã€‚<br><code>&lt;video&gt;</code> ç»„ä»¶åŒæ ·æœ‰é»˜è®¤çš„å°ºå¯¸ 300px * 225pxï¼Œä½†æ²¡æœ‰ <code>&lt;image&gt;</code> ç»„ä»¶ä¸­çš„æ˜¾ç¤ºæ¨¡å¼çš„è®¾ç½®ã€‚æœªå…¨å±çŠ¶æ€ä¸‹ï¼Œåœ¨ä¸åŒçš„åˆ†è¾¨ç‡ä¸Šï¼Œä¸Šä¸‹æˆ–è€…å·¦å³å¯èƒ½ä¼šå­˜åœ¨é»‘è¾¹ã€‚</p>
<h2 id="ç‰¹æ®Šçš„-rpx"><a href="#ç‰¹æ®Šçš„-rpx" class="headerlink" title="ç‰¹æ®Šçš„ rpx"></a>ç‰¹æ®Šçš„ rpx</h2><p>å¾®ä¿¡å°ç¨‹åºä¸­æœ‰ç‰¹æœ‰çš„ä¸€ä¸ªå°ºå¯¸å•ä½ â€”â€” rpxï¼Œ1rpx è¡¨ç¤ºå±å¹•å®½åº¦çš„ 1/750 å¤§å°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ100% å®½åº¦å°±æ˜¯ 750rpxã€‚è¿˜æœ‰ä¸€ä¸ªä¼šè¢«å¿½ç•¥çš„å°ºå¯¸å•ä½ â€”â€” remï¼Œä¸ Web ä¸­çš„ rem ä¸åŒï¼Œ1rem è¡¨ç¤ºå±å¹•å®½åº¦çš„ 1/20 å¤§å°ã€‚</p>
<p>åœ¨é«˜åº¦ä¸Šä½¿ç”¨ rpx çš„è¯ï¼Œä¹Ÿä¼šæ ¹æ®å±å¹•çš„å®½åº¦çš„å¤§å°è€Œæ”¹å˜ã€‚æˆ‘æ›´å€¾å‘ä¸å®½åº¦ä½¿ç”¨ rpx è€Œé«˜åº¦ä½¿ç”¨ remï¼Œä¸è¿‡å…¶å®æ¯”è¾ƒå–œæ¬¢ç”¨ px æ¥å†™æ ·å¼ï¼Œè¿™å¯èƒ½ç®—æ˜¯ä¸€ä¸ªä¸å¥½çš„ä¹ æƒ¯ã€‚</p>
<h2 id="å®ç°æ»‘è‡³æœ€å³åˆ‡æ¢é¡µé¢"><a href="#å®ç°æ»‘è‡³æœ€å³åˆ‡æ¢é¡µé¢" class="headerlink" title="å®ç°æ»‘è‡³æœ€å³åˆ‡æ¢é¡µé¢"></a>å®ç°æ»‘è‡³æœ€å³åˆ‡æ¢é¡µé¢</h2><p>åœ¨ä»¿ç…§ ONE å†™å¾®ä¿¡å°ç¨‹åºçš„æ—¶å€™é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œä½¿ç”¨æ»‘å—è§†å›¾ç»„ä»¶ <code>&lt;swiper&gt;</code> å»æ˜¾ç¤ºæ¯æ—¥å›¾æ–‡ï¼Œä¸€å…±10ä¸ªå›¾æ–‡ï¼Œå½“æ»‘åŠ¨è‡³æœ€å³æ—¶åˆ‡æ¢åˆ°é€‰æ‹©å¾€æœŸåˆ—è¡¨çš„é¡µé¢ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://ouv0frko5.bkt.clouddn.com/3qpaf.jpg" alt="One"></p>
<p>ä½†æ˜¯ <code>&lt;swiper&gt;</code> ç»„ä»¶å¹¶æ²¡æœ‰æä¾›å¯¹åº”çš„äº‹ä»¶ï¼Œä½¿ç”¨å°±è‡ªå·±å®ç°äº†ä¸€ä¸ªã€‚ä¸»è¦æ˜¯ä½¿ç”¨æ»‘å—è§†å›¾æ¯ä¸€æ¬¡åˆ‡æ¢è§†å›¾æ—¶éƒ½ä¼šè§¦å‘ä¸€ä¸ª <code>bindchange</code> äº‹ä»¶ï¼Œè¿˜æœ‰è®¾ç½®æ»‘å—è§†å›¾æ˜¾ç¤ºä½ç½®çš„ <code>current</code> å±æ€§ã€‚</p>
<p>åœ¨ <code>&lt;swiper&gt;</code> ç»„ä»¶ä¸­æ·»åŠ ä¸€ä¸ªç©ºçš„ <code>&lt;swiper-item&gt;</code> å­ç»„ä»¶ï¼Œå½“æ»‘åŠ¨åˆ°è¿™ä¸ªç©ºçš„å­ç»„ä»¶çš„æ—¶å€™ä½¿ç”¨ <code>wx.navigateTo</code> è¿™ä¸ª api å»åˆ‡æ¢åˆ°å¾€æœŸåˆ—è¡¨è¿™ä¸ªé¡µé¢ã€‚åŒæ—¶å°†æ»‘å—è§†å›¾çš„æ˜¾ç¤ºä½ç½®è®¾ç½®åˆ°å€’æ•°ç¬¬äºŒä¸ªï¼Œå³æœ€åä¸€ä¸ªéç©ºçš„å­ç»„ä»¶ã€‚</p>
<p>è¿™æ ·å°±å®ç°äº†æ»‘åŠ¨è‡³æœ€å³åˆ‡æ¢é¡µé¢çš„åŠŸèƒ½ï¼ŒåŒæ—¶åœ¨ç‚¹å‡»è¿”å›çš„æ—¶å€™æ˜¾ç¤ºçš„ä¹Ÿæ˜¯æ»‘å—è§†å›¾ä¸­çš„æœ€åä¸€ä¸ªæœ‰å†…å®¹çš„å­ç»„ä»¶ã€‚å…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">Page(&#123;</div><div class="line">  data: &#123;</div><div class="line">    current: <span class="number">0</span></div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// ......</span></div><div class="line">  <span class="comment">// more code</span></div><div class="line">  handleChange: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> current = e.detail.current</div><div class="line">    <span class="keyword">let</span> length = <span class="keyword">this</span>.data.vols.length</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (current === length) &#123;</div><div class="line">      <span class="keyword">this</span>.setData(&#123;</div><div class="line">        current: length</div><div class="line">      &#125;)</div><div class="line">      wx.navigateTo(&#123;</div><div class="line">        url: <span class="string">'../history/history?page=index'</span>,</div><div class="line">        success: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">          <span class="keyword">this</span>.setData(&#123;</div><div class="line">            current: length - <span class="number">1</span></div><div class="line">          &#125;)</div><div class="line">        &#125;</div><div class="line">      &#125;)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>è¿™é‡Œä½¿ç”¨äº†ä¸¤æ¬¡ <code>this.setData</code> æ˜¯å› ä¸ºåœ¨ç¬¬äºŒæ¬¡æ‰§è¡Œä¸Šé¢çš„æ»‘åŠ¨åˆ‡æ¢é¡µé¢å†è¿”å›çš„æ—¶å€™ï¼Œæ˜¾ç¤ºçš„å­ç»„ä»¶å¹¶ä¸æ˜¯æœ€åä¸€ä¸ªéç©ºçš„å­ç»„ä»¶ï¼Œè€Œæ˜¯æœ€åçš„é‚£ä¸ªç©ºå­ç»„ä»¶ã€‚å¤§æ¦‚åŸå› æ˜¯å› ä¸ºç¬¬äºŒæ¬¡æ‰§è¡Œè¿™ä¸ªæ“ä½œçš„æ—¶å€™ï¼Œ<code>current</code> å¹¶æ²¡æœ‰æ›´æ–°ã€‚<br>æ‰€ä»¥è§£å†³çš„æ–¹æ¡ˆæ˜¯åœ¨æ¯æ¬¡ä¿®æ”¹ <code>current</code> ä¹‹å‰ä¿®æ”¹ä¸€æ¬¡å®ƒçš„å€¼ï¼Œä½¿å¾—åé¢ä¿®æ”¹ <code>current</code> å€¼æ—¶ä¼šè§¦å‘è§†å›¾çš„æ›´æ–°ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰æ®µæ—¶é—´å»äº†å¹¿å·å‚åŠ äº†å…³äºã€Œå¾®ä¿¡å°ç¨‹åºã€çš„æŠ€æœ¯æ²™é¾™ï¼Œæ•´åœºä¸‹æ¥æ”¶è·é¢‡å¤šã€‚å®é™…ä¸Šå¾®ä¿¡å°ç¨‹åºåˆšåˆšå‘å¸ƒå‡ºæ¥çš„æ—¶å€™å°±å…³æ³¨ï¼Œå¼„äº†ç ´è§£äº†çš„å¼€å‘å·¥å…·ï¼Œè·‘äº†ä¸ªå®˜æ–¹çš„ Demoã€‚&lt;/p&gt;
&lt;p&gt;å¬å®Œå›æ¥ä¹‹åå°±æƒ³ç€æŒ–ä¸ªç›¸å…³çš„å‘ï¼Œæ­£å¥½çœ‹åˆ°æ‰‹æœºä¸Šçš„ ã€ŒONE Â· ä¸€ä¸ªã€ã€‚ä¸Šç½‘æ‰¾åˆ°äº† ONE çš„æ¥å£ï¼Œæ‰“ç®—æä¸€ä¸ªä»¿ç…§ ONE å®˜æ–¹ APP çš„å°ç¨‹åºï¼Œæœ€åå°±æœ‰äº† &lt;a href=&quot;https://github.com/ahonn/weapp-one&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;weapp-one&lt;/a&gt; è¿™ä¸ªé¡¹ç›®ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å…³äºå°ç¨‹åº&quot;&gt;&lt;a href=&quot;#å…³äºå°ç¨‹åº&quot; class=&quot;headerlink&quot; title=&quot;å…³äºå°ç¨‹åº&quot;&gt;&lt;/a&gt;å…³äºå°ç¨‹åº&lt;/h2&gt;&lt;p&gt;å¾®ä¿¡å°ç¨‹åºä¸æ˜¯ Web ä¹Ÿä¸æ˜¯ Nativeï¼Œå°è¯•ä¹‹åç»™æˆ‘çš„æ„Ÿè§‰æœ‰ç‚¹åƒæ˜¯ weexã€‚å› ä¸ºä¹‹å‰å°è¯• weex çš„æ—¶å€™æ˜¯ä¸‹è½½ä¸€ä¸ª APPï¼Œç„¶åé€šè¿‡åº”ç”¨å†…æ‰«ç æ¥è¿è¡Œå¯¹åº”çš„åº”ç”¨ã€‚è¿™ä¸€ç‚¹ä¸Šå°ç¨‹åºç±»ä¼¼ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ²™é¾™ä¸Šæœ‰ä½åˆ†äº«å˜‰å®¾æœ‰æåˆ°ï¼Œå°ç¨‹åºå®é™…ä¸Šæ˜¯åœ¨ Webview ä¹‹ä¸Šå†åŠ ä¸Šä¸€å±‚åŸç”Ÿçš„ç»„ä»¶ã€‚ä¾‹å¦‚åº•éƒ¨çš„ tabbar ä»¥åŠé¡¶éƒ¨çš„ navbar å°±æ˜¯åŸç”Ÿçš„ã€‚è¿˜æœ‰å°ç¨‹åºçš„ map ç»„ä»¶ï¼Œæ˜¯è°ƒç”¨åŸç”Ÿçš„ map ç»„ä»¶ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ€è€ƒæ€»ç»“" scheme="http://www.ahonn.me/categories/thinking/"/>
    
    
      <category term="JavaScript" scheme="http://www.ahonn.me/tags/JavaScript/"/>
    
      <category term="Wechat" scheme="http://www.ahonn.me/tags/Wechat/"/>
    
  </entry>
  
  <entry>
    <title>React è·¯ç”±è·³è½¬åå›åˆ°é¡µé¢é¡¶éƒ¨</title>
    <link href="http://www.ahonn.me/2016/10/11/after-the-react-routing-scroll-to-the-top-of-the-page/"/>
    <id>http://www.ahonn.me/2016/10/11/after-the-react-routing-scroll-to-the-top-of-the-page/</id>
    <published>2016-10-10T17:13:19.000Z</published>
    <updated>2017-08-30T10:22:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ React ç»„ä»¶é—´è¿›è¡Œé¡µé¢è·³è½¬åï¼Œå‘ç°é¡µé¢çš„ä½ç½®å¹¶ä¸åœ¨é¡µé¢é¡¶éƒ¨ï¼Œè€Œæ˜¯åœ¨é¡µé¢è·³è½¬å‰çš„ä½ç½®ã€‚å°±æ˜¯è¯´æµè§ˆå™¨çš„æ»šåŠ¨æ¡å¹¶æ²¡æœ‰å›åˆ°é¡¶éƒ¨çš„ä½ç½®ã€‚</p>
<p>ç»è¿‡æœç´¢ä¹‹åæ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼š<a href="http://stackoverflow.com/questions/33188994/scroll-to-the-top-of-the-page-after-render-in-react-js" target="_blank" rel="external">Scroll to the top of the page after render in react.js</a></p>
<p>å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ç§è§£å†³ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼ä¸æ˜¯ä¸€ç§å¾ˆå¥½çš„è§£å†³æ–¹æ³•ã€‚è€Œä¸” <code>scrollIntoView()</code> æ–¹æ³•å¹¶ä¸å›åˆ°é¡µé¢çš„é¡¶éƒ¨ï¼Œåº”è¯¥ä½¿ç”¨ <code>scrollTop = 0</code> çš„æ–¹å¼ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">componentDidUpdate = <span class="function"><span class="params">()</span> =&gt;</span> &#123; ReactDom.findDOMNode(<span class="keyword">this</span>).scrollIntoView(); &#125;</div></pre></td></tr></table></figure>
<p>æ‰€ä»¥å¾—åˆ°çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">componentDidUpdate() &#123;</div><div class="line">  ReactDOM.findDOMNode(<span class="keyword">this</span>).scrollTop = <span class="number">0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>ä½†æ˜¯æˆ‘ä½¿ç”¨è¿™ä¸ªä¹‹åï¼ŒESlint æŠ¥äº†ä¸ªé”™ï¼š<code>no-find-dom-node</code>ã€‚<br>æŸ¥çœ‹ <code>eslint-plugin-react</code> çš„<a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/no-find-dom-node.md" target="_blank" rel="external">æ–‡æ¡£</a>å¯ä»¥çœ‹åˆ° Facebook ä¸æ¨èä½¿ç”¨ <code>findDOMNode</code>ï¼Œæ¨èä½¿ç”¨ <code>refs</code> è·å– DOM èŠ‚ç‚¹ã€‚</p>
<p>æ‰€ä»¥æ¨èçš„ä½¿ç”¨æ–¹æ³•æ˜¯ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  componentDidMount() &#123;</div><div class="line">    <span class="keyword">this</span>.node.scrollIntoView();</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> &lt;div ref=&#123;node =&gt; this.node = node&#125; /&gt;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨ React ç»„ä»¶é—´è¿›è¡Œé¡µé¢è·³è½¬åï¼Œå‘ç°é¡µé¢çš„ä½ç½®å¹¶ä¸åœ¨é¡µé¢é¡¶éƒ¨ï¼Œè€Œæ˜¯åœ¨é¡µé¢è·³è½¬å‰çš„ä½ç½®ã€‚å°±æ˜¯è¯´æµè§ˆå™¨çš„æ»šåŠ¨æ¡å¹¶æ²¡æœ‰å›åˆ°é¡¶éƒ¨çš„ä½ç½®ã€‚&lt;/p&gt;
&lt;p&gt;ç»è¿‡æœç´¢ä¹‹åæ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼š&lt;a href=&quot;http://stackoverflow.com/questions/33188994/scroll-to-the-top-of-the-page-after-render-in-react-js&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Scroll to the top of the page after render in react.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ç§è§£å†³ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼ä¸æ˜¯ä¸€ç§å¾ˆå¥½çš„è§£å†³æ–¹æ³•ã€‚è€Œä¸” &lt;code&gt;scrollIntoView()&lt;/code&gt; æ–¹æ³•å¹¶ä¸å›åˆ°é¡µé¢çš„é¡¶éƒ¨ï¼Œåº”è¯¥ä½¿ç”¨ &lt;code&gt;scrollTop = 0&lt;/code&gt; çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;componentDidUpdate = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123; ReactDom.findDOMNode(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;).scrollIntoView(); &amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ‰€ä»¥å¾—åˆ°çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;componentDidUpdate() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  ReactDOM.findDOMNode(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;).scrollTop = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="æŠ€æœ¯æ–‡ç« " scheme="http://www.ahonn.me/categories/technology/"/>
    
    
      <category term="React" scheme="http://www.ahonn.me/tags/React/"/>
    
      <category term="å‰ç«¯" scheme="http://www.ahonn.me/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="JavaScript" scheme="http://www.ahonn.me/tags/JavaScript/"/>
    
  </entry>
  
</feed>
